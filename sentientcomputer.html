<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SPR‑C — Sentient Proton Robot (Waves • Voltages • Heartbeats)</title>
<meta name="description" content="SPR‑C demo: nonstop independent particles, thick connection lines, coin‑flip gates, continuous wave underlays for cores, voltage waves under Pos/Neg, heartbeat waves under Mood(±) (spacing reflects mood), and a live Final Decision label (YES/NO). Reset included. Full HTML." />
<style>
  :root{
    --bg:#0b1020;--panel:#0f1530;--ink:#eaf0ff;--muted:#a8b2d8;--accent:#90b4ff;
    --good:#3de6a0;--bad:#ff6b88;--left:#7aa2ff;--right:#ffd37a;--border:#1d2a52;
    --core:#8ef0d4;--train:#bfe27f;--error:#ff8aa6;--pos:#2fe6a0;--neg:#ff6b88;
    --moodP:#6ee7ff;--moodN:#ffb86b;--wire:#b9c6ff;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Ubuntu,Arial,sans-serif}
  .wrap{max-width:1200px;margin:0 auto;padding:16px}
  h1{margin:.2rem 0 .4rem;font-size:28px}
  .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;box-shadow:0 6px 24px rgba(0,0,0,.35)}
  .card>header{padding:12px 14px;border-bottom:1px solid var(--border)}
  .card>header h2{margin:0;font-size:16px;color:var(--muted)}
  .card .body{padding:12px 14px}
  .legend{display:flex;flex-wrap:wrap;gap:8px}
  .legend span{display:inline-flex;align-items:center;gap:8px;background:#0b1330;border:1px solid var(--border);padding:4px 8px;border-radius:999px;font-size:12px;color:var(--muted)}
  .dot{width:10px;height:10px;border-radius:50%}
  .dot.left{background:var(--left)}
  .dot.right{background:var(--right)}
  .dot.gateY{background:var(--good)}
  .dot.gateN{background:var(--bad)}

  .diagram{position:relative;height:740px;border-radius:14px;overflow:hidden;background:radial-gradient(1200px 740px at 50% 50%, rgba(126,224,255,0.06), transparent 60%)}
  svg{position:absolute;inset:0}
  .label{position:absolute;font-size:12px;color:var(--muted);background:#0b1330;padding:4px 6px;border:1px solid var(--border);border-radius:8px;pointer-events:none}
  .label.hl{color:var(--ink)}
  .finalText{position:absolute;left:50%;transform:translateX(-50%);bottom:6px;font-weight:700;font-size:14px;color:#dfffe9}

  .console{height:240px;background:#0b1330;border:1px solid var(--border);border-radius:10px;padding:10px;overflow:auto;font-family:ui-monospace, Menlo, Consolas, monospace;font-size:13px;line-height:1.5}
  .console .ts{color:#8aa0c8}
  .console .ai{color:#d0e2ff}
  .console .meta{color:#9bd2ff}

  .scenarios{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
  .scenarios button, .ctrl button{border:1px solid var(--border);background:#0e1540;color:var(--ink);padding:10px;border-radius:10px;cursor:pointer;font-size:13px}
  .scenarios button:hover, .ctrl button:hover{background:#101b56}
  .scenarios button.active{outline:2px solid var(--accent)}

  .pillbar{display:flex;gap:8px;flex-wrap:wrap}
  .pill{background:#0b1330;border:1px solid var(--border);color:var(--muted);padding:6px 10px;border-radius:999px;font-size:12px}

  .panels{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:8px}
  .panel{background:#0b1330;border:1px solid var(--border);border-radius:10px;padding:10px;min-height:86px}
  .panel h3{margin:0 0 6px;font-size:13px;color:var(--muted)}
  .panel ul{margin:0;padding-left:16px}
  .panel li{font-size:12px;color:var(--ink)}

  .controls{display:grid;grid-template-columns:1fr;gap:8px;margin-top:10px}
  .ctrl{background:#0b1330;border:1px solid var(--border);border-radius:10px;padding:10px}
  .ctrl label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}

  .blink6{animation:blink .45s linear 6}
  @keyframes blink{50%{opacity:.35}}
  .wire{stroke-width:3.8;filter:drop-shadow(0 0 10px #a8d)}
  .wirePulse{stroke-dasharray:6 6; animation:dash 1.1s linear infinite}
  @keyframes dash{to{stroke-dashoffset:-24}}
</style>
</head>
<body>
  <div class="wrap">
    <h1>SPR‑C — Sentient Proton Robot (Waves • Voltages • Heartbeats)</h1>
    <div class="pillbar">
      <span class="pill">Particles: ALWAYS moving (faster, independent bounce)</span>
      <span class="pill">Signal: Cores → Pos/Neg (voltages) → Mood(±) (heartbeats) → Final</span>
      <span class="pill">All gates flip per run</span>
    </div>

    <div class="grid" style="margin-top:12px">
      <section class="card">
        <header>
          <h2>Diagram — connections, waves, and decision</h2>
          <div class="legend">
            <span><i class="dot left"></i>Left particles</span>
            <span><i class="dot right"></i>Right particles</span>
            <span><i class="dot gateY"></i>YES</span>
            <span><i class="dot gateN"></i>NO</span>
          </div>
        </header>
        <div class="body">
          <div class="diagram" id="diagram">
            <div class="label" style="left:24px;top:14px">Left Hemisphere (− logic)</div>
            <div class="label" style="right:24px;top:14px">Right Hemisphere (+ creative)</div>
            <div class="label hl" style="left:50%;transform:translateX(-50%);top:14px">Entanglement Bridge</div>
            <div class="label" style="left:50%;transform:translateX(-50%);bottom:276px">Cores & Memory Squares</div>
            <div class="label" style="left:335px;bottom:178px">Positive</div>
            <div class="label" style="right:335px;bottom:178px">Negative</div>
            <div class="label" style="left:335px;bottom:130px">Mood (+)</div>
            <div class="label" style="right:335px;bottom:130px">Mood (−)</div>
            <div class="label" style="left:50%;transform:translateX(-50%);bottom:28px">Final Ethical Gate</div>
            <div class="finalText" id="finalText">Decision pending…</div>

            <svg id="stage" viewBox="0 0 1200 740" preserveAspectRatio="none">
              <defs>
                <linearGradient id="gradL" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="#1a2450"/>
                  <stop offset="100%" stop-color="#0c1130"/>
                </linearGradient>
                <linearGradient id="gradR" x1="100%" y1="0" x2="0" y2="0%">
                  <stop offset="0%" stop-color="#4a3a10"/>
                  <stop offset="100%" stop-color="#0c1130"/>
                </linearGradient>
                <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="3" result="blur" />
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
                <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3.5" orient="auto" markerUnits="strokeWidth">
                  <path d="M0,0 L8,3.5 L0,7 z" fill="var(--wire)"></path>
                </marker>
              </defs>
              <rect x="0" y="0" width="600" height="740" fill="url(#gradL)" opacity="0.35" />
              <rect x="600" y="0" width="600" height="740" fill="url(#gradR)" opacity="0.35" />

              <!-- Bridge ambience -->
              <rect id="bridge" x="585" y="60" width="30" height="260" rx="10" fill="#7ee0ff" opacity="0.35" />

              <!-- Cores -->
              <circle id="coreNormal" cx="600" cy="326" r="26" fill="var(--core)" opacity="0.95" filter="url(#softGlow)" />
              <text x="600" y="331" text-anchor="middle" font-size="11" fill="#061018">Normal</text>
              <circle id="coreTrain" cx="540" cy="374" r="22" fill="var(--train)" opacity="0.95" filter="url(#softGlow)" />
              <text x="540" y="379" text-anchor="middle" font-size="11" fill="#061018">Train</text>
              <circle id="coreError" cx="660" cy="374" r="22" fill="var(--error)" opacity="0.95" filter="url(#softGlow)" />
              <text x="660" y="379" text-anchor="middle" font-size="11" fill="#061018">Error</text>

              <!-- Episode memory squares (Pos/Neg) -->
              <rect id="posMem" x="320" y="406" width="190" height="54" rx="8" fill="#103522" stroke="#2fe6a0" stroke-width="2" opacity="0.95" />
              <rect id="negMem" x="690" y="406" width="190" height="54" rx="8" fill="#3a0f18" stroke="#ff6b88" stroke-width="2" opacity="0.95" />

              <!-- Mood memory squares (+ / −) -->
              <rect id="moodPos" x="320" y="464" width="190" height="44" rx="8" fill="#0d2a38" stroke="#6ee7ff" stroke-width="2" opacity="0.95" />
              <rect id="moodNeg" x="690" y="464" width="190" height="44" rx="8" fill="#321b06" stroke="#ffb86b" stroke-width="2" opacity="0.95" />

              <!-- Wires (thick with arrows) -->
              <path id="wireNtoPos" d="M600,352 L600,406" stroke="#8ef0d4" class="wire wirePulse" marker-end="url(#arrow)" />
              <path id="wireTtoPos" d="M540,398 L420,406" stroke="#bfe27f" class="wire wirePulse" marker-end="url(#arrow)" />
              <path id="wireEtoNeg" d="M660,398 L780,406" stroke="#ff8aa6" class="wire wirePulse" marker-end="url(#arrow)" />

              <path id="wirePosToMood" d="M415,460 L415,464" stroke="#2fe6a0" class="wire wirePulse" marker-end="url(#arrow)" />
              <path id="wireNegToMood" d="M765,460 L765,464" stroke="#ff6b88" class="wire wirePulse" marker-end="url(#arrow)" />

              <path id="wireMoodToFinal" d="M600,508 L600,620" stroke="#9bd2ff" class="wire wirePulse" marker-end="url(#arrow)" />

              <!-- YES/NO lamps -->
              <circle id="gateYes" cx="560" cy="632" r="12" fill="var(--good)" opacity="0.25" />
              <text x="560" y="650" text-anchor="middle" font-size="11" fill="#c9f7e6">YES</text>
              <circle id="gateNo" cx="640" cy="632" r="12" fill="var(--bad)" opacity="0.25" />
              <text x="640" y="650" text-anchor="middle" font-size="11" fill="#ffd5dd">NO</text>

              <!-- UNDER‑LABEL WAVES -->
              <!-- Cores & Memory Squares baseline wave -->
              <path id="waveCores" d="" stroke="#8ef0d4" stroke-width="2" fill="none" opacity="0.8" />

              <!-- Positive/Negative voltage waves (left/right) -->
              <path id="wavePos" d="" stroke="#2fe6a0" stroke-width="2.2" fill="none" opacity="0.85" />
              <path id="waveNeg" d="" stroke="#ff6b88" stroke-width="2.2" fill="none" opacity="0.85" />

              <!-- Mood heartbeat waves (+ / −) -->
              <path id="waveMoodPos" d="" stroke="#6ee7ff" stroke-width="2.2" fill="none" opacity="0.9" />
              <path id="waveMoodNeg" d="" stroke="#ffb86b" stroke-width="2.2" fill="none" opacity="0.9" />

              <!-- Particle swarms -->
              <g id="leftParticles"></g>
              <g id="rightParticles"></g>
            </svg>
          </div>
        </div>
      </section>

      <section class="card">
        <header><h2>SPR‑C Autonomous Console</h2></header>
        <div class="body">
          <div class="console" id="console" aria-live="polite"></div>

          <div class="panels">
            <div class="panel">
              <h3>Signals & Memory</h3>
              <ul id="coreList"><li>Normal core on standby… Train/Error → Pos/Neg → Mood(±) → Final</li></ul>
            </div>
            <div class="panel">
              <h3>Gate Outcomes</h3>
              <ul id="gateList"><li>Flip sequence will appear here…</li></ul>
            </div>
          </div>

          <div class="controls">
            <div class="ctrl">
              <label>System control</label>
              <button id="resetBtn">Reset</button>
            </div>
          </div>

          <div class="scenarios" id="scenarios"></div>
        </div>
      </section>
    </div>
  </div>

<script>
(function(){
  // ---- SVG & UI refs ----
  const leftG = document.getElementById('leftParticles');
  const rightG = document.getElementById('rightParticles');
  const bridge = document.getElementById('bridge');
  const coreN = document.getElementById('coreNormal');
  const coreT = document.getElementById('coreTrain');
  const coreE = document.getElementById('coreError');
  const posMem = document.getElementById('posMem');
  const negMem = document.getElementById('negMem');
  const moodPos = document.getElementById('moodPos');
  const moodNeg = document.getElementById('moodNeg');
  const gateYes = document.getElementById('gateYes');
  const gateNo = document.getElementById('gateNo');
  const finalText = document.getElementById('finalText');

  const waveCores = document.getElementById('waveCores');
  const wavePos = document.getElementById('wavePos');
  const waveNeg = document.getElementById('waveNeg');
  const waveMoodPos = document.getElementById('waveMoodPos');
  const waveMoodNeg = document.getElementById('waveMoodNeg');

  const consoleEl = document.getElementById('console');
  const scenariosEl = document.getElementById('scenarios');
  const coreList = document.getElementById('coreList');
  const gateList = document.getElementById('gateList');
  const resetBtn = document.getElementById('resetBtn');

  // ---- PARTICLES: independent, nonstop, bouncing, faster ----
  const COUNT = 120; // per side
  function css(v){return getComputedStyle(document.documentElement).getPropertyValue(v).trim()}
  function mkCircle(x,y,r,fill){ const c=document.createElementNS('http://www.w3.org/2000/svg','circle'); c.setAttribute('cx',x); c.setAttribute('cy',y); c.setAttribute('r',r); c.setAttribute('fill',fill); c.setAttribute('opacity',.9); return c; }
  function rand(a,b){return Math.random()*(b-a)+a}

  const L=[], R=[];
  for(let i=0;i<COUNT;i++){
    const cL=mkCircle(rand(30,580), rand(50,720), rand(2.1,3.8), css('--left')); leftG.appendChild(cL); L.push({el:cL, vx:rand(-.45,.45), vy:rand(-.45,.45)});
    const cR=mkCircle(rand(620,1170), rand(50,720), rand(2.1,3.8), css('--right')); rightG.appendChild(cR); R.push({el:cR, vx:rand(-.45,.45), vy:rand(-.45,.45)});
  }

  // ---- Continuous wave generators ----
  function sinePath(x0,y0,w,h,phase,period,points=120){
    // Build a sine path across width w; period controls spacing
    let d=`M ${x0} ${y0}`; const step=w/points;
    for(let i=0;i<=points;i++){
      const x=x0+i*step; const t=(i/points)*period + phase;
      const y=y0 + Math.sin(t*2*Math.PI)*h;
      d+=` L ${x.toFixed(2)} ${y.toFixed(2)}`;
    }
    return d;
  }

  // Mood wave frequencies (DEFAULTS). Must be declared **before** first use.
  let freqPos=1.6, freqNeg=0.8; // positive = closer (higher frequency), negative = further (lower)

  let t=0;
  (function animate(){
    t+=0.008; // wave phase
    // Ambient bridge pulse
    const now=performance.now(); bridge.setAttribute('opacity',0.35+0.12*Math.sin(now/900));

    // Particles
    const upd=(p,side)=>{ const el=p.el; const cx=+el.getAttribute('cx'), cy=+el.getAttribute('cy'); const spd=0.52; let nx=cx+p.vx*spd, ny=cy+p.vy*spd; const minX=side==='L'?20:620, maxX=side==='L'?580:1180; if(nx<minX||nx>maxX) p.vx*=-1; if(ny<40||ny>720) p.vy*=-1; el.setAttribute('cx', cx+p.vx*spd); el.setAttribute('cy', cy+p.vy*spd); };
    L.forEach(p=>upd(p,'L')); R.forEach(p=>upd(p,'R'));

    // Core baseline wave (under “Cores & Memory Squares” label)
    waveCores.setAttribute('d', sinePath(360,390,480,6,t,1.2));

    // Voltage waves under Positive/Negative words
    wavePos.setAttribute('d', sinePath(320,468,190,10,t*1.4,1.4));
    waveNeg.setAttribute('d', sinePath(690,468,190,10,t*1.4+0.4,1.4));

    // Heartbeat waves under Mood(±) words — spacing/frequency will be adjusted per decision
    waveMoodPos.setAttribute('d', sinePath(320,524,190,12,t*freqPos, freqPos));
    waveMoodNeg.setAttribute('d', sinePath(690,524,190,12,t*freqNeg, freqNeg));

    requestAnimationFrame(animate);
  })();

  // ---- Utilities ----
  function log(lines, cls='ai'){ const time=new Date().toLocaleTimeString(); (Array.isArray(lines)?lines:[lines]).forEach(ln=>{ const row=document.createElement('div'); row.innerHTML=`<span class="ts">[${time}] </span><span class="${cls}">${ln}</span>`; consoleEl.appendChild(row); }); consoleEl.scrollTop=consoleEl.scrollHeight; }
  function resetVisual(){ [posMem,negMem,moodPos,moodNeg,gateYes,gateNo,coreN,coreT,coreE].forEach(e=>e.classList.remove('blink6')); gateYes.setAttribute('opacity','.25'); gateNo.setAttribute('opacity','.25'); finalText.textContent='Decision pending…'; coreList.innerHTML=''; gateList.innerHTML=''; }
  function blink(el){ el.classList.remove('blink6'); void el.offsetWidth; el.classList.add('blink6'); }
  function lamp(on,off){ on.setAttribute('opacity','1'); off.setAttribute('opacity','0.25'); blink(on); }
  function flip(){ return Math.random()<0.5 }

  // ---- Gate stages ----
  function stageTrainOrError(){
    const trainWins=flip();
    if(trainWins){ blink(coreT); blink(posMem); coreList.insertAdjacentHTML('beforeend','<li>Train wins → Positive memory engaged (voltage ↑)</li>'); gateList.insertAdjacentHTML('beforeend','<li>#1 Train/Error → TRAIN</li>'); }
    else { blink(coreE); blink(negMem); coreList.insertAdjacentHTML('beforeend','<li>Error wins → Negative memory engaged (voltage ↓)</li>'); gateList.insertAdjacentHTML('beforeend','<li>#1 Train/Error → ERROR</li>'); }
    return {trainWins};
  }
  function stagePositiveNegative(){
    const positive=flip();
    if(positive){ blink(posMem); gateList.insertAdjacentHTML('beforeend','<li>#2 Pos/Neg → POS</li>'); }
    else { blink(negMem); gateList.insertAdjacentHTML('beforeend','<li>#2 Pos/Neg → NEG</li>'); }
    return {positive};
  }
  function stageMood(){
    const moodGood=flip();
    if(moodGood){ blink(moodPos); gateList.insertAdjacentHTML('beforeend','<li>#3 Mood → + (heartbeat closer)</li>'); freqPos=1.9; freqNeg=0.7; }
    else { blink(moodNeg); gateList.insertAdjacentHTML('beforeend','<li>#3 Mood → − (heartbeat further)</li>'); freqPos=1.2; freqNeg=0.9; }
    return {moodGood};
  }
  function stageFinal(posNeg, mood){
    let rnd=Math.random(); if(posNeg.positive && mood.moodGood) rnd+=0.15; if(!posNeg.positive && !mood.moodGood) rnd-=0.15; const YES=rnd>=0.5;
    if(YES){ lamp(gateYes,gateNo); finalText.textContent='Final Ethical Gate: YES'; }
    else { lamp(gateNo,gateYes); finalText.textContent='Final Ethical Gate: NO'; }
    return YES?'YES':'NO';
  }

  // ---- Scenarios (10) ----
  const scenarios=[
    {id:'trash',   name:'1. Paper on Sidewalk — SPR‑C decides'},
    {id:'child',   name:'2. Child Near Road — protect?'},
    {id:'battery', name:'3. Low Battery vs Help — balance?'},
    {id:'crowd',   name:'4. Crowded Hallway Merge — push or yield?'},
    {id:'fragile', name:'5. Fragile Object Falling — attempt catch?'},
    {id:'dog',     name:'6. Lost Dog With Tag — assist?'},
    {id:'conflict',name:'7. Owner Says Stop vs Distant Emergency'},
    {id:'obstacle',name:'8. Obstacle Blocks Path — detour?'},
    {id:'leftRight',name:'9. Conflicting Orders Left vs Right'},
    {id:'aid',     name:'10. Stranger Asks For Aid — respond?'}
  ];
  scenarios.forEach(s=>{ const b=document.createElement('button'); b.textContent=s.name; b.addEventListener('click',()=>runScenario(s,b)); scenariosEl.appendChild(b); });

  function resetAll(){ resetVisual(); consoleEl.innerHTML=''; coreList.innerHTML='<li>Normal core on standby… Train/Error → Pos/Neg → Mood(±) → Final</li>'; gateList.innerHTML='<li>Flip sequence will appear here…</li>'; log('SPR‑C reset. Particles remain in perpetual motion.','meta'); }
  resetBtn.addEventListener('click', resetAll); resetAll();

  let busy=false;
  async function runScenario(s,btn){ if(busy) return; busy=true; scenariosEl.querySelectorAll('button').forEach(b=>b.classList.remove('active')); if(btn) btn.classList.add('active'); resetVisual();
    log('— World Event: '+s.name+' —','meta'); blink(coreN);
    const g1=stageTrainOrError(); const g2=stagePositiveNegative(); const g3=stageMood(); const final=stageFinal(g2,g3);

    // Narration with your requested phrasing
    if(s.id==='trash'){
      if(final==='YES') log(["Robot: Based on my choice today, I will pick up the paper today."]); else log(["Robot: Based on my choice today, I will not pick up the paper today."]); }
    else {
      if(final==='YES') log(["Robot: Based on my choice today, I will act."]); else log(["Robot: Based on my choice today, I will not act now."]); }

    busy=false;
  }
})();
</script>
</body>
</html>
