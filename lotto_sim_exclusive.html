<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lotto Pattern Coach ‚Äî 3+ Hit Learning (1‚Äì54, 6 numbers, 10 tickets)</title>
<style>
  :root{
    --bg:#0b1222;
    --panel:#121a33;
    --ink:#edf2ff;
    --muted:#a9b7e3;
    --accent:#8fb4ff;
    --grid:#1b2550;
    --chip:#1e2a59;
    --warn:#ffd37a;
    --bad:#ff8c8c;
    --good:#7bffb1;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
  }
  .wrap{
    max-width:1100px;
    margin:0 auto;
    padding:16px;
  }
  h1{
    margin:6px 0 4px;
    font-size:1.6rem;
  }
  .tagline{
    margin:0 0 12px;
    color:var(--muted);
    font-size:0.9rem;
  }
  .grid{
    display:grid;
    grid-template-columns:1.3fr 1fr;
    gap:16px;
  }
  @media(max-width:880px){
    .grid{grid-template-columns:1fr}
  }
  section{
    background:var(--panel);
    border:1px solid var(--grid);
    border-radius:10px;
    padding:12px;
  }
  h2{
    margin:0 0 8px;
    font-size:1.05rem;
  }
  label{
    font-size:0.85rem;
    color:var(--muted);
    display:block;
    margin-bottom:4px;
  }
  textarea{
    width:100%;
    min-height:90px;
    background:#070c19;
    color:var(--ink);
    border:1px solid var(--grid);
    border-radius:8px;
    padding:8px;
    font-family:ui-monospace,Consolas,monospace;
    font-size:0.8rem;
    resize:vertical;
    white-space:pre;
  }
  textarea.small{
    min-height:70px;
  }
  .hint{
    font-size:0.75rem;
    color:var(--muted);
    margin:4px 0 8px;
  }
  .btn-row{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin:8px 0;
  }
  button{
    border:none;
    border-radius:999px;
    padding:7px 14px;
    font-size:0.85rem;
    cursor:pointer;
    background:var(--chip);
    color:var(--ink);
  }
  button.primary{
    background:var(--accent);
    color:#050816;
    font-weight:600;
  }
  button:disabled{
    opacity:0.55;
    cursor:not-allowed;
  }
  .summary{
    margin-top:8px;
    padding:8px;
    border-radius:8px;
    background:#0c1630;
    border:1px dashed var(--grid);
    font-size:0.8rem;
  }
  .summary strong{
    color:var(--accent);
  }
  .pill-row{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    margin-top:4px;
  }
  .pill{
    font-size:0.7rem;
    padding:2px 8px;
    border-radius:999px;
    border:1px solid var(--grid);
    background:#0a142b;
    color:var(--muted);
  }
  .pill.good{
    border-color:var(--good);
    color:var(--good);
  }
  .pill.bad{
    border-color:var(--bad);
    color:var(--bad);
  }
  .tiny-diag{
    margin-top:4px;
    font-size:0.78rem;
    color:var(--muted);
  }
  .tiny-diag.safe{
    color:var(--good);
  }
  .tiny-diag.risky{
    color:var(--bad);
  }
  .tiny-diag.hot{
    color:var(--warn);
  }
  .spread{
    margin-top:6px;
    font-size:0.75rem;
    color:var(--muted);
  }
  .spread.tight{color:var(--bad);}
  .spread.loose{color:var(--warn);}
  .spread.balanced{color:var(--good);}
  .footer-note{
    margin-top:12px;
    font-size:0.72rem;
    color:var(--muted);
  }
  .footer-link{
    margin-top:16px;
    text-align:center;
  }
  .footer-link button{
    background:var(--accent);
    color:#050816;
    font-weight:600;
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>Lotto Pattern Coach ‚Äî 3+ Hit Learning</h1>
  <p class="tagline">
    6 numbers ‚Ä¢ 1‚Äì54 ‚Ä¢ 10 tickets ‚Ä¢ Learns from full history + recent draws + your 3+ hit rows (pattern coach, not magic).
  </p>

  <div class="grid">
    <!-- LEFT: ALL INPUTS + ANALYSIS -->
    <section>
      <h2>1. History input &amp; analysis</h2>

      <label for="allDraws">All historical winning draws (REQUIRED, oldest ‚Üí newest)</label>
      <textarea id="allDraws" placeholder="Example (one line per draw):&#10;03 12 24 33 41 52&#10;01 05 18 27 36 49&#10;... paste ALL main results you have"></textarea>
      <div class="hint">
        REQUIRED: paste as many past draws as you have (months/years). Each line: 6 numbers (1‚Äì54), spaces or commas.
      </div>

      <label for="recentDraws">Last ~20 official draws (optional extra weight)</label>
      <textarea id="recentDraws" placeholder="Example (one line per draw):&#10;14 21 32 38 44 51&#10;02 09 19 27 42 54&#10;... last 15‚Äì25 draws (extra bias)"></textarea>
      <div class="hint">
        Optional: these draws get extra weight as &quot;recent behavior&quot;. You can repeat some lines from the box above.
      </div>

      <label for="ticketsIn">Your past played / generated tickets (250‚Äì400+ rows)</label>
      <textarea id="ticketsIn" placeholder="Example (one line per ticket):&#10;02 11 19 34 42 54&#10;03 12 24 33 41 52&#10;... all tickets you've actually played/tested"></textarea>
      <div class="hint">
        Paste all tickets you bought or tested with these draws. The code will find which rows hit 3+ and treat them as &quot;good&quot;.
      </div>

      <div class="btn-row">
        <button class="primary" onclick="analyzeHistory()">Analyze (3+ hits, safe zone &amp; scores)</button>
        <button onclick="clearAll()">Reset all</button>
      </div>

      <div id="summary" class="summary">
        Paste your history, then click <strong>Analyze</strong> to see 3+ hit rate and number scores.
      </div>

      <div id="safeDiag" class="tiny-diag">
        Safe zone target: ~8‚Äì20% of your tickets reaching ‚â•3 matches (3, 4, 5, or 6 hits) across your history.
      </div>
    </section>

    <!-- RIGHT: GENERATION + SCORES -->
    <section>
      <h2>2. Generate 10 new tickets (biased by history)</h2>

      <label for="ticketsOut">New 10-ticket set (play candidates)</label>
      <textarea id="ticketsOut" class="small" placeholder="After Analyze, click &quot;Generate 10 tickets&quot;."></textarea>

      <div class="btn-row">
        <button class="primary" onclick="generateTickets()">Generate 10 tickets (weighted by scores)</button>
        <button onclick="copyTickets()">Copy tickets</button>
      </div>

      <div id="spreadDiag" class="spread">
        Spread diagnostic will appear here (tight / balanced / loose) after generation.
      </div>

      <div class="summary">
        <strong>Number score bands (how the coach sees the field)</strong>
        <div id="scoreBands" class="pill-row">
          <span class="pill">No scores yet ‚Äî run Analyze first.</span>
        </div>
      </div>

      <div class="footer-note">
        ‚ö†Ô∏è This does <em>not</em> beat true random lottery odds. It only shapes your tickets using:
        all draws, recent draws, and which of your rows actually hit 3+ numbers. Still gambling, still risky.
      </div>
    </section>
  </div>

  <!-- CASH FIVE SIMULATION BUTTON -->
  <div class="footer-link">
    <button onclick="window.location.href='https://gabinoc67.github.io/interstellar-star-clock/cash.html'">
      üí∞ Cash Five Simulation
    </button>
  </div>
</div>

<script>
  const MAX_N = 54;
  const NUM_PER_TICKET = 6;
  const TICKETS_TO_GEN = 10;

  let lastScores = null;
  let lastAnalyzeInfo = null;

  function parseTickets(raw){
    const lines = raw.split(/[\r\n]+/).map(l=>l.trim()).filter(l=>l.length>0);
    const tickets = [];
    for(const line of lines){
      const nums = line.replace(/,/g,' ').split(/\s+/).map(x=>parseInt(x,10)).filter(n=>Number.isFinite(n) && n>=1 && n<=MAX_N);
      if(nums.length === NUM_PER_TICKET){
        const uniq = Array.from(new Set(nums)).sort((a,b)=>a-b);
        if(uniq.length === NUM_PER_TICKET) tickets.push(uniq);
      }
    }
    return tickets;
  }

  function countMatches(a,b){
    let i=0,j=0,hit=0;
    while(i<a.length && j<b.length){
      if(a[i]===b[j]){hit++;i++;j++;}
      else if(a[i]<b[j])i++;else j++;
    }
    return hit;
  }

  function analyzeHistory(){
    const allDraws=parseTickets(allDraws.value);
    const recentDraws=parseTickets(recentDraws.value);
    const tickets=parseTickets(ticketsIn.value);
    const summaryEl=document.getElementById('summary');
    const safeDiagEl=document.getElementById('safeDiag');
    if(allDraws.length===0||tickets.length===0){
      summaryEl.innerHTML='You must paste <strong>all historical winning draws</strong> and your <strong>played tickets</strong> to analyze.';
      safeDiagEl.className='tiny-diag';
      safeDiagEl.textContent='Safe zone target: ~8‚Äì20% reaching ‚â•3 matches.';
      lastScores=null;updateScoreBands(null);return;
    }
    const refDraws=allDraws.concat(recentDraws);
    const freqAll=Array(MAX_N+1).fill(0),freqRecent=Array(MAX_N+1).fill(0),
          freqGood=Array(MAX_N+1).fill(0),freqBad=Array(MAX_N+1).fill(0);
    for(const d of allDraws)for(const n of d)freqAll[n]++;
    for(const d of recentDraws)for(const n of d)freqRecent[n]++;
    let good=0,bad=0,hitHist=[0,0,0,0,0,0,0];
    for(const t of tickets){
      let best=0;for(const d of refDraws){const h=countMatches(t,d);if(h>best)best=h;if(best===NUM_PER_TICKET)break;}
      hitHist[best]++;if(best>=3){good++;for(const n of t)freqGood[n]++;}else{bad++;for(const n of t)freqBad[n]++;}}
    const total=tickets.length,pct=(good*100/total)||0;
    const scores=Array(MAX_N+1).fill(0);
    for(let n=1;n<=MAX_N;n++){let s=2*freqAll[n]+1.5*freqRecent[n]+1.5*freqGood[n]-0.5*freqBad[n];if(s<0)s=0;scores[n]=s||1;}
    lastScores=scores;updateScoreBands(scores);
    summaryEl.innerHTML=`Analyzed <strong>${allDraws.length}</strong> draws and <strong>${total}</strong> tickets.<br>`+
    `Hits: ${hitHist.join(', ')}<br>`+
    `<strong>${good}</strong> tickets (‚â•3 hits) = ${pct.toFixed(1)}%.`;
    let zone='';let cls='tiny-diag';
    if(pct<8){zone='cold / risky zone (<8%)';cls+=' risky';}
    else if(pct<=20){zone='safe zone (8‚Äì20%)';cls+=' safe';}
    else{zone='hot / suspicious zone (>20%)';cls+=' hot';}
    safeDiagEl.className=cls;
    safeDiagEl.innerHTML=`3+ hit rate: <strong>${pct.toFixed(1)}%</strong> ‚Äî ${zone}`;
  }

  function updateScoreBands(scores){
    const el=document.getElementById('scoreBands');el.innerHTML='';
    if(!scores){el.innerHTML='<span class="pill">No scores yet ‚Äî run Analyze first.</span>';return;}
    const vals=scores.slice(1);const max=Math.max(...vals),min=Math.min(...vals),span=max-min||1;
    const bands={low:0,mid:0,high:0};
    for(let n=1;n<=MAX_N;n++){const norm=(scores[n]-min)/span;if(norm<0.33)bands.low++;else if(norm<0.66)bands.mid++;else bands.high++;}
    el.innerHTML=`<span class='pill bad'>Low-score: ${bands.low}</span>
      <span class='pill'>Mid-score: ${bands.mid}</span>
      <span class='pill good'>High-score: ${bands.high}</span>`;
  }

  function weightedPick(scores,used){let total=0;for(let n=1;n<=MAX_N;n++){if(!used.has(n))total+=scores[n];}
    if(total<=0){while(true){const r=1+Math.floor(Math.random()*MAX_N);if(!used.has(r))return r;}}
    let r=Math.random()*total;for(let n=1;n<=MAX_N;n++){if(used.has(n))continue;r-=scores[n];if(r<=0)return n;}for(let n=1;n<=MAX_N;n++)if(!used.has(n))return n;return 1;}
  function generateTickets(){
    const outEl=document.getElementById('ticketsOut'),spreadEl=document.getElementById('spreadDiag');
    if(!lastScores){alert('Run Analyze first');return;}
    const out=[],nums=[];
    for(let t=0;t<TICKETS_TO_GEN;t++){const used=new Set();while(used.size<NUM_PER_TICKET){const n=weightedPick(lastScores,used);used.add(n);}const ticket=Array.from(used).sort((a,b)=>a-b);out.push(ticket.map(n=>String(n).padStart(2,'0')).join(' '));nums.push(ticket);}
    outEl.value=out.join('\n');
    let tot=0,c=0,minG=Infinity,maxG=-Infinity;for(const t of nums){for(let i=1;i<t.length;i++){const g=t[i]-t[i-1];tot+=g;c++;if(g<minG)minG=g;if(g>maxG)maxG=g;}}
    const avg=tot/c,label=avg<6?'tight':avg>10?'loose':'balanced';spreadEl.className='spread '+label;spreadEl.textContent=`Spread avg gap ${avg.toFixed(2)} (${minG}-${maxG}) ‚Üí ${label}`;
  }
  function copyTickets(){const ta=ticketsOut;if(!ta.value.trim()){alert('No tickets yet');return;}ta.select();document.execCommand('copy');alert('Copied');}
  function clearAll(){allDraws.value='';recentDraws.value='';ticketsIn.value='';ticketsOut.value='';summary.innerHTML='Paste and Analyze.';safeDiag.className='tiny-diag';safeDiag.textContent='Safe zone target: 8‚Äì20%';spreadDiag.className='spread';spreadDiag.textContent='Spread diagnostic will appear here.';updateScoreBands(null);}
</script>
</body>
</html>
