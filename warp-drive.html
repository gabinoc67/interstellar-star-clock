<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Warp Drive Simulator</title>
  <style>
    body {
      background-color: black;
      color: #00ffcc;
      font-family: 'Courier New', monospace;
      padding: 40px;
      text-align: center;
    }
    h1 {
      color: #ffd700;
    }
    select, input, button {
      margin: 10px;
      font-size: 1em;
      padding: 5px 10px;
    }
    #countdown {
      font-size: 2em;
      margin-top: 20px;
      color: #ff6666;
    }
  </style>
</head>
<body>

  <h1>ðŸš€ Warp Drive Simulator</h1>

  <label for="planet">Select Planet:</label>
  <select id="planet">
    <option value="Mercury" data-angle="12.1" data-distance="48000000">Mercury</option>
    <option value="Venus" data-angle="37.5" data-distance="25000000">Venus</option>
    <option value="Mars" data-angle="84.3" data-distance="140000000">Mars</option>
    <option value="Neptune" data-angle="172.7" data-distance="2700000000">Neptune</option>
  </select>

  <label for="warp">Warp Factor (1â€“10):</label>
  <input type="number" id="warp" min="1" max="10" step="1" value="1">

  <button onclick="startWarp()">Engage</button>

  <div id="countdown"></div>

  <audio id="warpSound" src="https://www.soundjay.com/mechanical/sounds/mechanical-whirring-01.mp3"></audio>

  <script>
    function startWarp() {
      const planetEl = document.getElementById("planet");
      const planet = planetEl.value;
      const angle = planetEl.selectedOptions[0].getAttribute("data-angle");
      const distance = parseFloat(planetEl.selectedOptions[0].getAttribute("data-distance"));
      const warp = parseInt(document.getElementById("warp").value);
      const countdownEl = document.getElementById("countdown");

      let count = 5;
      countdownEl.innerText = "Warp in " + count + "...";

      const countdownInterval = setInterval(() => {
        count--;
        if (count > 0) {
          countdownEl.innerText = "Warp in " + count + "...";
        } else {
          clearInterval(countdownInterval);
          document.getElementById("warpSound").play();
          countdownEl.innerText = "Engaged...";
          setTimeout(() => {
            simulateWarp(planet, angle, distance, warp);
          }, 1000);
        }
      }, 1000);
    }

    function simulateWarp(planet, angle, distance, warpFactor) {
      const lightSpeed = 186282; // miles/sec
      const warpSpeed = warpFactor * lightSpeed;
      const travelSeconds = distance / warpSpeed;

      const now = new Date();
      const departure = new Date(now);
      const arrival = new Date(now.getTime() + travelSeconds * 1000);

      const y2k = new Date("2000-01-01T00:00:00Z").getTime();
      const stardate = 40000 + ((arrival.getTime() - y2k) / (1000 * 60 * 60 * 24 * 365.25)) * 1000;

      const interStart = Math.floor((departure.getTime() - y2k) / 1000);
      const interEnd = Math.floor((arrival.getTime() - y2k) / 1000);
      const interDiff = (interEnd - interStart).toFixed(1);

      const cstOffset = -6 * 60 * 60 * 1000;
      const departureCST = new Date(departure.getTime() + departure.getTimezoneOffset() * 60000 + cstOffset);
      const arrivalCST = new Date(arrival.getTime() + arrival.getTimezoneOffset() * 60000 + cstOffset);

      const url = new URL("warp-ticket.html", window.location.href);
      url.searchParams.set("planet", planet);
      url.searchParams.set("warp", warpFactor);
      url.searchParams.set("angle", angle);
      url.searchParams.set("distance", distance);
      url.searchParams.set("duration", travelSeconds.toFixed(2));
      url.searchParams.set("stardate", stardate.toFixed(1));
      url.searchParams.set("interdiff", interDiff);
      url.searchParams.set("departure", departureCST.toLocaleTimeString());
      url.searchParams.set("arrival", arrivalCST.toLocaleTimeString());

      window.location.href = url.toString();
    }
  </script>

</body>
</html>
