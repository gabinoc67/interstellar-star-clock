<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cosmic Clock â€” Zodiac Fixed + Day Numbers</title>
  <style>
    body { background:#0a0f1f; color:#fff; font-family:Arial; margin:0; display:flex; justify-content:center; align-items:center; height:100vh; }
    #container { display:flex; align-items:center; }
    #infoPanel {
      width: 240px;
      text-align:left;
      margin-right:20px;
      font-size: 14px;
      line-height:1.6em;
    }
    #infoPanel h1 { color:gold; font-size:20px; margin-bottom:10px; }
    label, input, button { margin: 5px 0; font-size: 0.9em; }
    input[type="date"] { font-size:1.1em; padding:4px; width: 95%; }
    button {
      background: #2563eb; color: white; border: none; padding: 6px 12px;
      border-radius: 6px; cursor: pointer; margin-top:5px;
    }
    button:hover { background: #1d4ed8; }
    canvas { background:#111; border:2px solid #333; }
  </style>
</head>
<body>
  <div id="container">
    <div id="infoPanel">
      <h1>ðŸŒŒ Cosmic Clock</h1>
      <label for="dateInput">Birthday:</label><br>
      <input type="date" id="dateInput"><br>
      <button onclick="startClock()">Start</button>
      <button onclick="resetClock()">Reset</button>
      <div id="output">Enter a date to see cosmic alignment.</div>
    </div>
    <canvas id="cosmicClock" width="900" height="900"></canvas>
  </div>

  <script>
    const canvas = document.getElementById("cosmicClock");
    const ctx = canvas.getContext("2d");

    const cx = canvas.width/2, cy = canvas.height/2, zodiacR = 240; // 10% bigger
    const zeroEpoch = new Date(-3110, 7, 11);
    const yearLength = 365;

    const cycles = {
      Sun: yearLength,
      Moon: 29.5306,
      Mercury: 116,
      Venus: 584,
      Mars: 780,
      Jupiter: 399,
      Saturn: 378
    };

    let hands = [
      {label:"Sun", cycle:"Sun", angle:0, target:0, color:"gold", r:zodiacR-60},
      {label:"Moon", cycle:"Moon", angle:0, target:0, color:"silver", r:zodiacR-80},
      {label:"Mercury", cycle:"Mercury", angle:0, target:0, color:"orange", r:zodiacR-100},
      {label:"Venus", cycle:"Venus", angle:0, target:0, color:"violet", r:zodiacR-120},
      {label:"Mars", cycle:"Mars", angle:0, target:0, color:"red", r:zodiacR-140},
      {label:"Jupiter", cycle:"Jupiter", angle:0, target:0, color:"cyan", r:zodiacR-160},
      {label:"Saturn", cycle:"Saturn", angle:0, target:0, color:"lightgreen", r:zodiacR-180}
    ];

    let birthdayDial = {angle:null, target:null};
    let animating = false;

    function toCosmicDate(date) {
      let corrected = new Date(date);
      corrected.setDate(corrected.getDate() - 12);
      return corrected;
    }

    function startClock() {
      let input = document.getElementById("dateInput").value;
      if (!input) return;
      let gDate = new Date(input);
      let cosmic = toCosmicDate(gDate);

      document.getElementById("output").innerHTML =
        "Cosmic Date: " + cosmic.toDateString();

      setTargets(cosmic);
      animating = true;
      animate();
    }

    function resetClock() {
      hands.forEach(h => { h.angle = 0; h.target = 0; });
      birthdayDial.angle = null;
      birthdayDial.target = null;
      animating = false;
      document.getElementById("dateInput").value = "";
      document.getElementById("output").innerHTML = "Enter a date to see cosmic alignment.";
      draw();
    }

    function setTargets(cosmicDate) {
      let daysSinceZero = Math.floor((cosmicDate - zeroEpoch) / 86400000);

      hands.forEach(h => {
        h.target = ((daysSinceZero % cycles[h.cycle]) / cycles[h.cycle]) * 2 * Math.PI;
      });

      birthdayDial.target = ((daysSinceZero % yearLength) / yearLength) * 2 * Math.PI;
      birthdayDial.angle = birthdayDial.target;
    }

    function drawZodiacDial() {
      ctx.beginPath();
      ctx.arc(cx, cy, zodiacR, 0, Math.PI*2);
      ctx.strokeStyle="#aaa"; ctx.lineWidth=3; ctx.stroke();

      const zodiacs = [
        {name:"Aries", month:4, start:0},
        {name:"Taurus", month:5, start:30},
        {name:"Gemini", month:6, start:60},
        {name:"Cancer", month:7, start:90},
        {name:"Leo", month:8, start:120},
        {name:"Virgo", month:9, start:150},
        {name:"Libra", month:10, start:180},
        {name:"Scorpio", month:11, start:210},
        {name:"Sagittarius", month:12, start:240},
        {name:"Capricorn", month:1, start:270},
        {name:"Aquarius", month:2, start:300},
        {name:"Pisces", month:3, start:330}
      ];

      zodiacs.forEach(z => {
        let angle=(z.start)*Math.PI/180 - Math.PI/2;
        let tx=cx+(zodiacR+40)*Math.cos(angle);
        let ty=cy+(zodiacR+40)*Math.sin(angle);
        ctx.fillStyle="lightblue"; ctx.font="16px Arial"; 
        ctx.textAlign="center"; ctx.textBaseline="middle";
        ctx.fillText(z.name, tx, ty);

        // Month number in center
        let midAngle=(z.start+15)*Math.PI/180 - Math.PI/2;
        let mx=cx+(zodiacR-30)*Math.cos(midAngle);
        let my=cy+(zodiacR-30)*Math.sin(midAngle);
        ctx.fillStyle="yellow"; ctx.font="14px Arial bold";
        ctx.fillText(z.month, mx, my);

        // Day numbers 1â€“30 inside each zodiac
        for (let d=1; d<=30; d++) {
          let dayAngle=(z.start+(d-1))*Math.PI/180 - Math.PI/2;
          let dx=cx+(zodiacR-60)*Math.cos(dayAngle);
          let dy=cy+(zodiacR-60)*Math.sin(dayAngle);
          if (d % 5 === 0 || d === 1 || d === 30) { // show some to avoid clutter
            ctx.fillStyle="#bbb"; ctx.font="10px Arial";
            ctx.fillText(d, dx, dy);
          }
        }
      });

      // 5 epagomenal days
      for (let e=1; e<=5; e++) {
        let angle = ((360 + (e*(360/yearLength))) * Math.PI/180) - Math.PI/2;
        let tx=cx+(zodiacR-70)*Math.cos(angle);
        let ty=cy+(zodiacR-70)*Math.sin(angle);
        ctx.fillStyle="red"; ctx.font="12px Arial";
        ctx.fillText("E"+e, tx, ty);
      }
    }

    function drawHands() {
      hands.forEach(h=>{
        ctx.beginPath();
        ctx.arc(cx, cy, h.r, 0, Math.PI*2);
        ctx.strokeStyle="#333"; ctx.stroke();

        let dx=cx+h.r*Math.cos(h.angle - Math.PI/2);
        let dy=cy+h.r*Math.sin(h.angle - Math.PI/2);
        ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(dx,dy);
        ctx.strokeStyle=h.color; ctx.lineWidth=2; ctx.stroke();

        ctx.beginPath(); ctx.arc(dx,dy,6,0,Math.PI*2);
        ctx.fillStyle=h.color; ctx.fill();

        ctx.fillStyle=h.color; ctx.font="12px Arial"; 
        ctx.textAlign="left"; ctx.fillText(h.label, dx+15, dy);
      });
    }

    function drawBirthdayDial() {
      if (birthdayDial.angle === null) return;
      let dx=cx+zodiacR*Math.cos(birthdayDial.angle - Math.PI/2);
      let dy=cy+zodiacR*Math.sin(birthdayDial.angle - Math.PI/2);
      ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(dx,dy);
      ctx.strokeStyle="white"; ctx.lineWidth=4; ctx.stroke();
      ctx.beginPath(); ctx.arc(dx,dy,8,0,Math.PI*2);
      ctx.fillStyle="white"; ctx.fill();
    }

    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawZodiacDial();
      drawHands();
      drawBirthdayDial();
    }

    function animate() {
      if (!animating) return;
      let stillMoving=false;
      hands.forEach(h=>{
        let diff=h.target-h.angle;
        if (Math.abs(diff)>0.001){ h.angle+=diff*0.05; stillMoving=true; }
        else { h.angle=h.target; }
      });
      draw();
      if (stillMoving){ requestAnimationFrame(animate); }
      else { animating=false; }
    }

    draw();
  </script>
</body>
</html>
