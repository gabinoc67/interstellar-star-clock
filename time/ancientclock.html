<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Top Clock â€” Full Gear Layout</title>
  <style>
    body { background:#0a0f1f; color:#fff; text-align:center; font-family:Arial; }
    canvas { background:#111; margin-top:20px; border:2px solid #333; }
    h1 { color: gold; }
    label, input, button { margin: 10px; font-size: 1em; }
    button {
      background: #2563eb; color: white; border: none; padding: 6px 12px;
      border-radius: 6px; cursor: pointer;
    }
    button:hover { background: #1d4ed8; }
  </style>
</head>
<body>
  <h1>ðŸŒžðŸŒ™ Top Clock â€” Sun, Moon & Planets</h1>

  <label for="dateInput">Enter a Date:</label>
  <input type="date" id="dateInput">
  <button onclick="startClock()">Start</button>

  <div id="output">Your alignment will appear here.</div>

  <canvas id="gearClock" width="1200" height="900"></canvas>

  <script>
    const canvas = document.getElementById("gearClock");
    const ctx = canvas.getContext("2d");

    // Hidden zero epoch: 3111 BCE (approx, Aug 11, -3110 in JS Date)
    const zeroEpoch = new Date(-3110, 7, 11); 

    // Orbital cycles (days)
    const cycles = {
      Sun: 365,
      Moon: 29.53,
      Mercury: 116,
      Venus: 584,
      Mars: 780,
      Jupiter: 399,
      Saturn: 378
    };

    // Gear layout (Sun in center, planets around touching)
    let gears = [
      {x:600, y:450, r:120, label:"Sun / Year", cycle:"Sun", angle:0, color:"gold"},
      {x:600+120+80, y:450, r:80, label:"Moon / Month", cycle:"Moon", angle:0, color:"silver"},
      {x:600-(120+60), y:450, r:60, label:"Mercury", cycle:"Mercury", angle:0, color:"orange"},
      {x:600, y:450-(120+70), r:70, label:"Venus", cycle:"Venus", angle:0, color:"violet"},
      {x:600, y:450+(120+75), r:75, label:"Mars", cycle:"Mars", angle:0, color:"red"},
      {x:600+(120+90), y:450-100, r:90, label:"Jupiter", cycle:"Jupiter", angle:0, color:"cyan"},
      {x:600-(120+95), y:450+120, r:95, label:"Saturn", cycle:"Saturn", angle:0, color:"lightgreen"}
    ];

    // Convert Gregorian â†’ Cosmic (subtract 12 days)
    function toCosmicDate(date) {
      let corrected = new Date(date);
      corrected.setDate(corrected.getDate() - 12);
      return corrected;
    }

    function startClock() {
      let input = document.getElementById("dateInput").value;
      if (!input) return;
      let gDate = new Date(input);
      let cosmic = toCosmicDate(gDate);

      document.getElementById("output").innerHTML =
        "Gregorian Date: " + gDate.toDateString() +
        "<br>Cosmic Date (â€“12 days): " + cosmic.toDateString();

      alignGears(cosmic);
      draw();
    }

    function alignGears(date) {
      // Days since zero epoch
      let daysSinceZero = Math.floor((date - zeroEpoch) / 86400000);

      gears.forEach(g => {
        g.angle = ((daysSinceZero % cycles[g.cycle]) / cycles[g.cycle]) * 2 * Math.PI;
      });
    }

    function drawGear(g) {
      // Gear circle
      ctx.beginPath();
      ctx.arc(g.x, g.y, g.r, 0, Math.PI*2);
      ctx.strokeStyle = "#555";
      ctx.stroke();

      // Degree ticks
      for (let d=0; d<360; d+=10) {
        let rad = d * Math.PI/180;
        let x1 = g.x + g.r * Math.cos(rad);
        let y1 = g.y + g.r * Math.sin(rad);
        let x2 = g.x + (g.r + (d%90===0?15:7)) * Math.cos(rad);
        let y2 = g.y + (g.r + (d%90===0?15:7)) * Math.sin(rad);
        ctx.beginPath();
        ctx.moveTo(x1,y1);
        ctx.lineTo(x2,y2);
        ctx.strokeStyle = (d%90===0) ? "#aaa" : "#555";
        ctx.stroke();

        // Degree numbers at 0,90,180,270
        if (d%90===0){
          ctx.fillStyle="white";
          ctx.font="12px Arial";
          ctx.textAlign="center";
          ctx.fillText(d+"Â°", x2+15*Math.cos(rad), y2+15*Math.sin(rad));
        }
      }

      // Label
      ctx.fillStyle = "white";
      ctx.font = "14px Arial";
      ctx.textAlign = "center";
      ctx.fillText(g.label, g.x, g.y+5);

      // Dot marker
      let dx = g.x + g.r * Math.cos(g.angle);
      let dy = g.y + g.r * Math.sin(g.angle);
      ctx.beginPath();
      ctx.arc(dx,dy,6,0,Math.PI*2);
      ctx.fillStyle=g.color;
      ctx.fill();

      // Hand line
      ctx.beginPath();
      ctx.moveTo(g.x,g.y);
      ctx.lineTo(dx,dy);
      ctx.strokeStyle=g.color;
      ctx.stroke();
    }

    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      gears.forEach(g => drawGear(g));
    }

    // Start at todayâ€™s alignment
    alignGears(toCosmicDate(new Date()));
    draw();
  </script>
</body>
</html>
