<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cosmic Clock (Top + Bottom)</title>
  <style>
    body { background:#0a0f1f; color:#fff; font-family:Arial; margin:0; display:flex; flex-direction:column; align-items:center; }
    #container { display:flex; align-items:center; margin-top:20px; }
    #infoPanel {
      width: 340px; 
      text-align:left;
      margin-right:25px;
      font-size: 16px;  
      line-height:1.7em;
    }
    #infoPanel h1 { color:gold; font-size:26px; margin-bottom:14px; }
    label, input, button { margin: 8px 0; font-size: 1.05em; }
    input { width: 95%; padding:7px; font-size:1em; }
    button {
      background: #2563eb; color: white; border: none; padding: 10px 20px;
      border-radius: 6px; cursor: pointer; font-size:1.1em;
    }
    button:hover { background: #1d4ed8; }
    canvas { background:#111; border:2px solid #333; margin-top:20px; }
  </style>
</head>
<body>
  <div id="container">
    <div id="infoPanel">
      <h1>ğŸª Cosmic Clock</h1>
      <label for="dateInput">Birthday:</label><br>
      <input type="date" id="dateInput" placeholder="mm/dd/yyyy"><br>
      <button onclick="startClock()">Start</button>
      <button onclick="resetClock()">Reset</button>
      <div id="output">Enter a date to see cosmic alignment.</div>
    </div>
    <canvas id="cosmicClock" width="1250" height="1250"></canvas>
  </div>

  <!-- ğŸ”¹ Bottom Clock -->
  <canvas id="bottomClock" width="800" height="800"></canvas>
<script>
  const canvas = document.getElementById("cosmicClock");
  const ctx = canvas.getContext("2d");
  const cx = canvas.width/2, cy = canvas.height/2;

  const plateR = 280;
  const metonicR = 340;
  const zodiacR = 370;   // ğŸ”¹ New zodiac ring
  const tepeR = 420;
  const mayaR = 480;
  const decanR = 540;
  const chineseR = 600; 
  let moonR = 220;

  const zeroEpoch = new Date(-3110, 7, 11);
  const cycles = { Sun:365, Moon:29.53, Mercury:116, Venus:584, Mars:780, Jupiter:399, Saturn:378 };

  let hands = [
    {label:"Sun", cycle:"Sun", angle:0, target:0, color:"gold", r:100},
    {label:"Mercury", cycle:"Mercury", angle:0, target:0, color:"orange", r:140},
    {label:"Venus", cycle:"Venus", angle:0, target:0, color:"violet", r:160},
    {label:"Mars", cycle:"Mars", angle:0, target:0, color:"red", r:180},
    {label:"Jupiter", cycle:"Jupiter", angle:0, target:0, color:"cyan", r:200},
    {label:"Saturn", cycle:"Saturn", angle:0, target:0, color:"lightgreen", r:220}
  ];

  let moonDial = { angle:0, target:0 };
  let animating = false;

  const zodiacSigns = ["â™ˆï¸","â™‰ï¸","â™Šï¸","â™‹ï¸","â™Œï¸","â™ï¸","â™ï¸","â™ï¸","â™ï¸","â™‘ï¸","â™’ï¸","â™“ï¸"];
  const tepeSymbols = ["ğŸ¦‚","ğŸ¦Š","ğŸ¦…","ğŸ‚","ğŸ","ğŸ‡","ğŸº","ğŸŸ","ğŸ¦","ğŸ¦Œ","ğŸ¦ƒ","ğŸ¢"];
  const mayaSigns = ["ğŸŠ","ğŸŒ¬ï¸","ğŸŒŠ","ğŸ”¥","ğŸ¦…","ğŸ","ğŸŒ½","ğŸ¢","ğŸ•·ï¸","ğŸ’","ğŸ•","ğŸŒ¿","ğŸŒ","ğŸŒ‘","ğŸŒ½","ğŸ¦Œ","ğŸŒ´","ğŸ¦‚","ğŸŒ•","ğŸŸ"];

  function parseLocalDate(input) {
    const [y, m, d] = input.split("-").map(Number);
    return new Date(y, m - 1, d);
  }

  function startClock(){
    let input = document.getElementById("dateInput").value;
    if(!input) return;
    let gDate = parseLocalDate(input);
    let daysSinceZero = Math.floor((gDate - zeroEpoch)/86400000);
    let moonPhase = (daysSinceZero % cycles.Moon).toFixed(1);

    document.getElementById("output").innerHTML =
      "Cosmic Date (52-Year Cycle): " + gDate.toDateString() + "<br>" +
      "ğŸŒ™ Moon phase: " + moonPhase + " days<br>";

    setTargets(daysSinceZero);
    updateBottomClock(daysSinceZero); // ğŸ”¹ sync bottom
    animating = true;
    animate();
  }

  function resetClock(){
    hands.forEach(h=>{ h.angle=0; h.target=0; });
    moonDial.angle = 0; moonDial.target=0;
    animating=false;
    document.getElementById("dateInput").value = "";
    document.getElementById("output").innerHTML = "Enter a date to see cosmic alignment.";
    draw();
    updateBottomClock(0);
  }

  function setTargets(daysSinceZero){
    let venusPhase = ((daysSinceZero % cycles.Venus) / cycles.Venus) * 2*Math.PI;
    let venusShift = -venusPhase;
    hands.forEach(h=>{
      let rawPhase = ((daysSinceZero % cycles[h.cycle]) / cycles[h.cycle]) * 2*Math.PI;
      h.target = (rawPhase + venusShift);
    });
    let moonPhaseAngle = ((daysSinceZero % cycles.Moon) / cycles.Moon) * 2*Math.PI;
    moonDial.target = (moonPhaseAngle + venusShift);
  }

  // ğŸ”¹ Draw Zodiac
  function drawZodiac(){
    ctx.beginPath();
    ctx.arc(cx,cy,zodiacR,0,Math.PI*2);
    ctx.strokeStyle="magenta"; ctx.lineWidth=2; ctx.stroke();
    for(let i=0;i<360;i+=30){
      let angle=(i-90)*Math.PI/180;
      let tx=cx+(zodiacR+20)*Math.cos(angle);
      let ty=cy+(zodiacR+20)*Math.sin(angle);
      ctx.fillStyle="magenta"; ctx.font="20px Arial";
      ctx.textAlign="center"; ctx.textBaseline="middle";
      ctx.fillText(zodiacSigns[i/30],tx,ty);
    }
    // degree markers
    for(let i=0;i<360;i+=10){
      let angle=(i-90)*Math.PI/180;
      let x1=cx+zodiacR*Math.cos(angle), y1=cy+zodiacR*Math.sin(angle);
      let x2=cx+(zodiacR+10)*Math.cos(angle), y2=cy+(zodiacR+10)*Math.sin(angle);
      ctx.beginPath(); ctx.moveTo(x1,y1); ctx.lineTo(x2,y2);
      ctx.strokeStyle=(i%30===0)?"#fff":"#777"; ctx.stroke();
      if(i%30===0){ ctx.fillStyle="white"; ctx.font="10px Arial"; ctx.fillText(i+"Â°",x2+12,y2+12); }
    }
    ctx.fillStyle="magenta"; ctx.font="15px Arial";
    ctx.fillText("Zodiac 360Â°", cx, cy-zodiacR-25);
  }

  function draw(){ 
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawZodiac(); 
    hands.forEach(h=>{
      let dx=cx+h.r*Math.cos(h.angle-Math.PI/2);
      let dy=cy+h.r*Math.sin(h.angle-Math.PI/2);
      ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(dx,dy);
      ctx.strokeStyle=h.color; ctx.lineWidth=2; ctx.stroke();
    });
  }

  function animate(){
    if(!animating) return;
    let still=false;
    hands.forEach(h=>{
      let diff=h.target-h.angle;
      if(Math.abs(diff)>0.001){h.angle+=diff*0.05; still=true;}
      else{h.angle=h.target;}
    });
    let diff=moonDial.target-moonDial.angle;
    if(Math.abs(diff)>0.001){moonDial.angle+=diff*0.05; still=true;}
    else{moonDial.angle=moonDial.target;}
    draw();
    if(still) requestAnimationFrame(animate); else animating=false;
  }
</script>
<script>
  const bottomCanvas = document.getElementById("bottomClock");
  const btx = bottomCanvas.getContext("2d");
  const bcx = bottomCanvas.width/2, bcy = bottomCanvas.height/2;

  const bMetonicR=160, bSarosR=220, bExeligmosR=280, bMoonR=280; // dial to Exeligmos

  function updateBottomClock(daysSinceZero){
    btx.clearRect(0,0,bottomCanvas.width,bottomCanvas.height);

    function drawRing(R,color,label){
      btx.beginPath(); btx.arc(bcx,bcy,R,0,Math.PI*2);
      btx.strokeStyle=color; btx.lineWidth=2; btx.stroke();
      btx.fillStyle=color; btx.font="14px Arial";
      btx.fillText(label, bcx, bcy-R-15);
      for(let i=0;i<360;i+=10){
        let angle=(i-90)*Math.PI/180;
        let x1=bcx+R*Math.cos(angle), y1=bcy+R*Math.sin(angle);
        let x2=bcx+(R+8)*Math.cos(angle), y2=bcy+(R+8)*Math.sin(angle);
        btx.beginPath(); btx.moveTo(x1,y1); btx.lineTo(x2,y2);
        btx.strokeStyle=(i%30===0)?color:"#555"; btx.stroke();
        if(i%30===0){ btx.fillText(i+"Â°",x2+15,y2+15); }
      }
    }

    drawRing(bMetonicR,"gold","Metonic (235)");
    drawRing(bSarosR,"cyan","Saros (223)");
    drawRing(bExeligmosR,"lime","Exeligmos (669)");

    let moonPhaseAngle=((daysSinceZero % 29.53)/29.53)*2*Math.PI;
    let dx=bcx+bMoonR*Math.cos(moonPhaseAngle-Math.PI/2);
    let dy=bcy+bMoonR*Math.sin(moonPhaseAngle-Math.PI/2);
    btx.beginPath(); btx.moveTo(bcx,bcy); btx.lineTo(dx,dy);
    btx.strokeStyle="white"; btx.lineWidth=3; btx.stroke();
    let arrowSize=14, angle=moonPhaseAngle-Math.PI/2;
    btx.beginPath(); btx.moveTo(dx,dy);
    btx.lineTo(dx-arrowSize*Math.cos(angle-Math.PI/6),dy-arrowSize*Math.sin(angle-Math.PI/6));
    btx.lineTo(dx-arrowSize*Math.cos(angle+Math.PI/6),dy-arrowSize*Math.sin(angle+Math.PI/6));
    btx.closePath(); btx.fillStyle="white"; btx.fill();
    btx.beginPath(); btx.arc(bcx,bcy,8,0,Math.PI*2);
    btx.fillStyle="white"; btx.fill();
  }
</script>
</body>
</html>
