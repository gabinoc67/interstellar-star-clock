<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Top Clock â€” Sun, Moon & Planets</title>
  <style>
    body { background:#0a0f1f; color:#fff; text-align:center; font-family:Arial; }
    canvas { background:#111; margin-top:20px; border:2px solid #333; }
    h1 { color: gold; }
    label, input, button { margin: 10px; font-size: 1em; }
    button {
      background: #2563eb; color: white; border: none; padding: 6px 12px;
      border-radius: 6px; cursor: pointer;
    }
    button:hover { background: #1d4ed8; }
  </style>
</head>
<body>
  <h1>ðŸŒžðŸŒ™ Top Clock â€” Sun, Moon & Planets</h1>

  <label for="dateInput">Enter a Date:</label>
  <input type="date" id="dateInput">
  <button onclick="startClock()">Start</button>

  <div id="output">Your alignment will appear here.</div>

  <canvas id="topClock" width="900" height="500"></canvas>

  <script>
    const canvas = document.getElementById("topClock");
    const ctx = canvas.getContext("2d");

    // === Define cycles (days per full rotation) ===
    const cycles = {
      Sun: 365,
      Moon: 29.53,
      Mercury: 116,
      Venus: 584,
      Mars: 780,
      Jupiter: 399,
      Saturn: 378
    };

    // === Circle positions & sizes ===
    let circles = [
      {x:150, y:250, r:80, label:"Sun (Year)", cycle:"Sun", angle:0, color:"gold"},
      {x:350, y:250, r:60, label:"Moon (Month)", cycle:"Moon", angle:0, color:"silver"},
      {x:550, y:150, r:40, label:"Mercury", cycle:"Mercury", angle:0, color:"orange"},
      {x:550, y:350, r:50, label:"Venus", cycle:"Venus", angle:0, color:"violet"},
      {x:750, y:150, r:55, label:"Mars", cycle:"Mars", angle:0, color:"red"},
      {x:750, y:350, r:65, label:"Jupiter", cycle:"Jupiter", angle:0, color:"cyan"},
      {x:650, y:250, r:70, label:"Saturn", cycle:"Saturn", angle:0, color:"lightgreen"}
    ];

    // Reference new moon date (for lunar phase) â€” Jan 6, 2000
    const refMoon = new Date(2000,0,6);

    let running = false;

    function toCosmicDate(date) {
      let corrected = new Date(date);
      corrected.setDate(corrected.getDate() - 12); // 12-day correction
      return corrected;
    }

    function startClock() {
      let input = document.getElementById("dateInput").value;
      if (!input) return;
      let gDate = new Date(input);
      let cosmic = toCosmicDate(gDate);

      document.getElementById("output").innerHTML =
        "Gregorian Date: " + gDate.toDateString() +
        "<br>Cosmic Date (â€“12 days): " + cosmic.toDateString();

      // Align all circles based on chosen date
      alignCircles(cosmic);
      running = true;
      animate();
    }

    function alignCircles(date) {
      let startOfYear = new Date(date.getFullYear(), 0, 0);
      let daysSinceYear = Math.floor((date - startOfYear) / 86400000);

      // Loop through circles
      circles.forEach(c => {
        if (c.cycle === "Sun") {
          c.angle = (daysSinceYear / cycles.Sun) * 2 * Math.PI;
        }
        else if (c.cycle === "Moon") {
          let daysSinceRef = (date - refMoon) / 86400000;
          let moonPhaseDays = daysSinceRef % cycles.Moon;
          c.angle = (moonPhaseDays / cycles.Moon) * 2 * Math.PI;
        }
        else {
          let daysSinceEpoch = (date - new Date(2000,0,1)) / 86400000;
          c.angle = ((daysSinceEpoch % cycles[c.cycle]) / cycles[c.cycle]) * 2 * Math.PI;
        }
      });
    }

    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);

      circles.forEach(c => {
        // Draw circle
        ctx.beginPath();
        ctx.arc(c.x, c.y, c.r, 0, Math.PI*2);
        ctx.strokeStyle="#555";
        ctx.stroke();

        // Draw label inside
        ctx.fillStyle="white";
        ctx.font="14px Arial";
        ctx.textAlign="center";
        ctx.fillText(c.label, c.x, c.y);

        // Draw dot
        let dx = c.x + c.r * Math.cos(c.angle);
        let dy = c.y + c.r * Math.sin(c.angle);
        ctx.beginPath();
        ctx.arc(dx, dy, 6, 0, Math.PI*2);
        ctx.fillStyle=c.color;
        ctx.fill();
      });
    }

    function animate() {
      if (!running) return;
      draw();
      requestAnimationFrame(animate);
    }
  </script>
</body>
</html>
