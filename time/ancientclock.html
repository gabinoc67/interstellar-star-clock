<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cosmic Clock</title>
  <style>
    body { background:#0a0f1f; color:#fff; font-family:Arial; margin:0; display:flex; justify-content:center; align-items:center; height:100vh; }
    #container { display:flex; align-items:center; }
    #infoPanel {
      width: 240px;
      text-align:left;
      margin-right:20px;
      font-size: 14px;
      line-height:1.6em;
    }
    #infoPanel h1 { color:gold; font-size:20px; margin-bottom:10px; }
    label, input, button { margin: 5px 0; font-size: 0.9em; }
    input { width: 90%; padding:4px; }
    button {
      background: #2563eb; color: white; border: none; padding: 6px 12px;
      border-radius: 6px; cursor: pointer;
    }
    button:hover { background: #1d4ed8; }
    canvas { background:#111; border:2px solid #333; }
  </style>
</head>
<body>
  <div id="container">
    <div id="infoPanel">
      <h1>ü™ê Cosmic Clock</h1>
      <label for="dateInput">Birthday:</label><br>
      <input type="date" id="dateInput"><br>
      <button onclick="startClock()">Start</button>
      <button onclick="resetClock()">Reset</button>
      <div id="output">Enter a date to see cosmic alignment.</div>
    </div>
    <canvas id="cosmicClock" width="750" height="750"></canvas>
  </div>

  <script>
    const canvas = document.getElementById("cosmicClock");
    const ctx = canvas.getContext("2d");

    const cx = canvas.width/2, cy = canvas.height/2;
    const zodiacR = 270;
    const monthR = zodiacR+30;

    // Zero Epoch: 3111 BCE
    const zeroEpoch = new Date(-3110, 7, 11);

    const cycles = { Sun:365, Moon:29.53, Mercury:116, Venus:584, Mars:780, Jupiter:399, Saturn:378 };

    let hands = [
      {label:"Sun", cycle:"Sun", angle:0, target:0, color:"gold", r:100},
      {label:"Moon", cycle:"Moon", angle:0, target:0, color:"silver", r:120},
      {label:"Mercury", cycle:"Mercury", angle:0, target:0, color:"orange", r:140},
      {label:"Venus", cycle:"Venus", angle:0, target:0, color:"violet", r:160},
      {label:"Mars", cycle:"Mars", angle:0, target:0, color:"red", r:180},
      {label:"Jupiter", cycle:"Jupiter", angle:0, target:0, color:"cyan", r:200},
      {label:"Saturn", cycle:"Saturn", angle:0, target:0, color:"lightgreen", r:220}
    ];

    let birthdayDial = {angle:0, target:0};
    let animating = false;

    function toCosmicDate(date){
      let corrected = new Date(date);
      corrected.setDate(corrected.getDate()-12);
      return corrected;
    }

    function startClock(){
      let input = document.getElementById("dateInput").value;
      if(!input) return;
      let gDate = new Date(input);
      let cosmic = toCosmicDate(gDate);

      document.getElementById("output").innerHTML =
        "Cosmic Date: " + cosmic.toDateString();

      setTargets(cosmic);
      animating = true;
      animate();
    }

    function resetClock(){
      hands.forEach(h=>{ h.angle=0; h.target=0; });
      birthdayDial.angle=0; birthdayDial.target=0;
      animating=false;
      document.getElementById("dateInput").value = ""; // also clears birthday input
      document.getElementById("output").innerHTML = "Enter a date to see cosmic alignment.";
      draw();
    }

    function setTargets(date){
      let daysSinceZero = Math.floor((date-zeroEpoch)/86400000);
      hands.forEach(h=>{
        h.target=((daysSinceZero%cycles[h.cycle])/cycles[h.cycle])*2*Math.PI;
      });
      birthdayDial.target=((daysSinceZero%cycles.Sun)/cycles.Sun)*2*Math.PI;
      birthdayDial.angle=birthdayDial.target;
    }

    function drawZodiac(){
      ctx.beginPath();
      ctx.arc(cx,cy,zodiacR,0,Math.PI*2);
      ctx.strokeStyle="#555"; ctx.lineWidth=2; ctx.stroke();

      // Zodiac with true ranges (approx tropical dates)
      const zodiacs = [
        {sign:"Aries", startDay:80, endDay:109},    // Mar 21 ‚Äì Apr 19
        {sign:"Taurus", startDay:110, endDay:140},  // Apr 20 ‚Äì May 20
        {sign:"Gemini", startDay:141, endDay:171},  // May 21 ‚Äì Jun 20
        {sign:"Cancer", startDay:172, endDay:203},  // Jun 21 ‚Äì Jul 22
        {sign:"Leo", startDay:204, endDay:234},     // Jul 23 ‚Äì Aug 22
        {sign:"Virgo", startDay:235, endDay:265},   // Aug 23 ‚Äì Sep 22
        {sign:"Libra", startDay:266, endDay:295},   // Sep 23 ‚Äì Oct 22
        {sign:"Scorpio", startDay:296, endDay:325}, // Oct 23 ‚Äì Nov 21
        {sign:"Sagittarius", startDay:326, endDay:355}, // Nov 22 ‚Äì Dec 21
        {sign:"Capricorn", startDay:356, endDay:19},    // Dec 22 ‚Äì Jan 19 (wraps around)
        {sign:"Aquarius", startDay:20, endDay:49},      // Jan 20 ‚Äì Feb 18
        {sign:"Pisces", startDay:50, endDay:79}         // Feb 19 ‚Äì Mar 20
      ];

      zodiacs.forEach(z=>{
        let mid=(z.startDay+((z.endDay<z.startDay)?(z.endDay+365):z.endDay))/2;
        let rad=(mid-90)*Math.PI/180;
        let tx=cx+(zodiacR+45)*Math.cos(rad);
        let ty=cy+(zodiacR+45)*Math.sin(rad);
        ctx.fillStyle="skyblue"; ctx.font="14px Arial";
        ctx.fillText(z.sign,tx,ty);
      });
    }

    function drawMonthDays(){
      ctx.beginPath();
      ctx.arc(cx,cy,monthR,0,Math.PI*2);
      ctx.strokeStyle="#777"; ctx.stroke();

      // 12 months but using real zodiac day ranges
      const monthLengths = [31,28,31,30,31,30,31,31,30,31,30,31];
      let dayOfYear=0;

      for(let m=0;m<12;m++){
        let mid=dayOfYear+monthLengths[m]/2;
        let rad=(mid/365*360-90)*Math.PI/180;
        let tx=cx+(monthR+20)*Math.cos(rad);
        let ty=cy+(monthR+20)*Math.sin(rad);
        ctx.fillStyle="yellow"; ctx.font="14px Arial";
        ctx.fillText(m+1,tx,ty);
        dayOfYear+=monthLengths[m];
      }

      // tick marks every 5 days
      for(let d=0; d<365; d++){
        let rad=(d/365*360-90)*Math.PI/180;
        let len=(d%30===0)?12:(d%5===0?8:4);
        let x1=cx+monthR*Math.cos(rad);
        let y1=cy+monthR*Math.sin(rad);
        let x2=cx+(monthR+len)*Math.cos(rad);
        let y2=cy+(monthR+len)*Math.sin(rad);
        ctx.beginPath();
        ctx.moveTo(x1,y1); ctx.lineTo(x2,y2);
        ctx.strokeStyle="#999"; ctx.lineWidth=1; ctx.stroke();
      }
    }

    function drawHands(){
      hands.forEach(h=>{
        let dx=cx+h.r*Math.cos(h.angle-Math.PI/2);
        let dy=cy+h.r*Math.sin(h.angle-Math.PI/2);
        ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(dx,dy);
        ctx.strokeStyle=h.color; ctx.lineWidth=2; ctx.stroke();
        ctx.beginPath(); ctx.arc(dx,dy,5,0,Math.PI*2);
        ctx.fillStyle=h.color; ctx.fill();
        ctx.fillStyle=h.color; ctx.font="12px Arial";
        ctx.fillText(h.label,dx+8,dy);
      });
    }

    function drawDial(){
      let dx=cx+zodiacR*Math.cos(birthdayDial.angle-Math.PI/2);
      let dy=cy+zodiacR*Math.sin(birthdayDial.angle-Math.PI/2);
      ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(dx,dy);
      ctx.strokeStyle="white"; ctx.lineWidth=3; ctx.stroke();

      // arrow head
      ctx.beginPath();
      ctx.moveTo(dx,dy);
      ctx.lineTo(dx-10*Math.cos(birthdayDial.angle-Math.PI/2-Math.PI/6),
                 dy-10*Math.sin(birthdayDial.angle-Math.PI/2-Math.PI/6));
      ctx.lineTo(dx-10*Math.cos(birthdayDial.angle-Math.PI/2+Math.PI/6),
                 dy-10*Math.sin(birthdayDial.angle-Math.PI/2+Math.PI/6));
      ctx.closePath();
      ctx.fillStyle="white"; ctx.fill();
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawMonthDays();
      drawZodiac();
      drawHands();
      drawDial();
    }

    function animate(){
      if(!animating) return;
      let still=false;
      hands.forEach(h=>{
        let diff=h.target-h.angle;
        if(Math.abs(diff)>0.001){h.angle+=diff*0.05; still=true;}
        else{h.angle=h.target;}
      });
      draw();
      if(still) requestAnimationFrame(animate);
      else animating=false;
    }

    draw();
  </script>
</body>
</html>
