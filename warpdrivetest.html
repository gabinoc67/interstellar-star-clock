<!-- ...everything above remains unchanged... -->
<canvas id="curveCanvas" width="800" height="300"></canvas>
<div id="arrivalInfo"></div>

<!-- ...HTML table and start/stop/reset buttons remain the same... -->

<script>
  // ...clock & beacon code unchanged...

  function drawCurveWithShip() {
    const canvas = document.getElementById("curveCanvas");
    const ctx = canvas.getContext("2d");
    const warp = parseInt(document.getElementById("warpSpeed").value) || 1;
    const startX = 100, endX = 700, baseY = 220;
    const arcHeight = 80 / warp;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw Earth
    ctx.beginPath();
    ctx.arc(startX, baseY, 12, 0, 2 * Math.PI);
    ctx.fillStyle = "blue";
    ctx.fill();
    ctx.fillStyle = "white";
    ctx.font = "14px Arial";
    ctx.fillText("Earth", startX - 20, baseY + 25);

    // Draw Destination
    ctx.beginPath();
    ctx.arc(endX, baseY, 10, 0, 2 * Math.PI);
    ctx.fillStyle = "orange";
    ctx.fill();
    ctx.fillStyle = "white";
    ctx.fillText(document.getElementById("destination").value, endX - 30, baseY + 25);

    // Draw curved path (quadratic arc)
    ctx.beginPath();
    ctx.moveTo(startX, baseY);
    ctx.quadraticCurveTo((startX + endX) / 2, baseY - arcHeight * 3, endX, baseY);
    ctx.strokeStyle = "red";
    ctx.lineWidth = 2;
    ctx.stroke();

    // Animate ship position
    const t = shipProgress;
    const cx = (1 - t) * (1 - t) * startX + 2 * (1 - t) * t * ((startX + endX) / 2) + t * t * endX;
    const cy = (1 - t) * (1 - t) * baseY + 2 * (1 - t) * t * (baseY - arcHeight * 3) + t * t * baseY;

    // Draw ship
    ctx.beginPath();
    ctx.arc(cx, cy, 8, 0, 2 * Math.PI);
    ctx.fillStyle = shipArrived ? "lime" : "cyan";
    ctx.shadowColor = shipArrived ? "lime" : "cyan";
    ctx.shadowBlur = 10;
    ctx.fill();
    ctx.shadowBlur = 0;
  }

  function animateShip() {
    if (!simulationRunning || shipArrived) return;
    const warp = parseInt(document.getElementById("warpSpeed").value) || 1;
    shipProgress += 0.0005 * warp;
    if (shipProgress >= 1) {
      shipProgress = 1;
      shipArrived = true;
      syncOnArrival();
    }
    drawCurveWithShip();
    animationFrame = requestAnimationFrame(animateShip);
  }

  // All other JS: unchanged (start/stop/reset/export/sync functions)

  updateClocks();
  drawCurveWithShip();
</script>

</body>
</html>
