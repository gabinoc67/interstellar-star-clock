<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Warp Bubble Clock Sync Monitor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: black;
      color: white;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #startBtn { background-color: #00ccff; color: black; }
    #resetBtn { background-color: #ff6600; color: white; }

    table {
      width: 90%;
      margin: auto;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 12px;
      border: 1px solid white;
    }
    .synced { background-color: #0f0; color: black; }
    .warning { background-color: #ff0; color: black; }
    .danger { background-color: #f00; color: white; }
  </style>
</head>
<body>

<h1>üõ∞ Warp Bubble Clock Synchronization Monitor</h1>

<div>
  <button id="startBtn">‚ñ∂Ô∏è Start Clocks</button>
  <button id="resetBtn">üîÑ Reset Clocks</button>
</div>

<table>
  <thead>
    <tr>
      <th>Clock ID</th>
      <th>Location</th>
      <th>Purpose</th>
      <th>Current Time</th>
      <th>Œî from CST (ms)</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody id="clock-table-body">
    <!-- Clock rows dynamically generated -->
  </tbody>
</table>

<script>
  let intervalId = null;

  // Base clocks setup
  const clocks = [
    { id: 'C1', location: 'Inside center', purpose: 'Biometric zone', drift: 0 },
    { id: 'C2', location: 'Bubble edge', purpose: 'Warp shell detection', drift: 3 },
    { id: 'C3', location: 'Onboard AI', purpose: 'CST-linked controls', drift: 0 },
    { id: 'C4', location: 'Outside CST Dome', purpose: 'Master Reference', drift: 0 },
    { id: 'C5', location: 'Floating mid-bubble', purpose: 'Free-float sensor', drift: -6 }
  ];

  function getCSTTime() {
    return new Date().getTime(); // Epoch ms
  }

  function formatTime(epochMs) {
    const date = new Date(epochMs);
    return date.toISOString().substr(11, 12); // HH:MM:SS.sss
  }

  function updateClocks() {
    const tableBody = document.getElementById("clock-table-body");
    tableBody.innerHTML = "";

    const baseTime = getCSTTime();

    clocks.forEach(clock => {
      // Random drift fluctuation
      const randomDrift = Math.random() * 2 - 1;
      clock.drift += randomDrift;

      const clockTime = baseTime + clock.drift;
      const delta = clock.drift.toFixed(3);

      let status = "‚úÖ Synced";
      let className = "synced";
      if (Math.abs(clock.drift) >= 5 && Math.abs(clock.drift) < 10) {
        status = "‚ö†Ô∏è Slight Drift";
        className = "warning";
      } else if (Math.abs(clock.drift) >= 10) {
        status = "‚ùå Unsafe Drift";
        className = "danger";
      }

      const row = `
        <tr class="${className}">
          <td>${clock.id}</td>
          <td>${clock.location}</td>
          <td>${clock.purpose}</td>
          <td>${formatTime(clockTime)}</td>
          <td>${delta}</td>
          <td>${status}</td>
        </tr>
      `;
      tableBody.innerHTML += row;
    });
  }

  // Start simulation
  document.getElementById("startBtn").addEventListener("click", () => {
    if (!intervalId) {
      intervalId = setInterval(updateClocks, 200);
    }
  });

  // Reset all clock drifts
  document.getElementById("resetBtn").addEventListener("click", () => {
    clocks.forEach(clock => {
      clock.drift = 0;
    });
    updateClocks(); // Refresh table
  });

  // Initial empty table render
  updateClocks();
</script>

</body>
</html>
