<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Warp Bubble Clock Sync Monitor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: black;
      color: white;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
    }
    button, select {
      padding: 10px 15px;
      margin: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
    #startBtn { background-color: #00ccff; color: black; }
    #stopBtn { background-color: #999; color: white; }
    #resetBtn { background-color: #ff6600; color: white; }

    table {
      width: 95%;
      margin: auto;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      border: 1px solid white;
    }
    .synced { background-color: #0f0; color: black; }
    .warning { background-color: #ff0; color: black; }
    .danger { background-color: #f00; color: white; }

    #beacon {
      font-size: 18px;
      margin-top: 20px;
      color: cyan;
    }
    .control-group {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>

<h1>üöÄ Warp Bubble Clock Synchronization Monitor</h1>

<div class="control-group">
  <button id="startBtn">‚ñ∂Ô∏è Start Clocks</button>
  <button id="stopBtn">‚è∏Ô∏è Stop Clocks</button>
  <button id="resetBtn">üîÑ Reset Clocks</button>

  <label>
    Warp Speed:
    <select id="warpSpeed">
      ${[...Array(10).keys()].map(i => `<option value="${i+1}">Warp ${i+1}</option>`).join("")}
    </select>
  </label>

  <label>
    Destination:
    <select id="destination">
      <option value="Mars">Mars</option>
      <option value="Jupiter">Jupiter</option>
      <option value="Saturn">Saturn</option>
      <option value="Pluto">Pluto</option>
    </select>
  </label>

  <button onclick="exportLog()">üìÑ Export Log CSV</button>
</div>

<div id="beacon">‚è≥ Beacon: Waiting for Start...</div>

<table>
  <thead>
    <tr>
      <th>Clock ID</th>
      <th>Name</th>
      <th>Location</th>
      <th>Purpose</th>
      <th>CST Time</th>
      <th>Clock Local Time</th>
      <th>Œî from CST (ms)</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody id="clock-table-body"></tbody>
</table>

<br><hr><br>

<!-- Additional Monitors -->
<div style="margin: 20px; text-align: left; padding-left: 10%;">
  <h2>üß™ Quantum Sync Monitor</h2>
  <p><strong>Entangled Clock Pair:</strong> <span id="quantumStatus">üî¥ Disconnected</span></p>
  <p><strong>Last Sync Timestamp:</strong> <span id="quantumTimestamp">N/A</span></p>

  <h2>üåå Curvature Physics Engine</h2>
  <p><strong>Curvature Safety (Alcubierre Placeholder):</strong> <span id="curvatureStatus">Pending...</span></p>
  <p><strong>Energy Mass Factor:</strong> <span id="energyFactor">E=mc¬≤</span></p>

  <h2>‚è≥ Relativistic Lag</h2>
  <p><strong>Light-lag Delay (ms):</strong> <span id="lightLag">N/A</span></p>
  <p><strong>Relativity Drift (ms):</strong> <span id="relativityDelay">N/A</span></p>

  <h2>üöÄ Ship Coordinates & Velocity</h2>
  <p><strong>Location:</strong> <span id="shipLocation">X:0, Y:0, Z:0</span></p>
  <p><strong>Velocity Vector:</strong> <span id="velocityVector">[0,0,0]</span></p>
</div>

<script>
  let driftInterval = null;
  let beaconInterval = null;
  let simulationRunning = false;
  const log = [];

  const clocks = [
    { id: 'C1', name: 'BioSync', location: 'Ship Biometric Zone', purpose: 'Biometric Sync', drift: 0 },
    { id: 'C2', name: 'EdgeWave', location: 'Warp Shell Edge', purpose: 'Gravitational Phase Monitoring', drift: 3 },
    { id: 'C3', name: 'NavCore', location: 'Onboard AI Core', purpose: 'Warp Navigation Sync', drift: 0 },
    { id: 'C4', name: 'CSTMaster', location: 'CST Dome Anchor', purpose: 'Earth CST Master Reference', drift: 0 },
    { id: 'C5', name: 'DriftEye', location: 'Bubble Mid-Space', purpose: 'Clock Drift Sensor', drift: -6 },
    { id: 'C6', name: 'UGT', location: 'UGT Clock', purpose: 'Universal Galactic Time', drift: 0 },
    { id: 'C7', name: 'UniAge', location: 'Interstellar Time Base', purpose: 'Universe Age Reference', drift: 0 },
    { id: 'C8', name: 'MarsClock', location: 'Mars Surface Dome', purpose: 'Planet Local Year Tracker', drift: 0 }
  ];

  let shipCoords = { x: 0, y: 0, z: 0 };
  let velocity = [0, 0, 0];

  function getCSTTime() {
    return new Date().getTime();
  }

  function formatTime(epochMs) {
    const date = new Date(epochMs);
    return date.toISOString().substr(11, 12); // HH:MM:SS.sss
  }

  function checkFTLSafety(warp, avgDrift) {
    const safeCurve = 1 / warp;
    return avgDrift < safeCurve * 10;
  }

  function updateShipLocation() {
    velocity = [Math.random() * 10, Math.random() * 10, Math.random() * 10];
    shipCoords.x += velocity[0];
    shipCoords.y += velocity[1];
    shipCoords.z += velocity[2];

    document.getElementById("shipLocation").textContent = `X:${shipCoords.x.toFixed(2)}, Y:${shipCoords.y.toFixed(2)}, Z:${shipCoords.z.toFixed(2)}`;
    document.getElementById("velocityVector").textContent = `[${velocity.map(v => v.toFixed(2)).join(", ")}]`;
  }

  function updateQuantumSync() {
    const now = new Date().toISOString();
    document.getElementById("quantumStatus").textContent = "üü¢ Entangled";
    document.getElementById("quantumTimestamp").textContent = now;
  }

  function updateCurvaturePhysics(warp) {
    const curvature = (1 / (warp * warp)).toFixed(5);
    document.getElementById("curvatureStatus").textContent = `Curvature factor: ${curvature}`;
    document.getElementById("energyFactor").textContent = `E = m √ó (warp¬≤ √ó c¬≤)`;
  }

  function updateRelativityCalc(destination) {
    const lightLags = { Mars: 750, Jupiter: 2000, Saturn: 3500, Pluto: 5000 }; // ms delay
    const delay = lightLags[destination] || 1000;
    document.getElementById("lightLag").textContent = delay;
    document.getElementById("relativityDelay").textContent = (delay * 0.05).toFixed(2); // basic 5% dilation
  }

  function updateClocks() {
    const tableBody = document.getElementById("clock-table-body");
    tableBody.innerHTML = "";

    const baseTime = getCSTTime();
    let totalDrift = 0;

    clocks.forEach(clock => {
      if (simulationRunning) clock.drift += Math.random() * 2 - 1;
      totalDrift += Math.abs(clock.drift);

      const clockTime = baseTime + clock.drift;
      const delta = clock.drift.toFixed(3);

      let status = "‚úÖ Synced";
      let className = "synced";
      if (Math.abs(clock.drift) >= 5 && Math.abs(clock.drift) < 10) {
        status = "‚ö†Ô∏è Slight Drift";
        className = "warning";
      } else if (Math.abs(clock.drift) >= 10) {
        status = "‚ùå Unsafe Drift";
        className = "danger";
      }

      tableBody.innerHTML += `
        <tr class="${className}">
          <td>${clock.id}</td>
          <td>${clock.name}</td>
          <td>${clock.location}</td>
          <td>${clock.purpose}</td>
          <td>${formatTime(baseTime)}</td>
          <td>${formatTime(clockTime)}</td>
          <td>${delta}</td>
          <td>${status}</td>
        </tr>
      `;
    });

    const avgDrift = totalDrift / clocks.length;
    const warp = parseInt(document.getElementById("warpSpeed").value);
    const planet = document.getElementById("destination").value;
    const safe = checkFTLSafety(warp, avgDrift);

    updateQuantumSync();
    updateShipLocation();
    updateCurvaturePhysics(warp);
    updateRelativityCalc(planet);

    const logEntry = {
      time: new Date().toISOString(),
      warp,
      destination: planet,
      avgDrift: avgDrift.toFixed(3),
      shipCoords: `${shipCoords.x.toFixed(1)},${shipCoords.y.toFixed(1)},${shipCoords.z.toFixed(1)}`,
      velocity: `${velocity.map(v => v.toFixed(1)).join(',')}`,
      status: safe ? "SAFE" : "UNSAFE"
    };
    log.push(logEntry);

    document.getElementById("beacon").textContent =
      `üõ∞Ô∏è Warp ${warp} ‚Üí ${planet} | Avg Drift: ${avgDrift.toFixed(3)} ms ‚Üí ${safe ? "‚úÖ SAFE" : "‚ùå UNSAFE"}`;
  }

  function beaconPulse() {
    if (!simulationRunning) return;
    clocks.forEach(clock => {
      if (clock.id !== 'C4') clock.drift *= 0.1;
    });
    updateClocks();
  }

  document.getElementById("startBtn").addEventListener("click", () => {
    if (!simulationRunning) {
      simulationRunning = true;
      driftInterval = setInterval(updateClocks, 500);
      beaconInterval = setInterval(beaconPulse, 2000);
    }
  });

  document.getElementById("stopBtn").addEventListener("click", () => {
    simulationRunning = false;
    clearInterval(driftInterval);
    clearInterval(beaconInterval);
  });

  document.getElementById("resetBtn").addEventListener("click", () => {
    simulationRunning = false;
    clearInterval(driftInterval);
    clearInterval(beaconInterval);
    clocks.forEach(clock => clock.drift = 0);
    log.length = 0;
    shipCoords = { x: 0, y: 0, z: 0 };
    velocity = [0, 0, 0];
    document.getElementById("beacon").textContent = "‚è≥ Beacon: Reset ‚Äî Waiting for Start...";
    updateClocks();
  });

  function exportLog() {
    const csvContent = [
      ["Time", "Warp", "Destination", "Avg Drift (ms)", "Ship Location", "Velocity", "Status"],
      ...log.map(e => [e.time, e.warp, e.destination, e.avgDrift, e.shipCoords, e.velocity, e.status])
    ].map(row => row.join(",")).join("\n");

    const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "warp_clock_log.csv";
    link.click();
  }

  updateClocks();
</script>

</body>
</html>
