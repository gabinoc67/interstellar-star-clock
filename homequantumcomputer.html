<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>CST Scientific Calculator — Symbols • Steps • 10 Demos</title>
<style>
:root{
--bg:#0b1220;--panel:#121a2e;--ink:#e8eeff;--muted:#aab4d6;--accent:#7aa7ff;
--ok:#34e6a2;--warn:#ffd166;--bad:#ff6b8b;--border:#22325e;
--btn:#182241;--btnOp:#253268;--btnEq:#2b7a4b;--btnAct:#3b82f6;
--chip:#0f1630;--card:#0f162c;
}
*{box-sizing:border-box}
body{margin:0;background:radial-gradient(1400px 900px at 70% 0%,#121a2e 0%,#0b1220 60%,#08101d 100%);
color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica Neue,Arial}
.wrap{max-width:1200px;margin:24px auto;padding:16px}
h1{margin:0 0 8px;font-size:clamp(22px,3.2vw,32px)}
p.lead{margin:0 0 14px;color:var(--muted)}
.grid{display:grid;grid-template-columns:420px 1fr;gap:16px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.calc{background:linear-gradient(180deg,#121a2e,#0e1529);border:1px solid var(--border);
border-radius:16px;padding:12px;box-shadow:0 8px 30px rgba(0,0,0,.35)}
.display{display:flex;gap:8px;align-items:center}
.screen{flex:1;background:#0b1122;border:1px solid var(--border);
border-radius:10px;padding:10px 12px;font-size:20px;min-height:48px}
.screen input{width:100%;background:transparent;color:var(--ink);border:0;outline:0;font-size:20px}
.mode{display:flex;gap:8px}
.chip{background:var(--chip);border:1px solid var(--border);border-radius:999px;
padding:6px 10px;font-size:12px;cursor:pointer}
.chip.active{outline:2px solid var(--accent)}
.keypad{margin-top:10px;display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
.btn{border:1px solid var(--border);background:var(--btn);color:var(--ink);padding:12px 8px;border-radius:10px;cursor:pointer;text-align:center}
.btn.op{background:var(--btnOp)}.btn.eq{background:var(--btnEq)}.btn.act{background:var(--btnAct)}
.btn:active{transform:translateY(1px)}
.side{display:grid;gap:12px}
.card{background:linear-gradient(180deg,#0d1427,#0a1223);border:1px solid var(--border);
border-radius:14px;padding:12px}
.card h3{margin:0 0 8px;font-size:16px;color:#d9e4ff}
.steps{max-height:260px;overflow:auto;line-height:1.45}
.steps .step{background:var(--card);border:1px dashed var(--border);padding:8px;border-radius:8px;margin:6px 0;color:#cfe1ff}
.history{max-height:124px;overflow:auto}
.history .item{padding:6px;border-bottom:1px dashed var(--border);font-family:ui-monospace,Consolas,Menlo,monospace;color:#cfe1ff}
.demos{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.demo{padding:10px;background:var(--chip);border:1px solid var(--border);border-radius:10px;cursor:pointer}
.demo:hover{outline:2px solid #29417a}
.actions{display:flex;gap:8px;flex-wrap:wrap}.actions .btn{padding:10px 12px}
.printable{background:#fff;color:#111;padding:16px;border-radius:12px}
.printable pre{white-space:pre-wrap}
@media print{body{background:#fff}.grid{grid-template-columns:1fr}.card,.calc{box-shadow:none}.actions{display:none}}
</style>
</head>
<body>
<div class="wrap">
<h1>CST Scientific Calculator</h1>
<p class="lead">Symbols • Steps • 10 Demonstrations • Print Results. Toggle <b>DEG/RAD</b>, click symbols, type, and view step-by-step computation.</p>

<div class="grid">
<section class="calc">
<div class="display">
  <div class="screen"><input id="expr" placeholder="Type or tap: e.g., sin(30)+√(3)^2-π/4"/></div>
  <div class="mode">
    <span id="degBtn" class="chip active">DEG</span>
    <span id="radBtn" class="chip">RAD</span>
  </div>
</div>

<div class="keypad" id="keypad">
  <div class="btn act" data-k="AC">AC</div><div class="btn act" data-k="⌫">⌫</div>
  <div class="btn op" data-k="(">(</div><div class="btn op" data-k=")">)</div>
  <div class="btn op" data-k=",">,</div><div class="btn op" data-k="%">%</div>
  <div class="btn" data-k="sin(">sin</div><div class="btn" data-k="cos(">cos</div>
  <div class="btn" data-k="tan(">tan</div><div class="btn" data-k="ln(">ln</div>
  <div class="btn" data-k="log(">log</div><div class="btn op" data-k="^">^</div>
  <div class="btn" data-k="asin(">asin</div><div class="btn" data-k="acos(">acos</div>
  <div class="btn" data-k="atan(">atan</div><div class="btn" data-k="sqrt(">√</div>
  <div class="btn" data-k="abs(">abs</div><div class="btn" data-k="exp(">exp</div>
  <div class="btn" data-k="7">7</div><div class="btn" data-k="8">8</div>
  <div class="btn" data-k="9">9</div><div class="btn op" data-k="/">÷</div>
  <div class="btn" data-k="pi">π</div><div class="btn" data-k="e">e</div>
  <div class="btn" data-k="4">4</div><div class="btn" data-k="5">5</div>
  <div class="btn" data-k="6">6</div><div class="btn op" data-k="*">×</div>
  <div class="btn" data-k="^2">x²</div><div class="btn" data-k="1/">1/x</div>
  <div class="btn" data-k="1">1</div><div class="btn" data-k="2">2</div>
  <div class="btn" data-k="3">3</div><div class="btn op" data-k="-">−</div>
  <div class="btn act" data-k="MS">MS</div><div class="btn act" data-k="MR">MR</div>
  <div class="btn" data-k="0">0</div><div class="btn" data-k=".">.</div>
  <div class="btn op" data-k="+">+</div><div class="btn eq" data-k="=">=</div>
  <div class="btn act" data-k="M+">M+</div><div class="btn act" data-k="MC">MC</div>
</div>

<div class="actions" style="margin-top:10px">
<button class="btn" id="showSteps">Solve & Show Steps</button>
<button class="btn" id="addHist">Add to History</button>
<button class="btn" id="printBtn">Print Result</button>
<button class="btn" id="clearBtn">Clear Results</button>
</div>
</section>

<aside class="side">
<div class="card"><h3>Step-by-Step Solution</h3><div id="steps" class="steps"></div></div>
<div class="card"><h3>History</h3><div id="history" class="history"></div></div>
<div class="card"><h3>10 Demonstrations (click to load)</h3><div class="demos" id="demos"></div></div>
<div class="card"><h3>Printable Summary</h3>
<div class="printable"><h2>Calculation Summary</h2>
<div><b>Expression:</b> <span id="pExpr">—</span></div>
<div><b>Result:</b> <span id="pRes">—</span></div>
<div><b>Mode:</b> <span id="pMode">DEG</span></div>
<h3>Steps</h3><pre id="pSteps">(Run a calculation to populate this section.)</pre></div>
</div>
</aside>
</div>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
(function(){
const $=id=>document.getElementById(id);
const exprEl=$('expr'),stepsEl=$('steps'),histEl=$('history'),
demosEl=$('demos'),pExpr=$('pExpr'),pRes=$('pRes'),pMode=$('pMode'),pSteps=$('pSteps');
let DEG=true;

const demos=[
{name:"Quadratic (x=?)",expr:"(-b + sqrt(b^2 - 4*a*c)) / (2*a)",fill:{a:1,b:-3,c:2},note:"Quadratic for a=1,b=-3,c=2 → root 2"},
{name:"Trig mix",expr:"sin(30)+cos(60)+tan(45)",note:"→2"},
{name:"Log rules",expr:"ln(e^2)+log(1000)-ln(e)",note:"→4"},
{name:"Vector magnitude",expr:"sqrt(3^2+4^2)",note:"→5"},
{name:"Percent & power",expr:"200*15%+2^5",note:"→62"}
];

// Render demo list
if(demosEl){
  demos.forEach((d,i)=>{
    const div=document.createElement('div');
    div.className='demo';div.textContent=(i+1)+'. '+d.name;div.dataset.index=i;
    div.onclick=()=>loadDemo(i);
    demosEl.appendChild(div);
  });
}

function addStep(t){const d=document.createElement('div');d.className='step';d.textContent=t;stepsEl.appendChild(d);stepsEl.scrollTop=stepsEl.scrollHeight;}

function applyFill(expr,fill){
  let out=expr;
  for(const[k,v]of Object.entries(fill||{}))
    out=out.replace(new RegExp('\\b'+k+'\\b','g'),v);
  return out;
}

// DEG/RAD toggle
$('degBtn').onclick=()=>{DEG=true;pMode.textContent='DEG';$('degBtn').classList.add('active');$('radBtn').classList.remove('active');};
$('radBtn').onclick=()=>{DEG=false;pMode.textContent='RAD';$('radBtn').classList.add('active');$('degBtn').classList.remove('active');};

function loadDemo(i){
  const d=demos[i];if(!d)return;
  const filled=applyFill(d.expr,d.fill||{});
  exprEl.value=filled;
  stepsEl.innerHTML='';
  addStep('Demo loaded: '+d.name);
  addStep('Expression: '+filled);
  if(d.note)addStep('Note: '+d.note);
  // Auto-compute for Quadratic
  if(d.name.startsWith("Quadratic")){
    compute(filled);
  }
}

// Core compute
function compute(input){
  const steps=[];
  try{
    let expr=input
      .replace(/π/g,'pi').replace(/×/g,'*').replace(/÷/g,'/')
      .replace(/\^/g,'**').replace(/√/g,'sqrt')
      .replace(/(\d+(?:\.\d+)?)%/g,'($1/100)');
    steps.push('Normalized: '+expr);
    const trig=['sin','cos','tan'];
    if(DEG){
      trig.forEach(fn=>{
        const re=new RegExp('\\b'+fn+'\\(([^()]+)\\)','g');
        expr=expr.replace(re,(_,a)=>`Math.${fn}(${a}*Math.PI/180)`);
      });
      steps.push('Converted DEG → radians internally');
    }
    const scope={pi:Math.PI,e:Math.E,sqrt:Math.sqrt,abs:Math.abs,ln:Math.log,log:(x)=>Math.log10(x),exp:Math.exp};
    const result=Function(...Object.keys(scope),'return '+expr)(...Object.values(scope));
    steps.push('Result: '+result);
    steps.forEach(s=>addStep(s));
    pExpr.textContent=input;pRes.textContent=result;pSteps.textContent=steps.join('\n');
    return result;
  }catch(err){addStep('Error: '+err.message);}
}
})();
});
</script>
</body>
</html>
