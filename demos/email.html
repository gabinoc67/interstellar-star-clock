<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Contact & Collaborate — Gabino Casanova</title>
<meta name="description" content="Contact and collaboration form for research input and proposals. Paste your ideas, questions, or draft documents and send directly to Gabino Casanova." />
<style>
  :root{
    --bg:#0b1222; --panel:#111a34; --ink:#eaf0ff; --muted:#a7b7e6;
    --border:#213067; --btn:#162455; --btnHover:#1d2e6e; --accent:#8fb4ff;
    --ok:#7bffb1; --warn:#ffd37a; --err:#ff8c8c;
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
  }
  .wrap{max-width:920px;margin:0 auto;padding:22px}
  h1{margin:8px 0 6px;font-size:1.9rem}
  p.sub{color:var(--muted);margin:0 0 18px}
  form{
    background:var(--panel);
    border:1px solid var(--border);
    border-radius:16px;
    padding:18px;
  }
  .grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:14px;
  }
  .full{grid-column:1 / -1}
  label{
    display:block;
    font-size:0.95rem;
    margin:0 0 6px;
    color:var(--muted);
  }
  input,textarea{
    width:100%;
    padding:12px;
    border-radius:12px;
    border:1px solid var(--border);
    background:#0d1530;
    color:var(--ink);
  }
  input[type="file"]{
    padding:8px;
    background:#0d1530;
  }
  textarea{
    min-height:200px;
    resize:vertical;
  }
  .row{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
  }
  .btn{
    background:var(--btn);
    border:1px solid var(--border);
    padding:12px 16px;
    border-radius:12px;
    color:var(--ink);
    cursor:pointer;
  }
  .btn:hover{background:var(--btnHover)}
  .btn:disabled{opacity:.6;cursor:not-allowed}
  .req{color:var(--warn)}
  .status{
    margin-top:14px;
    padding:10px 12px;
    border-radius:10px;
    border:1px solid var(--border);
    display:none;
  }
  .status.ok{
    display:block;
    background:#0f2a1d;
    border-color:#1d6b4a;
    color:var(--ok);
  }
  .status.err{
    display:block;
    background:#2a1313;
    border-color:#7a2e2e;
    color:var(--err);
  }
  .note{font-size:.9rem;color:var(--muted)}
  .hp{
    position:absolute;
    left:-9999px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
  }
</style>
</head>
<body>
<main class="wrap">
  <h1>Contact & Collaborate</h1>
  <p class="sub">
    Need feedback, collaboration, or a sanity-check on your research? Paste your ideas, notes, or draft document text below—
    everything goes to <strong>gabinocasanova30@gmail.com</strong>.
  </p>

  <!-- Main contact form using Formspree with file upload -->
  <form id="contactForm" novalidate enctype="multipart/form-data">
    <div class="grid">
      <div>
        <label for="name">Your Name <span class="req">*</span></label>
        <input id="name" name="name" type="text" placeholder="Your full name" required />
      </div>

      <div>
        <label for="email">Email <span class="req">*</span></label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required />
      </div>

      <div>
        <label for="org">Organization / School (optional)</label>
        <input id="org" name="organization" type="text" placeholder="Company, lab, or school" />
      </div>

      <div>
        <label for="subject">Subject <span class="req">*</span></label>
        <input id="subject" name="subject" type="text" placeholder="Topic of your message" required />
      </div>

      <div class="full">
        <label for="message">
          Message / Paste Your Work <span class="req">*</span>
        </label>
        <textarea id="message" name="message"
          placeholder="Paste your proposal, equations, notes, or questions here. You can also include links to Google Drive, GitHub, or other files."
          required></textarea>
      </div>

      <!-- File upload (optional) -->
      <div class="full">
        <label for="upload">Attach File (optional)</label>
        <input id="upload" name="upload" type="file" />
      </div>

      <div class="full">
        <label class="note">
          <input type="checkbox" id="copyMe" name="copyMe" /> Send me a copy
        </label>
      </div>

      <!-- Honeypot (spam trap) -->
      <input class="hp" type="text" name="_middle_name" autocomplete="off" tabindex="-1" />

      <!-- Explicit target email for Formspree (may be ignored if dashboard is configured, but safe to include) -->
      <input type="hidden" name="_to" value="gabinocasanova30@gmail.com" />
    </div>

    <div class="row" style="margin-top:12px">
      <button id="sendBtn" class="btn" type="submit">Send</button>
      <button class="btn" type="reset">Reset</button>
      <span class="note">I usually reply within 1–2 days.</span>
    </div>

    <div id="statusOk" class="status ok">
      ✅ Sent! Thanks—I'll review your message and reply.
    </div>
    <div id="statusErr" class="status err">
      ⚠️ Something went wrong. Please try again or email me directly at
      <strong>gabinocasanova30@gmail.com</strong>.
    </div>

    <noscript>
      <p class="note" style="margin-top:12px">
        JavaScript is off. Email me directly:
        <a href="mailto:gabinocasanova30@gmail.com?subject=Collaboration%20Request">gabinocasanova30@gmail.com</a>
      </p>
    </noscript>
  </form>

  <p class="note" style="margin-top:12px">
    For long documents or large datasets, paste a summary here and include a link to your files
    (Google Drive, Dropbox, GitHub, etc.).
  </p>
</main>

<script>
  const FORM_ENDPOINT = "https://formspree.io/f/mrbrzoln";

  const form  = document.getElementById('contactForm');
  const btn   = document.getElementById('sendBtn');
  const ok    = document.getElementById('statusOk');
  const err   = document.getElementById('statusErr');

  function show(el){ el.style.display = 'block'; }
  function hide(el){ el.style.display = 'none'; }

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    hide(ok); hide(err);

    if(!form.checkValidity()){
      form.reportValidity();
      return;
    }

    // Honeypot: if filled, treat as spam but pretend success
    if(form.querySelector('[name="_middle_name"]').value.trim()!==''){
      form.reset();
      show(ok);
      return;
    }

    btn.disabled = true;

    const data = new FormData();
    data.append('name', form.name.value);
    data.append('email', form.email.value);
    if(form.organization.value) data.append('organization', form.organization.value);
    data.append('subject', form.subject.value);
    data.append('message', form.message.value);

    // File upload (optional)
    const fileInput = form.upload;
    if (fileInput && fileInput.files && fileInput.files[0]) {
      data.append('upload', fileInput.files[0]);
    }

    // Formspree metadata
    data.append('_replyto', form.email.value);
    data.append('_subject', form.subject.value || 'New collaboration message');
    data.append('_template', 'table');
    data.append('_to', 'gabinocasanova30@gmail.com');

    if(document.getElementById('copyMe').checked){
      data.append('_cc', form.email.value);
    }

    try{
      const res = await fetch(FORM_ENDPOINT, {
        method:'POST',
        body:data,
        headers:{'Accept':'application/json'}
      });

      if(res.ok){
        form.reset();
        show(ok);
      }else{
        let msg = '⚠️ Something went wrong. Please try again or email me directly at <strong>gabinocasanova30@gmail.com</strong>.';
        try{
          const dataJson = await res.json();
          if(dataJson && dataJson.errors){
            msg = dataJson.errors.map(e=>e.message).join(' / ');
          }
        }catch(_){}
        err.innerHTML = msg;
        show(err);
      }
    }catch(ex){
      err.innerHTML = '⚠️ Network error. Please email me directly at <strong>gabinocasanova30@gmail.com</strong>.';
      show(err);
    }finally{
      btn.disabled = false;
    }
  });

  form.addEventListener('reset', ()=>{
    hide(ok);
    hide(err);
  });
</script>
</body>
</html>
