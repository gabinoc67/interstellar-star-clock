<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Contact & Collaborate — Upload Files to Gabino Casanova</title>
<meta name="description" content="Contact and collaboration form for research input and proposals. Upload files (PDF, DOCX, images, ZIP) and send directly to Gabino Casanova." />
<style>
  :root{
    --bg:#0b1222; --panel:#111a34; --ink:#eaf0ff; --muted:#a7b7e6;
    --border:#213067; --btn:#162455; --btnHover:#1d2e6e; --accent:#8fb4ff;
    --ok:#7bffb1; --warn:#ffd37a; --err:#ff8c8c; --chip:#1d2858;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:920px;margin:0 auto;padding:22px}
  h1{margin:8px 0 6px;font-size:1.9rem}
  p.sub{color:var(--muted);margin:0 0 18px}
  form{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:18px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  .full{grid-column:1 / -1}
  label{display:block;font-size:0.95rem;margin:0 0 6px;color:var(--muted)}
  input,textarea,select{width:100%;padding:12px;border-radius:12px;border:1px solid var(--border);background:#0d1530;color:var(--ink)}
  textarea{min-height:160px;resize:vertical}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .btn{background:var(--btn);border:1px solid var(--border);padding:12px 16px;border-radius:12px;color:var(--ink);cursor:pointer}
  .btn:hover{background:var(--btnHover)}
  .btn:disabled{opacity:.6;cursor:not-allowed}
  .req{color:var(--warn)}
  .status{margin-top:14px;padding:10px 12px;border-radius:10px;border:1px solid var(--border);display:none}
  .status.ok{display:block;background:#0f2a1d;border-color:#1d6b4a;color:var(--ok)}
  .status.err{display:block;background:#2a1313;border-color:#7a2e2e;color:var(--err)}
  .note{font-size:.9rem;color:var(--muted)}
  /* Uploader */
  .drop{border:2px dashed var(--border);border-radius:14px;background:#0b1533;padding:16px;text-align:center;transition:all .15s}
  .drop.drag{border-color:var(--accent);box-shadow:0 0 0 3px rgba(143,180,255,.18) inset}
  .pick{display:inline-block;margin-top:8px}
  .files{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}
  .chip{background:var(--chip);border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:.9rem}
  .chip small{opacity:.8}
  .chip button{margin-left:8px;background:transparent;border:0;color:var(--muted);cursor:pointer}
  .hp{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
</style>
</head>
<body>
<main class="wrap">
  <h1>Contact & Collaborate</h1>
  <p class="sub">
    Need feedback, a collaboration, or a sanity-check on your research? Send a message and
    upload supporting files—everything goes to <strong>gabinocasanova30@gmail.com</strong>.
  </p>

  <form id="contactForm" novalidate>
    <div class="grid">
      <div>
        <label for="name">Your Name <span class="req">*</span></label>
        <input id="name" name="name" type="text" placeholder="Your full name" required />
      </div>

      <div>
        <label for="email">Email <span class="req">*</span></label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required />
      </div>

      <div>
        <label for="org">Organization / School (optional)</label>
        <input id="org" name="organization" type="text" placeholder="Company, lab, or school" />
      </div>

      <div>
        <label for="subject">Subject <span class="req">*</span></label>
        <input id="subject" name="subject" type="text" placeholder="Topic of your message" required />
      </div>

      <div class="full">
        <label for="message">Message <span class="req">*</span></label>
        <textarea id="message" name="message" placeholder="Briefly explain your request, context, and what feedback you want." required></textarea>
      </div>

      <div class="full">
        <label>Upload files (PDF, DOCX, PPTX, images, CSV, ZIP) — up to 5 files / 25 MB total</label>
        <div id="drop" class="drop">
          <div>Drag & drop files here</div>
          <div class="note">or</div>
          <label class="btn pick" for="filesInput">Choose files</label>
          <input id="filesInput" name="files" type="file" multiple class="hp"
                 accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.csv,.txt,.md,.zip,.rar,.7z,.png,.jpg,.jpeg,.gif,.bmp,.tiff,.svg" />
          <div id="filesList" class="files" aria-live="polite"></div>
          <div id="fileNote" class="note" style="margin-top:8px">Tip: for large datasets, share a cloud link in the message.</div>
        </div>
      </div>

      <div class="full">
        <label class="note"><input type="checkbox" id="copyMe" name="copyMe" /> Send me a copy</label>
      </div>

      <!-- Honeypot -->
      <input class="hp" type="text" name="_middle_name" autocomplete="off" tabindex="-1" />
    </div>

    <div class="row" style="margin-top:12px">
      <button id="sendBtn" class="btn" type="submit">Send</button>
      <button class="btn" type="reset">Reset</button>
      <span class="note">I usually reply within 1–2 days.</span>
    </div>

    <div id="statusOk" class="status ok">✅ Sent! Thanks—I'll review your materials and reply.</div>
    <div id="statusErr" class="status err">⚠️ Upload failed or form misconfigured. Please try again or email me directly at <strong>gabinocasanova30@gmail.com</strong>.</div>

    <noscript>
      <p class="note" style="margin-top:12px">
        JavaScript is off. Email me directly:
        <a href="mailto:gabinocasanova30@gmail.com?subject=Collaboration%20Request">gabinocasanova30@gmail.com</a>
      </p>
    </noscript>
  </form>

  <p class="note" style="margin-top:12px">
    Files are transmitted securely via Formspree. On free plans you’ll typically receive a secure download link
    in the email; paid plans can include attachments directly. If your upload is very large, include a cloud link.
  </p>
</main>

<script>
  // ====== SET THIS TO YOUR FORMSPREE ENDPOINT ======
  // Example: "https://formspree.io/f/abcdwxyz"
  const FORM_ENDPOINT = "https://formspree.io/f/YOUR_FORMSPREE_ID";
  // ====== UPLOAD LIMITS (you can change these) ======
  const MAX_FILES = 5;
  const MAX_TOTAL_BYTES = 25 * 1024 * 1024; // 25 MB
  // ===================================================

  const form  = document.getElementById('contactForm');
  const btn   = document.getElementById('sendBtn');
  const ok    = document.getElementById('statusOk');
  const err   = document.getElementById('statusErr');
  const drop  = document.getElementById('drop');
  const input = document.getElementById('filesInput');
  const list  = document.getElementById('filesList');

  let files = [];

  function human(n){
    const u = ['B','KB','MB','GB']; let i=0;
    while(n>=1024 && i<u.length-1){ n/=1024; i++; }
    return `${n.toFixed(n<10?1:0)} ${u[i]}`;
  }

  function renderFiles(){
    list.innerHTML = '';
    if(!files.length) return;
    files.forEach((f,idx)=>{
      const chip = document.createElement('span');
      chip.className = 'chip';
      chip.textContent = `${f.name} `;
      const small = document.createElement('small');
      small.textContent = `(${human(f.size)})`;
      chip.appendChild(small);
      const x = document.createElement('button');
      x.type = 'button';
      x.setAttribute('aria-label','Remove file');
      x.textContent = '✕';
      x.onclick = ()=>{ files.splice(idx,1); renderFiles(); };
      chip.appendChild(x);
      list.appendChild(chip);
    });
  }

  function addFiles(fileList){
    const incoming = Array.from(fileList || []);
    // enforce count
    if(files.length + incoming.length > MAX_FILES){
      alert(`Please upload up to ${MAX_FILES} files.`);
      return;
    }
    // append then size-check
    files.push(...incoming);
    // filter duplicates by name+size
    files = files.filter((f,i,arr)=> i === arr.findIndex(g => g.name===f.name && g.size===f.size));
    // total size
    const total = files.reduce((s,f)=>s+f.size,0);
    if(total > MAX_TOTAL_BYTES){
      alert(`Total size exceeds ${human(MAX_TOTAL_BYTES)}. Please remove some files or send a cloud link.`);
      // rollback the last addition
      files.splice(files.length - incoming.length, incoming.length);
      return;
    }
    renderFiles();
  }

  // drag & drop
  ;['dragenter','dragover'].forEach(evt=>{
    drop.addEventListener(evt, e=>{ e.preventDefault(); e.stopPropagation(); drop.classList.add('drag'); });
  });
  ;['dragleave','drop'].forEach(evt=>{
    drop.addEventListener(evt, e=>{ e.preventDefault(); e.stopPropagation(); drop.classList.remove('drag'); });
  });
  drop.addEventListener('drop', e=>{
    if(e.dataTransfer && e.dataTransfer.files){ addFiles(e.dataTransfer.files); }
  });

  // picker
  input.addEventListener('change', e=> addFiles(e.target.files));

  // submit
  function show(el){ el.style.display = 'block'; }
  function hide(el){ el.style.display = 'none'; }

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    hide(ok); hide(err);

    if(!form.checkValidity()){ form.reportValidity(); return; }
    if(form.querySelector('[name="_middle_name"]').value.trim()!==''){ form.reset(); files=[]; renderFiles(); show(ok); return; }

    btn.disabled = true;

    const data = new FormData();
    data.append('name', form.name.value);
    data.append('email', form.email.value);
    if(form.organization.value) data.append('organization', form.organization.value);
    data.append('subject', form.subject.value);
    data.append('message', form.message.value);

    // route replies to sender + readable subject
    data.append('_replyto', form.email.value);
    data.append('_subject', form.subject.value || 'New collaboration message');
    data.append('_template', 'table');

    if(document.getElementById('copyMe').checked){ data.append('_cc', form.email.value); }

    // attach files (Formspree will host and include link; on paid, may attach)
    files.forEach((f,i)=> data.append('attachments', f, f.name));

    try{
      const res = await fetch(FORM_ENDPOINT, { method:'POST', body:data, headers:{'Accept':'application/json'} });
      if(res.ok){
        form.reset(); files = []; renderFiles(); show(ok);
      }else{
        show(err);
      }
    }catch(ex){
      show(err);
    }finally{
      btn.disabled = false;
    }
  });

  // reset clears file list
  form.addEventListener('reset', ()=>{
    files = []; renderFiles();
    hide(ok); hide(err);
  });
</script>
</body>
</html>
