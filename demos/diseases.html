<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pandemic + Climate Continuum ‚Äì Disease, Ice Cores & Cosmic Clock</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #020617;
      color: #e5e7eb;
    }

    header {
      padding: 16px 24px;
      border-bottom: 1px solid rgba(148,163,184,0.4);
      background:
        radial-gradient(circle at top left, #22c55e 0, #0f172a 40%, #000 100%);
      color: #e5e7eb;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 24px;
      letter-spacing: 0.04em;
    }

    header p {
      margin: 2px 0;
      font-size: 13px;
      color: #bbf7d0;
    }

    .muted {
      color: #9ca3af;
      font-size: 11px;
    }

    .mini {
      font-size: 11px;
    }

    .container {
      display: grid;
      grid-template-columns: minmax(0, 1.9fr) minmax(0, 1.9fr);
      gap: 16px;
      padding: 16px 20px 20px;
    }

    .panel {
      background:
        radial-gradient(circle at top, rgba(34,197,94,0.16), rgba(15,23,42,0.98));
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.35);
      box-shadow: 0 18px 45px rgba(15,23,42,0.9);
      padding: 14px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel.climate-panel {
      background:
        radial-gradient(circle at top, rgba(59,130,246,0.16), rgba(15,23,42,0.98));
    }

    .panel h2 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e5e7eb;
    }

    .panel h2 span {
      font-size: 18px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 12px;
    }

    .controls label {
      font-size: 12px;
      color: #bbf7d0;
    }

    select, input[type="text"] {
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      color: #e5e7eb;
      padding: 4px 10px;
      font-size: 12px;
      outline: none;
    }

    select:focus, input[type="text"]:focus {
      border-color: #22c55e;
      box-shadow: 0 0 0 1px rgba(34,197,94,0.7);
    }

    input[type="text"] {
      min-width: 150px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 12px;
    }

    thead {
      position: sticky;
      top: 0;
      background: linear-gradient(to right,
                 rgba(15,23,42,0.98), rgba(15,23,42,0.9));
      z-index: 1;
    }

    th, td {
      padding: 6px 6px;
      text-align: left;
      border-bottom: 1px solid rgba(22,101,52,0.7);
    }

    th {
      font-weight: 600;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #9ca3af;
    }

    tbody tr {
      cursor: pointer;
      transition: background 0.1s ease, transform 0.08s ease;
    }

    tbody tr:hover {
      background: rgba(34,197,94,0.18);
      transform: translateY(-0.5px);
    }

    tbody tr.active-row {
      background: radial-gradient(circle at left,
                    rgba(52,211,153,0.35), rgba(15,23,42,0.95));
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 1px 7px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid rgba(148,163,184,0.85);
      color: #e5e7eb;
      background: rgba(15,23,42,0.85);
      white-space: nowrap;
    }

    .tag-dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
    }

    /* Pathogen type colors */
    .tag-type-virus .tag-dot { background: #38bdf8; }
    .tag-type-bacteria .tag-dot { background: #22c55e; }
    .tag-type-parasite .tag-dot { background: #a855f7; }
    .tag-type-other .tag-dot { background: #f97316; }

    /* Region colors */
    .tag-region-africa .tag-dot { background: #f97316; }
    .tag-region-asia .tag-dot { background: #22c55e; }
    .tag-region-europe .tag-dot { background: #3b82f6; }
    .tag-region-americas .tag-dot { background: #e11d48; }
    .tag-region-global .tag-dot { background: #eab308; }

    /* Transmission colors */
    .tag-trans-airborne .tag-dot { background: #f97316; }
    .tag-trans-droplet .tag-dot { background: #22c55e; }
    .tag-trans-vector .tag-dot { background: #a855f7; }
    .tag-trans-fluid .tag-dot { background: #38bdf8; }
    .tag-trans-other .tag-dot { background: #9ca3af; }

    /* Control level */
    .tag-control-high {
      border-color: rgba(52,211,153,0.9);
      color: #a7f3d0;
    }
    .tag-control-medium {
      border-color: rgba(234,179,8,0.9);
      color: #facc15;
    }
    .tag-control-low {
      border-color: rgba(248,113,113,0.9);
      color: #fecaca;
    }

    /* Climate category colors */
    .tag-cat-glacial .tag-dot { background: #38bdf8; }
    .tag-cat-interglacial .tag-dot { background: #22c55e; }
    .tag-cat-abrupt .tag-dot { background: #f97316; }
    .tag-cat-anthro .tag-dot { background: #e11d48; }
    .tag-cat-volcanic .tag-dot { background: #a855f7; }

    .coords {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular,
                   Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      color: #bbf7d0;
    }

    .details-header {
      display: flex;
      flex-direction: column;
      gap: 2px;
      margin-bottom: 4px;
    }

    .details-title {
      font-size: 17px;
      font-weight: 600;
    }

    .details-subtitle {
      font-size: 12px;
      color: #9ca3af;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: 4px 0;
    }

    .details-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.3fr);
      gap: 10px;
      margin-top: 4px;
      font-size: 12px;
    }

    .details-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 3px;
    }

    ul {
      padding-left: 16px;
      margin: 3px 0;
    }

    li {
      margin-bottom: 2px;
      line-height: 1.35;
    }

    .scroll {
      max-height: 410px;
      overflow: auto;
      margin: 0 -6px -6px;
      padding: 0 6px 1px;
    }

    .bar-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 2px 0;
    }

    .bar-label {
      font-size: 11px;
      width: 150px;
      color: #9ca3af;
    }

    .bar-track {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(55,65,81,0.9);
      overflow: hidden;
    }

    .bar-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(to right, #22c55e, #f97316);
      width: 50%;
    }

    /* Ice core mini tube in right panel */
    .core-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 6px 0 8px;
    }

    .core-labels {
      font-size: 10px;
      color: #9ca3af;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 120px;
    }

    .core-tube {
      position: relative;
      width: 34px;
      height: 120px;
      border-radius: 999px;
      background: linear-gradient(to bottom,
                 #0ea5e9 0, #1d4ed8 40%, #111827 100%);
      box-shadow: inset 0 0 0 1px rgba(148,163,184,0.6);
      overflow: hidden;
    }

    .core-band {
      position: absolute;
      left: 0;
      width: 100%;
    }

    .core-band.glacial {
      background: linear-gradient(to bottom,
                   rgba(59,130,246,0.8), rgba(30,64,175,0.95));
    }

    .core-band.interglacial {
      background: linear-gradient(to bottom,
                   rgba(45,212,191,0.9), rgba(34,197,94,0.95));
    }

    .core-band.transition {
      background: linear-gradient(to bottom,
                   rgba(249,115,22,0.9), rgba(251,191,36,0.95));
    }

    .core-marker {
      position: absolute;
      left: -8px;
      right: -8px;
      height: 2px;
      background: #f97316;
      box-shadow: 0 0 6px rgba(251,191,36,0.9);
    }

    .core-marker-label {
      font-size: 9px;
      color: #fee2e2;
      position: absolute;
      left: 50%;
      transform: translate(-50%, -140%);
      white-space: nowrap;
      text-shadow: 0 0 4px rgba(15,23,42,0.9);
    }

    @media (max-width: 960px) {
      .container {
        grid-template-columns: minmax(0, 1fr);
      }
      .scroll {
        max-height: 280px;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>Pandemic + Climate Continuum ‚Äì Disease, Ice Cores & Cosmic Clock</h1>
  <p>
    Select a disease outbreak and see its R‚ÇÄ, deaths, and reset impact, plus the matching
    climate state from ice-core data (CO‚ÇÇ, temperature, sea level) and a clean cosmic-clock
    note for Sun‚ÄìEarth‚ÄìMoon geometry. No claim of UFO or planet alignment causing disease ‚Äì
    just timing on your reset clock.
  </p>
  <p class="muted mini">
    Educational / conceptual only. Epidemiology and climate values are approximate ranges.
    Ice-core climate states are simplified; cosmic-clock text does not mean physical
    causation by Moon or planets, only chronology.
  </p>
</header>

<div class="container">
  <section class="panel">
    <h2><span>ü¶†</span> Disease Timeline ¬∑ R‚ÇÄ ¬∑ Region</h2>
    <div class="controls">
      <label>
        Pathogen:
        <select id="typeFilter">
          <option value="all">All types</option>
          <option value="virus">Virus</option>
          <option value="bacteria">Bacteria</option>
          <option value="parasite">Parasite</option>
          <option value="other">Other / mixed</option>
        </select>
      </label>

      <label>
        Origin region:
        <select id="regionFilter">
          <option value="all">Any region</option>
          <option value="Africa">Africa</option>
          <option value="Asia">Asia</option>
          <option value="Europe">Europe</option>
          <option value="Americas">Americas</option>
          <option value="Global">Global / diffuse</option>
        </select>
      </label>

      <label>
        Control tools:
        <select id="controlFilter">
          <option value="all">Any level</option>
          <option value="high">High (vaccine &/or treatment)</option>
          <option value="medium">Medium</option>
          <option value="low">Low / none</option>
        </select>
      </label>

      <label>
        Search:
        <input type="text" id="searchBox" placeholder="disease, region, notes‚Ä¶">
      </label>
    </div>

    <div class="scroll">
      <table>
        <thead>
        <tr>
          <th>Disease / Event</th>
          <th>Years</th>
          <th>Origin</th>
          <th>Pathogen</th>
          <th>R‚ÇÄ</th>
        </tr>
        </thead>
        <tbody id="diseaseTableBody"></tbody>
      </table>
    </div>
  </section>

  <section class="panel climate-panel">
    <h2><span>üåç</span> Outbreak ¬∑ Climate Era ¬∑ Cosmic Clock</h2>
    <div id="detailsContent">
      <p class="muted">
        Select a disease event on the left to see:
      </p>
      <ul class="muted">
        <li><strong>Type of disease</strong>, transmission mode, and R‚ÇÄ band</li>
        <li><strong>Deaths, case-fatality</strong>, and reset impact on humanity</li>
        <li>Matched <strong>ice-core climate state</strong> (CO‚ÇÇ, ŒîT, sea level, era)</li>
        <li>Short verdict: <strong>‚ÄúClimate change factor?‚Äù</strong> (strong, moderate, minor, or negligible)</li>
        <li><strong>Cosmic clock note</strong> ‚Äì how Sun/Earth/Moon geometry frames the timing (no causal UFO claim)</li>
      </ul>
    </div>
  </section>
</div>

<script>
  // ---------- DATASETS ----------
  // climateEvents: simplified ice-core eras relevant for historic disease windows
  // diseases: major outbreaks, each linked to a climate era via climateEraId
  const climateEvents = [
    {
      id: "late_glacial",
      name: "Late Glacial‚ÄìEarly Holocene Transition",
      category: "abrupt",
      ageRangeLabel: "‚âà18‚Äì11 kyr BP",
      co2Min: 190,
      co2Max: 270,
      tempMin: -4,
      tempMax: 0,
      seaLevelMin: -120,
      seaLevelMax: -10,
      resetImpact: 9,
      description: "World warming out of the last ice age; ice sheets retreat; sea level accelerating upward."
    },
    {
      id: "holocene_optimum",
      name: "Holocene Climate Optimum",
      category: "interglacial",
      ageRangeLabel: "‚âà9‚Äì5 kyr BP",
      co2Min: 260,
      co2Max: 280,
      tempMin: 0,
      tempMax: 0.5,
      seaLevelMin: -5,
      seaLevelMax: 0,
      resetImpact: 7,
      description: "Relatively warm mid-Holocene; stable climate that favors early agriculture and cities."
    },
    {
      id: "lalia",
      name: "Late Antique Little Ice Age",
      category: "abrupt",
      ageRangeLabel: "‚âà536‚Äì660 CE",
      co2Min: 270,
      co2Max: 280,
      tempMin: -0.4,
      tempMax: -0.1,
      seaLevelMin: -0.1,
      seaLevelMax: 0,
      resetImpact: 7,
      description: "Volcanic-triggered cooling and climate instability in Late Antiquity."
    },
    {
      id: "medieval_warm",
      name: "Medieval Climate Anomaly",
      category: "interglacial",
      ageRangeLabel: "‚âà950‚Äì1250 CE",
      co2Min: 275,
      co2Max: 285,
      tempMin: -0.1,
      tempMax: 0.3,
      seaLevelMin: -0.2,
      seaLevelMax: 0.1,
      resetImpact: 5,
      description: "Regional warmth, especially in the North Atlantic; not a global reset but a noticeable wiggle."
    },
    {
      id: "little_ice_age",
      name: "Little Ice Age",
      category: "abrupt",
      ageRangeLabel: "‚âà1300‚Äì1850 CE",
      co2Min: 275,
      co2Max: 285,
      tempMin: -1.0,
      tempMax: -0.3,
      seaLevelMin: -0.2,
      seaLevelMax: -0.05,
      resetImpact: 6,
      description: "Several centuries of regional cooling and glacier advance, especially around the North Atlantic."
    },
    {
      id: "preindustrial",
      name: "Pre-industrial Baseline",
      category: "interglacial",
      ageRangeLabel: "‚âà1850‚Äì1900 CE",
      co2Min: 275,
      co2Max: 285,
      tempMin: 0,
      tempMax: 0,
      seaLevelMin: 0,
      seaLevelMax: 0,
      resetImpact: 5,
      description: "Reference climate state before large-scale fossil fuel burning."
    },
    {
      id: "anthropocene",
      name: "Anthropocene Warming Spike",
      category: "anthro",
      ageRangeLabel: "‚âà1950 CE ‚Äì present",
      co2Min: 310,
      co2Max: 425,
      tempMin: 0.5,
      tempMax: 1.5,
      seaLevelMin: 0.1,
      seaLevelMax: 0.3,
      resetImpact: 9,
      description: "Rapid, human-driven warming with rising sea level and intensifying extremes."
    }
  ];

  const diseases = [
    {
      id: "justinian_plague",
      name: "Plague of Justinian ‚Äì First Recorded Plague Pandemic",
      pathogenType: "bacteria",
      agent: "Yersinia pestis (plague bacillus)",
      transmission: "Flea-borne + respiratory droplets",
      originRegion: "Asia",
      originCountry: "Eastern Mediterranean (Constantinople hit early)",
      lat: 41.0,
      lon: 28.9,
      timeLabel: "‚âà541‚Äì~750 CE",
      firstYear: 541,
      lastYear: 750,
      totalDeathsText: "Roughly 15‚Äì100 million deaths across Mediterranean and Europe (multiple waves).",
      totalDeathsLow: 15000000,
      totalDeathsHigh: 100000000,
      r0Min: 1.1,
      r0Max: 2.5,
      caseFatalityLow: 40,
      caseFatalityHigh: 60,
      durationPattern: "Acute: symptoms over days; local waves months, regional waves years.",
      hasVaccine: false,
      hasTreatment: false,
      controlLevel: 1,
      resetImpact: 8,
      climateEraId: "lalia",
      climateRoleText: "Climate likely added stress (cooler, unstable harvests), but trade routes, rodents and fleas were the main drivers.",
      cosmicClockNote: "Sits in a Late-Antique cooling interval on the clock. Sun‚ÄìEarth geometry is ordinary; the reset comes from ecology, trade and empire density, not special Moon/planet alignment.",
      ufoNote: "No reliable evidence of linked UFO activity; historical chronicles focus on famine and plague, not sky craft."
    },
    {
      id: "black_death",
      name: "Black Death ‚Äì Second Plague Pandemic",
      pathogenType: "bacteria",
      agent: "Yersinia pestis (bubonic / pneumonic plague)",
      transmission: "Flea-borne from rodents + respiratory spread",
      originRegion: "Asia",
      originCountry: "Likely Central Asia, entering Europe via Black Sea ports",
      lat: 44.6,
      lon: 34.3,
      timeLabel: "‚âà1346‚Äì1353 CE (core wave)",
      firstYear: 1346,
      lastYear: 1353,
      totalDeathsText: "‚âà25‚Äì50 million deaths in Europe; perhaps 75‚Äì200 million across Eurasia/North Africa.",
      totalDeathsLow: 25000000,
      totalDeathsHigh: 200000000,
      r0Min: 1.3,
      r0Max: 3.0,
      caseFatalityLow: 30,
      caseFatalityHigh: 60,
      durationPattern: "Untreated cases kill in days‚Äìweek; city waves months, continental wave years.",
      hasVaccine: false,
      hasTreatment: true,
      controlLevel: 4,
      resetImpact: 10,
      climateEraId: "little_ice_age",
      climateRoleText: "Entering Little-Ice-Age‚Äìstyle variability likely stressed crops and rodent habitats, but the dominant signal is trade, crowding and rats.",
      cosmicClockNote: "On the clock, the Black Death is a deep population crater during early Little-Ice-Age cooling ‚Äì a human-systems reset layered onto a modest climate shift.",
      ufoNote: "Medieval comet and ‚Äòfire‚Äô stories exist, but they do not line up cleanly with plague spread and are not evidence of UFO-driven disease."
    },
    {
      id: "old_world_smallpox",
      name: "Smallpox ‚Äì Old-World Burden & Eradication",
      pathogenType: "virus",
      agent: "Variola virus (smallpox)",
      transmission: "Airborne droplets + lesion contact / contaminated items",
      originRegion: "Asia",
      originCountry: "Likely Indian subcontinent / Middle East; then global",
      lat: 25.0,
      lon: 80.0,
      timeLabel: "Ancient ‚Äì 1977 (last natural case)",
      firstYear: -1500,
      lastYear: 1977,
      totalDeathsText: "Hundreds of millions across history; ‚âà300 million in the 20th century alone.",
      totalDeathsLow: 300000000,
      totalDeathsHigh: 500000000,
      r0Min: 3.0,
      r0Max: 6.0,
      caseFatalityLow: 20,
      caseFatalityHigh: 50,
      durationPattern: "Incubation ‚âà10‚Äì14 days; illness 3‚Äì4 weeks.",
      hasVaccine: true,
      hasTreatment: false,
      controlLevel: 10,
      resetImpact: 10,
      climateEraId: "preindustrial",
      climateRoleText: "Climate change plays little direct role; crowding, trade and (later) vaccination coverage dominate.",
      cosmicClockNote: "On your clock, smallpox is a repeating spike that finally fades when humans synchronize vaccine campaigns ‚Äì a civilization choice, not a star-driven event.",
      ufoNote: "No scientific evidence connects smallpox waves with UFO flaps; patterns match human mobility and immunity."
    },
    {
      id: "new_world_smallpox",
      name: "Smallpox in the Americas ‚Äì Post-1492 Epidemics",
      pathogenType: "virus",
      agent: "Variola virus (smallpox)",
      transmission: "Airborne droplets + contact with lesions/items",
      originRegion: "Europe",
      originCountry: "Brought by Europeans to Caribbean and American mainland",
      lat: 19.4,
      lon: -99.1,
      timeLabel: "‚âà1500‚Äì1700 CE (multiple waves)",
      firstYear: 1500,
      lastYear: 1700,
      totalDeathsText: "Roughly 25‚Äì55 million deaths across the Americas from smallpox + other imported diseases.",
      totalDeathsLow: 25000000,
      totalDeathsHigh: 55000000,
      r0Min: 3,
      r0Max: 6,
      caseFatalityLow: 20,
      caseFatalityHigh: 40,
      durationPattern: "Incubation ‚âà10‚Äì14 days; repeated waves over centuries.",
      hasVaccine: true,
      hasTreatment: false,
      controlLevel: 7,
      resetImpact: 10,
      climateEraId: "little_ice_age",
      climateRoleText: "Mass depopulation may have allowed forest regrowth and a slight CO‚ÇÇ dip, but the engine is contact and immunity, not climate forcing.",
      cosmicClockNote: "In your cosmic clock, these epidemics mark a brutal reset where two human worlds reconnect; Sun/Moon cycles only set the calendar, not the cause.",
      ufoNote: "Colonial myths include omens, but nothing robust links these epidemics to UFO or planetary alignments."
    },
    {
      id: "third_cholera",
      name: "Third Cholera Pandemic",
      pathogenType: "bacteria",
      agent: "Vibrio cholerae",
      transmission: "Water-borne (contaminated drinking water/food)",
      originRegion: "Asia",
      originCountry: "Ganges delta, India",
      lat: 22.6,
      lon: 88.4,
      timeLabel: "‚âà1846‚Äì1860 CE",
      firstYear: 1846,
      lastYear: 1860,
      totalDeathsText: "Millions worldwide; >1 million in the Russian Empire alone.",
      totalDeathsLow: 1000000,
      totalDeathsHigh: 3000000,
      r0Min: 1.2,
      r0Max: 2.0,
      caseFatalityLow: 10,
      caseFatalityHigh: 50,
      durationPattern: "Severe cases can kill in hours‚Äìdays; outbreaks weeks‚Äìmonths.",
      hasVaccine: true,
      hasTreatment: true,
      controlLevel: 7,
      resetImpact: 7,
      climateEraId: "preindustrial",
      climateRoleText: "Local climate and floods influence water quality, but the big lever is sanitation and sewage handling in growing cities.",
      cosmicClockNote: "On the clock, cholera rides 19th-century river, rail and ship networks more than planetary or lunar patterns.",
      ufoNote: "No link to UFOs; cholera tracks contaminated water sources."
    },
    {
      id: "spanish_flu_1918",
      name: "1918‚Äì1920 Influenza Pandemic (\"Spanish Flu\")",
      pathogenType: "virus",
      agent: "Influenza A (H1N1)",
      transmission: "Airborne / droplets",
      originRegion: "Global",
      originCountry: "Origin debated (U.S., Europe or elsewhere)",
      lat: null,
      lon: null,
      timeLabel: "1918‚Äì1920 CE",
      firstYear: 1918,
      lastYear: 1920,
      totalDeathsText: "‚âà25‚Äì50 million deaths; some estimates up to 100 million.",
      totalDeathsLow: 25000000,
      totalDeathsHigh: 100000000,
      r0Min: 1.3,
      r0Max: 2.7,
      caseFatalityLow: 1,
      caseFatalityHigh: 5,
      durationPattern: "Individual illness 1‚Äì2 weeks; global waves over ~2 years.",
      hasVaccine: false,
      hasTreatment: false,
      controlLevel: 2,
      resetImpact: 9,
      climateEraId: "preindustrial",
      climateRoleText: "Climate and seasons modulate flu waves, but World War I troop movement and crowding were far more important.",
      cosmicClockNote: "In your cosmic map, this is a fast pulse on top of a still-stable pre-Anthropocene climate ring.",
      ufoNote: "No structured UFO pattern tied to 1918 flu; the timeline follows ships, trains and barracks."
    },
    {
      id: "hiv_aids",
      name: "HIV / AIDS Pandemic",
      pathogenType: "virus",
      agent: "Human immunodeficiency virus (HIV-1/HIV-2)",
      transmission: "Blood & sexual contact, perinatal, needle sharing",
      originRegion: "Africa",
      originCountry: "Central Africa (around present-day DR Congo)",
      lat: -4.3,
      lon: 15.3,
      timeLabel: "1981‚Äìpresent (with earlier silent spread)",
      firstYear: 1981,
      lastYear: null,
      totalDeathsText: "‚âà44 million deaths since the start of the epidemic.",
      totalDeathsLow: 37000000,
      totalDeathsHigh: 55000000,
      r0Min: 2,
      r0Max: 5,
      caseFatalityLow: 80,
      caseFatalityHigh: 100,
      durationPattern: "Untreated, progression over 5‚Äì10+ years; with therapy, near-normal lifespans for many.",
      hasVaccine: false,
      hasTreatment: true,
      controlLevel: 6,
      resetImpact: 8,
      climateEraId: "anthropocene",
      climateRoleText: "Climate change is not a primary driver; risk comes from blood products, sexual networks, poverty and health systems.",
      cosmicClockNote: "On your clock, HIV is a multi-decade low-frequency wave during the Anthropocene warming era.",
      ufoNote: "No evidence HIV was introduced by UFOs or non-human actors; it fits a zoonotic-spillover pattern."
    },
    {
      id: "covid_19",
      name: "COVID-19 Pandemic",
      pathogenType: "virus",
      agent: "SARS-CoV-2 (coronavirus)",
      transmission: "Airborne / droplets, short-range aerosols",
      originRegion: "Asia",
      originCountry: "Wuhan region, China (index cluster)",
      lat: 30.6,
      lon: 114.3,
      timeLabel: "2019‚Äìpresent (endemic phase)",
      firstYear: 2019,
      lastYear: null,
      totalDeathsText: "‚âà7 million confirmed deaths; excess-death estimates 15‚Äì20+ million.",
      totalDeathsLow: 7000000,
      totalDeathsHigh: 20000000,
      r0Min: 2,
      r0Max: 8,
      caseFatalityLow: 0.2,
      caseFatalityHigh: 3,
      durationPattern: "Acute infection 1‚Äì3 weeks; some long-COVID cases months‚Äìyears.",
      hasVaccine: true,
      hasTreatment: true,
      controlLevel: 8,
      resetImpact: 9,
      climateEraId: "anthropocene",
      climateRoleText: "Climate change is a background factor (deforestation, wildlife contact, urban heat), but immediate drivers are crowding, travel and variant evolution.",
      cosmicClockNote: "On the cosmic clock, COVID-19 is a sharp spike in the Anthropocene ring ‚Äì a stress test of global coordination, not a lunar-alignment event.",
      ufoNote: "Increased UFO talk during 2020 reflects anxiety and media, not a proven causal link."
    },
    {
      id: "measles",
      name: "Measles ‚Äì Hyper-Contagious Childhood Virus",
      pathogenType: "virus",
      agent: "Measles morbillivirus",
      transmission: "Airborne (virus lingers in air for hours)",
      originRegion: "Global",
      originCountry: "Ancient Eurasia; now worldwide",
      lat: null,
      lon: null,
      timeLabel: "Endemic for centuries; vaccine era ‚âà1960s‚Äìpresent",
      firstYear: 1000,
      lastYear: null,
      totalDeathsText: "Hundreds of thousands of deaths per year historically; vaccination has averted tens of millions of deaths.",
      totalDeathsLow: 57000000,
      totalDeathsHigh: 100000000,
      r0Min: 12,
      r0Max: 18,
      caseFatalityLow: 0.1,
      caseFatalityHigh: 5,
      durationPattern: "Incubation 10‚Äì14 days; rash 7‚Äì10 days; complications in some cases.",
      hasVaccine: true,
      hasTreatment: false,
      controlLevel: 9,
      resetImpact: 6,
      climateEraId: "anthropocene",
      climateRoleText: "Climate has minor influence; measles mainly explodes when vaccination coverage drops.",
      cosmicClockNote: "On your clock, measles is like a repeating high-frequency spike whenever immunity gaps open.",
      ufoNote: "No evidence linking measles outbreaks to UFOs or planet alignment."
    },
    {
      id: "malaria",
      name: "Malaria",
      pathogenType: "parasite",
      agent: "Plasmodium spp. (e.g., P. falciparum)",
      transmission: "Vector-borne (Anopheles mosquitoes)",
      originRegion: "Africa",
      originCountry: "Likely African tropics; now tropics/subtropics",
      lat: 0.0,
      lon: 25.0,
      timeLabel: "Ancient ‚Äì present",
      firstYear: -2000,
      lastYear: null,
      totalDeathsText: "Likely more human deaths than any other single pathogen across history; hundreds of thousands per year today.",
      totalDeathsLow: 300000000,
      totalDeathsHigh: 1000000000,
      r0Min: 1,
      r0Max: 4,
      caseFatalityLow: 0.1,
      caseFatalityHigh: 20,
      durationPattern: "Repeated fevers over weeks‚Äìmonths; chronic in endemic regions.",
      hasVaccine: true,
      hasTreatment: true,
      controlLevel: 6,
      resetImpact: 9,
      climateEraId: "anthropocene",
      climateRoleText: "Here climate change is a real factor: warming and rainfall shifts can move mosquito ranges, but nets, medicine and housing can still break transmission.",
      cosmicClockNote: "On your cosmic clock, malaria is a long bass note that tracks tropical climate zones; orbital cycles set the background, but local land use decides risk.",
      ufoNote: "No credible UFO correlation; mosquito ecology and human housing explain the patterns."
    }
  ];
  // ---------- HELPERS ----------

  function pathogenTagClass(type) {
    if (type === "virus") return "tag tag-type-virus";
    if (type === "bacteria") return "tag tag-type-bacteria";
    if (type === "parasite") return "tag tag-type-parasite";
    return "tag tag-type-other";
  }

  function regionTagClass(region) {
    if (region === "Africa") return "tag tag-region-africa";
    if (region === "Asia") return "tag tag-region-asia";
    if (region === "Europe") return "tag tag-region-europe";
    if (region === "Americas") return "tag tag-region-americas";
    return "tag tag-region-global";
  }

  function transmissionTagClass(trans) {
    const t = (trans || "").toLowerCase();
    if (t.includes("airborne")) return "tag tag-trans-airborne";
    if (t.includes("droplet") || t.includes("contact")) return "tag tag-trans-droplet";
    if (t.includes("vector")) return "tag tag-trans-vector";
    if (t.includes("blood") || t.includes("sexual") || t.includes("fluid")) return "tag tag-trans-fluid";
    return "tag tag-trans-other";
  }

  function controlTagClass(level) {
    if (level >= 7) return "tag tag-control-high";
    if (level >= 4) return "tag tag-control-medium";
    return "tag tag-control-low";
  }

  function categoryTagClass(cat) {
    if (cat === "glacial") return "tag tag-cat-glacial";
    if (cat === "interglacial") return "tag tag-cat-interglacial";
    if (cat === "abrupt") return "tag tag-cat-abrupt";
    if (cat === "anthro") return "tag tag-cat-anthro";
    if (cat === "volcanic") return "tag tag-cat-volcanic";
    return "tag";
  }

  function controlLabel(level, hasVaccine, hasTreatment) {
    if (level >= 7) {
      if (hasVaccine && hasTreatment) return "High: vaccine + effective treatment";
      if (hasVaccine) return "High: vaccine as main shield";
      if (hasTreatment) return "High: strong treatment reduces deaths";
    }
    if (level >= 4) return "Medium: some tools, still dangerous";
    return "Low: little or no control at the time";
  }

  function formatR0(d) {
    if (!d.r0Min && !d.r0Max) return "Unknown";
    if (d.r0Min && d.r0Max) return `${d.r0Min.toFixed(1)}‚Äì${d.r0Max.toFixed(1)}`;
    if (d.r0Max) return `‚âà${d.r0Max.toFixed(1)}`;
    return `‚âà${d.r0Min.toFixed(1)}`;
  }

  function formatLatLon(lat, lon) {
    if (lat == null || lon == null) return "Global / diffuse origin";
    const ns = lat >= 0 ? "N" : "S";
    const ew = lon >= 0 ? "E" : "W";
    return `${Math.abs(lat).toFixed(1)}¬∞${ns}, ${Math.abs(lon).toFixed(1)}¬∞${ew}`;
  }

  // normalize for bars
  function r0Width(d) {
    const maxR0 = d.r0Max || d.r0Min || 0;
    const norm = Math.min(20, maxR0);
    return (norm / 20) * 100;
  }

  function cfrWidth(d) {
    const maxCfr = d.caseFatalityHigh || d.caseFatalityLow || 0;
    const norm = Math.min(80, maxCfr);
    return (norm / 80) * 100;
  }

  function controlWidth(d) {
    return (d.controlLevel || 0) * 10;
  }

  function resetWidth(d) {
    return (d.resetImpact || 0) * 10;
  }

  // climate bar widths
  function co2Width(cl) {
    const max = cl.co2Max || cl.co2Min || 0;
    const norm = Math.min(600, Math.max(150, max));
    return ((norm - 150) / (600 - 150)) * 100;
  }

  function tempWidth(cl) {
    const max = Math.max(Math.abs(cl.tempMin || 0), Math.abs(cl.tempMax || 0));
    const norm = Math.min(6, max);
    return (norm / 6) * 100;
  }

  function seaWidth(cl) {
    const max = Math.max(Math.abs(cl.seaLevelMin || 0), Math.abs(cl.seaLevelMax || 0));
    const norm = Math.min(130, max);
    return (norm / 130) * 100;
  }

  function climateResetWidth(cl) {
    return (cl.resetImpact || 0) * 10;
  }

  function climateById(id) {
    return climateEvents.find(c => c.id === id) || null;
  }

  function climateVerdictText(roleText) {
    if (!roleText) return "Climate role: not specified.";
    const t = roleText.toLowerCase();
    if (t.includes("real factor") || t.includes("here climate change is a real factor")) {
      return "Verdict: climate change played a clear supporting role for this disease (for example via mosquitoes or habitat shifts).";
    }
    if (t.includes("little direct") || t.includes("minor") || t.includes("background factor")) {
      return "Verdict: climate was mostly background ‚Äì human behavior and immunity did most of the work.";
    }
    if (t.includes("likely added stress") || t.includes("added stress")) {
      return "Verdict: climate added stress on crops/ecosystems but did not create the pathogen.";
    }
    return "Verdict: climate influence is complex or uncertain; main causes are still ecology, trade and health systems.";
  }

  function cow2(val) {
    return val == null ? "‚Äî" : val.toFixed(1);
  }

  // ---------- UI WIRING ----------

  const tbody = document.getElementById("diseaseTableBody");
  const detailsContent = document.getElementById("detailsContent");
  const typeFilter = document.getElementById("typeFilter");
  const regionFilter = document.getElementById("regionFilter");
  const controlFilter = document.getElementById("controlFilter");
  const searchBox = document.getElementById("searchBox");

  function renderTable() {
    const t = typeFilter.value;
    const region = regionFilter.value;
    const control = controlFilter.value;
    const q = (searchBox.value || "").toLowerCase();

    tbody.innerHTML = "";

    const filtered = diseases.filter(d => {
      if (t !== "all" && d.pathogenType !== t) return false;
      if (region !== "all" && d.originRegion !== region) return false;

      if (control !== "all") {
        if (control === "high" && d.controlLevel < 7) return false;
        if (control === "medium" && (d.controlLevel < 4 || d.controlLevel >= 7)) return false;
        if (control === "low" && d.controlLevel >= 4) return false;
      }

      if (q) {
        const hay = (
          d.name + " " +
          d.agent + " " +
          d.transmission + " " +
          d.originRegion + " " +
          d.originCountry + " " +
          d.description + " " +
          (d.climateRoleText || "") +
          (d.cosmicClockNote || "")
        ).toLowerCase();
        if (!hay.includes(q)) return false;
      }
      return true;
    });

    filtered.forEach(d => {
      const tr = document.createElement("tr");
      tr.dataset.id = d.id;

      const tdName = document.createElement("td");
      tdName.textContent = d.name;

      const tdYears = document.createElement("td");
      tdYears.textContent = d.timeLabel;

      const tdOrigin = document.createElement("td");
      const spanRegion = document.createElement("span");
      spanRegion.className = regionTagClass(d.originRegion);
      const dotR = document.createElement("span");
      dotR.className = "tag-dot";
      const labelR = document.createElement("span");
      labelR.textContent = d.originRegion === "Global" ? "Global" : d.originRegion;
      spanRegion.appendChild(dotR);
      spanRegion.appendChild(labelR);
      tdOrigin.appendChild(spanRegion);

      const tdPath = document.createElement("td");
      const spanPath = document.createElement("span");
      spanPath.className = pathogenTagClass(d.pathogenType);
      const dotP = document.createElement("span");
      dotP.className = "tag-dot";
      const labelP = document.createElement("span");
      labelP.textContent = d.pathogenType.charAt(0).toUpperCase() + d.pathogenType.slice(1);
      spanPath.appendChild(dotP);
      spanPath.appendChild(labelP);
      tdPath.appendChild(spanPath);

      const tdR0 = document.createElement("td");
      tdR0.textContent = formatR0(d);

      tr.appendChild(tdName);
      tr.appendChild(tdYears);
      tr.appendChild(tdOrigin);
      tr.appendChild(tdPath);
      tr.appendChild(tdR0);

      tr.addEventListener("click", () => {
        document.querySelectorAll("#diseaseTableBody tr").forEach(r => r.classList.remove("active-row"));
        tr.classList.add("active-row");
        renderDetails(d);
      });

      tbody.appendChild(tr);
    });

    if (!filtered.length) {
      const tr = document.createElement("tr");
      const td = document.createElement("td");
      td.colSpan = 5;
      td.className = "muted";
      td.textContent = "No disease events match the current filters.";
      tr.appendChild(td);
      tbody.appendChild(tr);
    }
  }

  function renderDetails(d) {
    const r0Label = formatR0(d);
    const r0W = r0Width(d);
    const cfrW = cfrWidth(d);
    const ctlW = controlWidth(d);
    const resetW = resetWidth(d);

    const ctlClass = controlTagClass(d.controlLevel);
    const ctlText = controlLabel(d.controlLevel, d.hasVaccine, d.hasTreatment);
    const transClass = transmissionTagClass(d.transmission);
    const latlon = formatLatLon(d.lat, d.lon);

    const vaccText = d.hasVaccine ? "Yes" : "No";
    const treatText = d.hasTreatment ? "Yes" : "No";

    const cl = climateById(d.climateEraId);
    const climateVerdict = climateVerdictText(d.climateRoleText || "");
    const climateName = cl ? cl.name : "Multiple / not assigned";
    const climateCat = cl ? cl.category : null;
    const co2W = cl ? co2Width(cl) : 0;
    const tW = cl ? tempWidth(cl) : 0;
    const seaW = cl ? seaWidth(cl) : 0;
    const cResetW = cl ? climateResetWidth(cl) : 0;

    const coreBands = `
      <div class="core-band interglacial" style="top:0; height:35%;"></div>
      <div class="core-band transition" style="top:35%; height:15%;"></div>
      <div class="core-band glacial" style="top:50%; height:50%;"></div>
    `;

    detailsContent.innerHTML = `
      <div class="details-header">
        <div class="details-title">${d.name}</div>
        <div class="details-subtitle">
          ${d.timeLabel} ¬∑ ${d.originCountry || d.originRegion} ¬∑
          <span class="coords">${latlon}</span>
        </div>
      </div>

      <div class="pill-row">
        <span class="${pathogenTagClass(d.pathogenType)}">
          <span class="tag-dot"></span>
          <span>${d.agent}</span>
        </span>

        <span class="${transClass}">
          <span class="tag-dot"></span>
          <span>${d.transmission}</span>
        </span>

        <span class="${ctlClass}">
          <span class="tag-dot"></span>
          <span>${ctlText}</span>
        </span>
      </div>

      <div class="details-grid">
        <div>
          <div class="details-section-title">Disease Metrics ¬∑ R‚ÇÄ ¬∑ Reset</div>

          <div class="bar-row">
            <div class="bar-label">R‚ÇÄ (spread rate)</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${r0W.toFixed(1)}%;"></div>
            </div>
          </div>
          <p class="mini">
            Approx R‚ÇÄ: <strong>${r0Label}</strong> (context-dependent).
          </p>

          <div class="bar-row">
            <div class="bar-label">Case-fatality (max)</div>
            <div class="bar-track">
              <div class="bar-fill"
                   style="width:${cfrW.toFixed(1)}%;
                          background:linear-gradient(to right,#ef4444,#f97316);"></div>
            </div>
          </div>
          <p class="mini">
            Case-fatality: <strong>${d.caseFatalityLow ?? "?"}‚Äì${d.caseFatalityHigh ?? "?"}%</strong>
            (varies with age, nutrition and care).
          </p>

          <div class="bar-row">
            <div class="bar-label">Medical control tools</div>
            <div class="bar-track">
              <div class="bar-fill"
                   style="width:${ctlW.toFixed(1)}%;
                          background:linear-gradient(to right,#22c55e,#0ea5e9);"></div>
            </div>
          </div>
          <p class="mini">
            Vaccine: <strong>${vaccText}</strong> ¬∑ Treatment: <strong>${treatText}</strong>
          </p>

          <div class="bar-row">
            <div class="bar-label">Reset impact (humans)</div>
            <div class="bar-track">
              <div class="bar-fill"
                   style="width:${resetW.toFixed(1)}%;
                          background:linear-gradient(to right,#22c55e,#a855f7);"></div>
            </div>
          </div>
          <p class="mini">
            Reset score (1‚Äì10): <strong>${d.resetImpact}</strong> ‚Äì 10 = Black-Death-level demographic shock.
          </p>

          <ul>
            <li><strong>Typical course:</strong> ${d.durationPattern}</li>
            <li><strong>Total deaths (estimate):</strong> ${d.totalDeathsText}</li>
          </ul>
        </div>

        <div>
          <div class="details-section-title">Matched Climate Era ¬∑ Ice-Core Data</div>

          <div class="core-wrap">
            <div class="core-labels">
              <span>Surface / recent air</span>
              <span>Mid-depth Holocene</span>
              <span>Deeper glacial bands</span>
            </div>
            <div class="core-tube">
              ${coreBands}
              <div class="core-marker" style="top:35%;">
                <div class="core-marker-label">
                  ${cl ? cl.ageRangeLabel : "mixed eras"}
                </div>
              </div>
            </div>
          </div>

          <p class="mini">
            <strong>Climate era:</strong>
            <span class="${climateCat ? categoryTagClass(climateCat) : "tag"}">
              <span class="tag-dot"></span>
              <span>${climateName}</span>
            </span>
          </p>

          <div class="bar-row">
            <div class="bar-label">CO‚ÇÇ (ppm)</div>
            <div class="bar-track">
              <div class="bar-fill"
                   style="width:${co2W.toFixed(1)}%;"></div>
            </div>
          </div>
          <p class="mini">
            Approx CO‚ÇÇ: <strong>${cl ? `${Math.round(cl.co2Min)}‚Äì${Math.round(cl.co2Max)} ppm` : "varies across eras"}</strong>.
          </p>

          <div class="bar-row">
            <div class="bar-label">ŒîT vs pre-industrial (¬∞C)</div>
            <div class="bar-track">
              <div class="bar-fill"
                   style="width:${tW.toFixed(1)}%;
                          background:linear-gradient(to right,#0ea5e9,#f97316);"></div>
            </div>
          </div>
          <p class="mini">
            Global ŒîT: <strong>${cl ? `${cow2(cl.tempMin)} to ${cow2(cl.tempMax)} ¬∞C` : "varies"} </strong> (approx).
          </p>

          <div class="bar-row">
            <div class="bar-label">Sea level (m)</div>
            <div class="bar-track">
              <div class="bar-fill"
                   style="width:${seaW.toFixed(1)}%;
                          background:linear-gradient(to right,#22c55e,#6366f1);"></div>
            </div>
          </div>
          <p class="mini">
            Sea-level shift: <strong>${cl ? `${cl.seaLevelMin} to ${cl.seaLevelMax} m vs modern` : "varies"}</strong>.
          </p>

          <div class="bar-row">
            <div class="bar-label">Climate reset strength</div>
            <div class="bar-track">
              <div class="bar-fill"
                   style="width:${cResetW.toFixed(1)}%;
                          background:linear-gradient(to right,#22c55e,#a855f7);"></div>
            </div>
          </div>
          <p class="mini">
            Climate reset score (1‚Äì10): <strong>${cl ? cl.resetImpact : "‚Äî"}</strong>.
          </p>

          <p class="mini">
            <strong>Climate change factor:</strong> ${d.climateRoleText || "Not specified."}
          </p>
          <p class="mini">
            ${climateVerdict}
          </p>

          <div class="details-section-title">Cosmic Clock ¬∑ Sun ¬∑ Moon ¬∑ Planets</div>
          <p class="mini">
            <strong>Cosmic clock note:</strong> ${d.cosmicClockNote}
          </p>
          <p class="mini">
            <strong>Alignment note:</strong> In your framework you can mark the Sun‚ÄìEarth‚ÄìMoon position for the
            outbreak start year on the clock ring. Scientifically, there is
            <strong>no evidence</strong> that specific Moon or planet alignments cause these diseases ‚Äì they simply
            share the same time coordinate.
          </p>
          <p class="mini">
            <strong>UFO / anomaly note:</strong> ${d.ufoNote}
          </p>
        </div>
      </div>

      <p class="muted mini" style="margin-top:6px;">
        ‚ö†Ô∏è This tool links disease history to climate and your cosmic-clock view. It is not predicting future
        outbreaks, and it does not claim that UFOs or planet alignments cause disease. The strong drivers are
        ecology, climate, trade, behavior and health systems.
      </p>
    `;
  }

  typeFilter.addEventListener("change", renderTable);
  regionFilter.addEventListener("change", renderTable);
  controlFilter.addEventListener("change", renderTable);
  searchBox.addEventListener("input", renderTable);

  // Initial table
  renderTable();
</script>
</body>
</html>
