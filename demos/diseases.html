<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pandemic Continuum ‚Äì Disease & Cosmic Clock Map</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #020617;
      color: #e5e7eb;
    }

    header {
      padding: 16px 24px;
      border-bottom: 1px solid rgba(148,163,184,0.4);
      background: radial-gradient(circle at top left, #22c55e 0, #0f172a 40%, #000 100%);
      color: #e5e7eb;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 24px;
      letter-spacing: 0.04em;
    }

    header p {
      margin: 2px 0;
      font-size: 13px;
      color: #bbf7d0;
    }

    .muted {
      color: #9ca3af;
      font-size: 11px;
    }

    .mini {
      font-size: 11px;
    }

    .container {
      display: grid;
      grid-template-columns: minmax(0, 1.9fr) minmax(0, 1.7fr);
      gap: 16px;
      padding: 16px 20px 20px;
    }

    .panel {
      background: radial-gradient(circle at top, rgba(34,197,94,0.16), rgba(15,23,42,0.98));
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.35);
      box-shadow: 0 18px 45px rgba(15,23,42,0.9);
      padding: 14px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel h2 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e5e7eb;
    }

    .panel h2 span {
      font-size: 18px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 12px;
    }

    .controls label {
      font-size: 12px;
      color: #bbf7d0;
    }

    select, input[type="text"] {
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      color: #e5e7eb;
      padding: 4px 10px;
      font-size: 12px;
      outline: none;
    }

    select:focus, input[type="text"]:focus {
      border-color: #22c55e;
      box-shadow: 0 0 0 1px rgba(34,197,94,0.7);
    }

    input[type="text"] {
      min-width: 150px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 12px;
    }

    thead {
      position: sticky;
      top: 0;
      background: linear-gradient(to right, rgba(15,23,42,0.98), rgba(15,23,42,0.9));
      z-index: 1;
    }

    th, td {
      padding: 6px 6px;
      text-align: left;
      border-bottom: 1px solid rgba(22,101,52,0.7);
    }

    th {
      font-weight: 600;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #9ca3af;
    }

    tbody tr {
      cursor: pointer;
      transition: background 0.1s ease, transform 0.08s ease;
    }

    tbody tr:hover {
      background: rgba(34,197,94,0.18);
      transform: translateY(-0.5px);
    }

    tbody tr.active-row {
      background: radial-gradient(circle at left, rgba(52,211,153,0.35), rgba(15,23,42,0.95));
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 1px 7px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid rgba(148,163,184,0.85);
      color: #e5e7eb;
      background: rgba(15,23,42,0.85);
      white-space: nowrap;
    }

    .tag-dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
    }

    /* Pathogen type colors */
    .tag-type-virus .tag-dot { background: #38bdf8; }
    .tag-type-bacteria .tag-dot { background: #22c55e; }
    .tag-type-parasite .tag-dot { background: #a855f7; }
    .tag-type-other .tag-dot { background: #f97316; }

    /* Region colors */
    .tag-region-africa .tag-dot { background: #f97316; }
    .tag-region-asia .tag-dot { background: #22c55e; }
    .tag-region-europe .tag-dot { background: #3b82f6; }
    .tag-region-americas .tag-dot { background: #e11d48; }
    .tag-region-global .tag-dot { background: #eab308; }

    /* Transmission colors */
    .tag-trans-airborne .tag-dot { background: #f97316; }
    .tag-trans-droplet .tag-dot { background: #22c55e; }
    .tag-trans-vector .tag-dot { background: #a855f7; }
    .tag-trans-fluid .tag-dot { background: #38bdf8; }
    .tag-trans-other .tag-dot { background: #9ca3af; }

    /* Control level */
    .tag-control-high {
      border-color: rgba(52,211,153,0.9);
      color: #a7f3d0;
    }
    .tag-control-medium {
      border-color: rgba(234,179,8,0.9);
      color: #facc15;
    }
    .tag-control-low {
      border-color: rgba(248,113,113,0.9);
      color: #fecaca;
    }

    .coords {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      color: #bbf7d0;
    }

    .details-header {
      display: flex;
      flex-direction: column;
      gap: 2px;
      margin-bottom: 4px;
    }

    .details-title {
      font-size: 17px;
      font-weight: 600;
    }

    .details-subtitle {
      font-size: 12px;
      color: #9ca3af;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: 4px 0;
    }

    .details-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.1fr);
      gap: 10px;
      margin-top: 4px;
      font-size: 12px;
    }

    .details-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 3px;
    }

    ul {
      padding-left: 16px;
      margin: 3px 0;
    }

    li {
      margin-bottom: 2px;
      line-height: 1.35;
    }

    .scroll {
      max-height: 410px;
      overflow: auto;
      margin: 0 -6px -6px;
      padding: 0 6px 1px;
    }

    .bar-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 2px 0;
    }

    .bar-label {
      font-size: 11px;
      width: 135px;
      color: #9ca3af;
    }

    .bar-track {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(55,65,81,0.9);
      overflow: hidden;
    }

    .bar-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(to right, #22c55e, #f97316);
      width: 50%;
    }

    @media (max-width: 960px) {
      .container {
        grid-template-columns: minmax(0, 1fr);
      }
      .scroll {
        max-height: 280px;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>Pandemic Continuum ‚Äì Disease & Cosmic Clock Map</h1>
  <p>
    Major outbreaks that pushed and reshaped humanity ‚Äì what kind of pathogen they were, how fast they spread (R‚ÇÄ),
    how deadly they were, where they likely started, and how they fit into your cosmic clock idea of ‚Äúresets‚Äù.
  </p>
  <p class="muted mini">
    Educational / conceptual only. Death totals and R‚ÇÄ values are approximate ranges from historical and WHO sources,
    not exact counts. Lat/long are approximate origin points. There is no proven link between specific star / Moon
    positions, UFOs, and disease ‚Äì cosmic notes here are interpretive, not physical ephemeris.
  </p>
</header>

<div class="container">
  <section class="panel">
    <h2><span>ü¶†</span> Major Disease Events on the Human Timeline</h2>
    <div class="controls">
      <label>
        Pathogen:
        <select id="typeFilter">
          <option value="all">All types</option>
          <option value="virus">Virus</option>
          <option value="bacteria">Bacteria</option>
          <option value="parasite">Parasite</option>
          <option value="other">Other / mixed</option>
        </select>
      </label>

      <label>
        Origin region:
        <select id="envFilter">
          <option value="all">Any region</option>
          <option value="Africa">Africa</option>
          <option value="Asia">Asia</option>
          <option value="Europe">Europe</option>
          <option value="Americas">Americas</option>
          <option value="Global">Global / diffuse</option>
        </select>
      </label>

      <label>
        Control tools:
        <select id="modeFilter">
          <option value="all">Any level</option>
          <option value="high">Vaccine + good treatment</option>
          <option value="medium">Some tools, still dangerous</option>
          <option value="low">Little or none at the time</option>
        </select>
      </label>

      <label>
        Search:
        <input type="text" id="searchBox" placeholder="disease, region, notes‚Ä¶">
      </label>
    </div>

    <div class="scroll">
      <table>
        <thead>
        <tr>
          <th>Disease / Event</th>
          <th>Years</th>
          <th>Origin</th>
          <th>Pathogen</th>
          <th>ROT (R‚ÇÄ)</th>
        </tr>
        </thead>
        <tbody id="eventTableBody"></tbody>
      </table>
    </div>
  </section>

  <section class="panel">
    <h2><span>üåå</span> Outbreak Details ¬∑ Death Toll ¬∑ Cosmic Notes</h2>
    <div id="detailsContent">
      <p class="muted">
        Select a disease event on the left to see:
      </p>
      <ul class="muted">
        <li><strong>Pathogen type</strong>, transmission route, and rough R‚ÇÄ (rate of spread)</li>
        <li><strong>Approx deaths</strong>, case-fatality range, and how long infections tend to last</li>
        <li><strong>Origin region, country, lat/long</strong> that anchors it on your cosmic clock map</li>
        <li><strong>Reset impact</strong>: how much it bent history compared to impacts, volcanoes, and climate swings</li>
        <li><strong>Cosmic & UFO notes</strong>: a clean statement that there is no proven causal link, just timing on the clock</li>
      </ul>
    </div>
  </section>
</div>

<!-- PART 2 will add the script block below -->
<script>
  // ---------- Dataset ----------
  // Fields:
  // id, name, pathogenType, agent, transmission, rotCategory,
  // originRegion, originCountry, lat, lon,
  // timeLabel, firstYear, lastYear,
  // totalDeathsText, totalDeathsLow, totalDeathsHigh,
  // r0Min, r0Max,
  // caseFatalityLow, caseFatalityHigh,
  // durationPattern,
  // hasVaccine, hasTreatment, controlLevel (0‚Äì10),
  // resetImpact (0‚Äì10), description, resetNotes,
  // cosmicClockNote, ufoNote

  const diseases = [
    {
      id: "justinian_plague",
      name: "Plague of Justinian ‚Äì First Recorded Plague Pandemic",
      pathogenType: "bacteria",
      agent: "Yersinia pestis (plague bacillus)",
      transmission: "Flea-borne + respiratory droplets",
      rotCategory: "Moderate (clustered in cities)",
      originRegion: "Asia",
      originCountry: "Likely Egypt / Eastern Mediterranean (Constantinople hit early)",
      lat: 41.0,
      lon: 28.9,
      timeLabel: "‚âà541‚Äì~750 CE (multiple waves)",
      firstYear: 541,
      lastYear: 750,
      totalDeathsText: "Often described as ‚Äútens of millions‚Äù across the Mediterranean and Europe; estimates range ~15‚Äì100 million over two centuries.",
      totalDeathsLow: 15000000,
      totalDeathsHigh: 100000000,
      r0Min: 1.1,
      r0Max: 2.5,
      caseFatalityLow: 40,
      caseFatalityHigh: 60,
      durationPattern: "Acute: symptoms over days; local waves lasting months, regional waves over years.",
      hasVaccine: false,
      hasTreatment: false,
      controlLevel: 1,
      resetImpact: 8,
      description: "Early plague pandemic striking the Byzantine Empire and neighbors. Hit crowded trading cities hard, weakening armies, tax systems, and agricultural logistics.",
      resetNotes: "Contributed to long-term weakening of Eastern Rome and shifts of power around the Mediterranean ‚Äì one of the early ‚Äúreset pulses‚Äù before the Black Death. :contentReference[oaicite:0]{index=0}",
      cosmicClockNote: "On your cosmic clock, this is a large human-systems shock driven by trade routes, rodents, and climate variability ‚Äì not a special star alignment.",
      ufoNote: "No reliable historical sources show consistent UFO flaps tied to the start of the Justinian plague."
    },
    {
      id: "black_death",
      name: "Black Death ‚Äì Second Plague Pandemic",
      pathogenType: "bacteria",
      agent: "Yersinia pestis (bubonic / pneumonic plague)",
      transmission: "Flea-borne from rodents + respiratory spread",
      rotCategory: "Moderate‚Äìhigh (in dense towns)",
      originRegion: "Asia",
      originCountry: "Likely Central Asia, arriving in Europe via Black Sea ports",
      lat: 44.6,
      lon: 34.3,
      timeLabel: "‚âà1346‚Äì1353 CE (core wave)",
      firstYear: 1346,
      lastYear: 1353,
      totalDeathsText: "‚âà25‚Äì50 million deaths in Europe; some broader estimates up to 75‚Äì200 million across Eurasia and North Africa. :contentReference[oaicite:1]{index=1}",
      totalDeathsLow: 25000000,
      totalDeathsHigh: 200000000,
      r0Min: 1.3,
      r0Max: 3.0,
      caseFatalityLow: 30,
      caseFatalityHigh: 60,
      durationPattern: "Untreated bubonic cases killed within days to a week; city waves lasted months, continental wave several years.",
      hasVaccine: false,
      hasTreatment: true, // modern era
      controlLevel: 4,
      resetImpact: 10,
      description: "One of the deadliest human events ever recorded, killing a huge fraction of Europe and parts of Asia/North Africa. Triggered labor shortages, social unrest, religious movements, and big economic realignments.",
      resetNotes: "In your reset language, this is a ‚Äúdeep crater‚Äù in the human population timeline ‚Äì comparable in demographic effect to large volcanic winters or regional climate shocks. :contentReference[oaicite:2]{index=2}",
      cosmicClockNote: "No known special alignment of Sun, Moon, or stars drove this. But on a cosmic clock map, you could mark 1347‚Äì1351 as a cluster of dark ticks, where dense trade networks allowed a rodent-flea system to smash through human defenses.",
      ufoNote: "Medieval sky stories exist, but there is no consistent, verifiable UFO pattern that matches the true spread of plague."
    },
    {
      id: "new_world_smallpox",
      name: "Smallpox in the Americas ‚Äì Post-1492 \"Virgin Soil\" Epidemics",
      pathogenType: "virus",
      agent: "Variola virus (smallpox)",
      transmission: "Airborne droplets + contact with lesions / contaminated items",
      rotCategory: "Moderate‚Äìhigh",
      originRegion: "Europe",
      originCountry: "Brought by Europeans into the Caribbean & mainland Americas",
      lat: 19.4,
      lon: -99.1,
      timeLabel: "‚âà1500‚Äì1700 CE (multiple waves)",
      firstYear: 1500,
      lastYear: 1700,
      totalDeathsText: "Often estimated 25‚Äì55 million deaths in the Americas from smallpox and other Eurasian diseases, wiping out up to 80‚Äì95% of some Indigenous populations. :contentReference[oaicite:3]{index=3}",
      totalDeathsLow: 25000000,
      totalDeathsHigh: 55000000,
      r0Min: 3,
      r0Max: 6,
      caseFatalityLow: 20,
      caseFatalityHigh: 40,
      durationPattern: "Incubation ‚âà10‚Äì14 days; illness 3‚Äì4 weeks. Local outbreaks lasted months; continental impact over centuries of repeated waves.",
      hasVaccine: true,
      hasTreatment: false,
      controlLevel: 7,
      resetImpact: 10,
      description: "Smallpox was a primary driver of mass depopulation in the Americas after 1492, collapsing societies, economies, and political systems and enabling European conquest.",
      resetNotes: "On the human reset scale, these epidemics are a seismic shock: population loss so large that forests regrew and may have even slightly cooled global climate. :contentReference[oaicite:4]{index=4}",
      cosmicClockNote: "Cosmic clocks here highlight the timing of trans-oceanic contact and trade more than astronomy. The disease front follows ships and roads, not constellations.",
      ufoNote: "No systematic link to UFO events; social chaos and colonization generated many myths, but not a credible UFO-disease correlation."
    },
    {
      id: "third_cholera_pandemic",
      name: "Third Cholera Pandemic",
      pathogenType: "bacteria",
      agent: "Vibrio cholerae",
      transmission: "Water-borne (contaminated drinking water / food)",
      rotCategory: "Moderate (explosive where sanitation was poor)",
      originRegion: "Asia",
      originCountry: "Ganges delta, India",
      lat: 22.6,
      lon: 88.4,
      timeLabel: "‚âà1846‚Äì1860 CE",
      firstYear: 1846,
      lastYear: 1860,
      totalDeathsText: "Millions of deaths worldwide; over 1 million in the Russian Empire, tens of thousands in Britain and other regions. :contentReference[oaicite:5]{index=5}",
      totalDeathsLow: 1000000,
      totalDeathsHigh: 3000000,
      r0Min: 1.2,
      r0Max: 2.0,
      caseFatalityLow: 10,
      caseFatalityHigh: 50,
      durationPattern: "Untreated severe cases can kill in hours‚Äìdays; community outbreaks typically last weeks‚Äìmonths.",
      hasVaccine: true,
      hasTreatment: true,
      controlLevel: 7,
      resetImpact: 7,
      description: "Cholera rode 19th-century trade and war routes, exposing the deadly impact of contaminated water and crowded urbanization. It also pushed advances in public health and sanitation.",
      resetNotes: "Less of a global ‚Äúextinction-style‚Äù reset, more a forcing mechanism that taught cities about sewage, clean water, and epidemiology (John Snow‚Äôs pump).",
      cosmicClockNote: "On a cosmic clock, cholera aligns with the Industrial Age ‚Äì steamships and railroads become new meridians for disease.",
      ufoNote: "Again, no solid UFO correlation; rumors emerge whenever fear is high, but data tracks water and trade, not sky objects."
    },
    {
      id: "spanish_flu_1918",
      name: "1918‚Äì1920 Influenza Pandemic (\"Spanish Flu\")",
      pathogenType: "virus",
      agent: "Influenza A (H1N1)",
      transmission: "Airborne / droplets",
      rotCategory: "Moderate (R‚ÇÄ ‚âà1.3‚Äì2.7, depending on setting) :contentReference[oaicite:6]{index=6}",
      originRegion: "Global",
      originCountry: "Origin debated (U.S., Europe, or elsewhere ‚Äì unresolved)",
      lat: null,
      lon: null,
      timeLabel: "1918‚Äì1920 CE",
      firstYear: 1918,
      lastYear: 1920,
      totalDeathsText: "‚âà20‚Äì50 million deaths worldwide; some estimates higher. :contentReference[oaicite:7]{index=7}",
      totalDeathsLow: 20000000,
      totalDeathsHigh: 50000000,
      r0Min: 1.3,
      r0Max: 2.7,
      caseFatalityLow: 1,
      caseFatalityHigh: 5,
      durationPattern: "Individual illness ~1‚Äì2 weeks; global waves over ~2 years in multiple surges.",
      hasVaccine: false,
      hasTreatment: false,
      controlLevel: 2,
      resetImpact: 9,
      description: "Explosive flu pandemic overlapping with World War I. It killed more people than the war itself and hit young adults especially hard, altering demographics, economies, and politics.",
      resetNotes: "On your reset scale: a fast-moving respiratory shock that rides troop movements, trenches, and ships rather than tectonics or impacts.",
      cosmicClockNote: "Solar cycles and seasons modulate flu, but there‚Äôs no evidence of a special star or Moon alignment. The key geometry is trenches, barracks, and crowded trains.",
      ufoNote: "No known structured UFO outbreak tied to 1918 flu ‚Äì human war activity dominates the narrative."
    },
    {
      id: "hiv_aids",
      name: "HIV / AIDS Pandemic",
      pathogenType: "virus",
      agent: "Human immunodeficiency virus (HIV-1/HIV-2)",
      transmission: "Blood & sexual contact, perinatal, needle sharing",
      rotCategory: "Slow but persistent (R‚ÇÄ varies by network)",
      originRegion: "Africa",
      originCountry: "Central Africa (likely around present-day DR Congo)",
      lat: -4.3,
      lon: 15.3,
      timeLabel: "1981‚Äìpresent (with earlier unnoticed spread ~1920s+)",
      firstYear: 1981,
      lastYear: null,
      totalDeathsText: "‚âà44 million deaths since start of the epidemic. :contentReference[oaicite:8]{index=8}",
      totalDeathsLow: 40000000,
      totalDeathsHigh: 50000000,
      r0Min: 2,
      r0Max: 5,
      caseFatalityLow: 80,
      caseFatalityHigh: 100,
      durationPattern: "Untreated infection often progresses over 5‚Äì10+ years; with modern therapy many people live near-normal lifespans.",
      hasVaccine: false,
      hasTreatment: true,
      controlLevel: 6,
      resetImpact: 8,
      description: "A chronic viral pandemic that reshaped medicine, public health, sexual culture, and stigma. Antiretroviral therapy turned HIV from an almost certain death sentence into a manageable chronic condition for many, but millions still die and funding cuts are reversing progress.",
      resetNotes: "On the reset dial, HIV is a slow-burning crisis that forces new ethics, testing systems, and global health infrastructure.",
      cosmicClockNote: "Your cosmic clock can treat HIV as a long, low-frequency wave: decades of impact, intertwined with globalization and blood product networks, not with planetary alignment.",
      ufoNote: "No scientifically credible evidence that UFOs or non-human intelligences introduced or steered HIV. It behaves like a zoonotic spillover scaled by human behavior. :contentReference[oaicite:9]{index=9}"
    },
    {
      id: "covid_19",
      name: "COVID-19 Pandemic",
      pathogenType: "virus",
      agent: "SARS-CoV-2 (coronavirus)",
      transmission: "Airborne / droplets, short-range aerosols; some surface contribution",
      rotCategory: "High (R‚ÇÄ ‚âà2‚Äì3 in early strains; higher in later variants) :contentReference[oaicite:10]{index=10}",
      originRegion: "Asia",
      originCountry: "Wuhan region, China (index cluster)",
      lat: 30.6,
      lon: 114.3,
      timeLabel: "2019‚Äìpresent (post-peak endemic phase)",
      firstYear: 2019,
      lastYear: null,
      totalDeathsText: "‚âà7 million confirmed deaths reported to WHO; excess-death studies suggest 15‚Äì20+ million total. :contentReference[oaicite:11]{index=11}",
      totalDeathsLow: 7000000,
      totalDeathsHigh: 20000000,
      r0Min: 2,
      r0Max: 8,
      caseFatalityLow: 0.2,
      caseFatalityHigh: 3,
      durationPattern: "Acute infection over 1‚Äì3 weeks; some people develop long-COVID lasting months or years.",
      hasVaccine: true,
      hasTreatment: true,
      controlLevel: 8,
      resetImpact: 9,
      description: "Respiratory pandemic that locked down cities worldwide, disrupted supply chains, accelerated remote work, telemedicine, and mRNA vaccine tech, and exposed gaps in global coordination.",
      resetNotes: "On your cosmic clock, COVID-19 is a powerful ‚Äòsynchronization test‚Äô ‚Äì it forced the whole planet to act almost at once, revealing which systems can pivot and which snap.",
      cosmicClockNote: "Seasonal patterns and indoor crowding matter far more than precise moon phase. The celestial geometry that counts here is airplane routes and urban density maps.",
      ufoNote: "Some people linked 2020 anxiety with UFO interest, but there is zero evidence of a causal UFO‚ÄìCOVID connection."
    },
    {
      id: "measles",
      name: "Measles ‚Äì Hyper-Contagious Childhood Virus",
      pathogenType: "virus",
      agent: "Measles morbillivirus",
      transmission: "Airborne (lingers in air for hours)",
      rotCategory: "Very high (R‚ÇÄ ‚âà12‚Äì18 in susceptible populations) :contentReference[oaicite:12]{index=12}",
      originRegion: "Global",
      originCountry: "Ancient origins (likely Eurasia), now worldwide",
      lat: null,
      lon: null,
      timeLabel: "Endemic for centuries; vaccine era ‚âà1960s‚Äìnow",
      firstYear: 1000,
      lastYear: null,
      totalDeathsText: "Hundreds of thousands of deaths per year historically; vaccination has averted tens of millions of deaths since 2000. :contentReference[oaicite:13]{index=13}",
      totalDeathsLow: 57000000,
      totalDeathsHigh: 100000000,
      r0Min: 12,
      r0Max: 18,
      caseFatalityLow: 0.1,
      caseFatalityHigh: 5,
      durationPattern: "Incubation ~10‚Äì14 days; rash illness ~7‚Äì10 days. Severe cases lead to pneumonia, brain inflammation, or death.",
      hasVaccine: true,
      hasTreatment: false,
      controlLevel: 9,
      resetImpact: 6,
      description: "Measles is one of the most contagious viruses known. In unvaccinated populations it burns through children, leaving many dead or disabled.",
      resetNotes: "Less dramatic single event than the Black Death, but as a continuous ‚Äòfire‚Äô in human history it has burned away huge amounts of potential life until vaccines arrived.",
      cosmicClockNote: "On your clock, measles is like a repeating, high-frequency spike whenever immunity falls below a threshold ‚Äì especially when politics or misinformation drop vaccination rates.",
      ufoNote: "No legitimate UFO link; measles tracks vaccination coverage and crowding, not sky objects."
    },
    {
      id: "tuberculosis",
      name: "Tuberculosis (TB)",
      pathogenType: "bacteria",
      agent: "Mycobacterium tuberculosis",
      transmission: "Airborne (prolonged close contact)",
      rotCategory: "Low to moderate (R‚ÇÄ can range from <1 to ~4 depending on setting) :contentReference[oaicite:14]{index=14}",
      originRegion: "Global",
      originCountry: "Ancient disease, now worldwide",
      lat: null,
      lon: null,
      timeLabel: "Ancient times ‚Äì present",
      firstYear: -2000,
      lastYear: null,
      totalDeathsText: "TB has killed hundreds of millions across history; in 2024 alone ‚âà1.23 million deaths. :contentReference[oaicite:15]{index=15}",
      totalDeathsLow: 200000000,
      totalDeathsHigh: 1000000000,
      r0Min: 0.5,
      r0Max: 4.0,
      caseFatalityLow: 5,
      caseFatalityHigh: 50,
      durationPattern: "Slow: infection can stay latent for years; active disease lasts months to years without treatment.",
      hasVaccine: true,
      hasTreatment: true,
      controlLevel: 7,
      resetImpact: 8,
      description: "TB is a slow-moving killer that especially affects crowded, poor, and under-resourced communities. It‚Äôs still one of the top infectious killers worldwide.",
      resetNotes: "Instead of a single asteroid-style reset, TB acts like grinding tectonic pressure on the poor ‚Äì constantly reshaping demographics over centuries.",
      cosmicClockNote: "On your clock, TB is a low-frequency bass note: always there, louder when war, malnutrition, or funding cuts weaken defenses.",
      ufoNote: "No evidence that TB emergence or spikes are tied to UFO activity; they track social and economic conditions instead."
    },
    {
      id: "malaria",
      name: "Malaria",
      pathogenType: "parasite",
      agent: "Plasmodium spp. (e.g., P. falciparum)",
      transmission: "Vector-borne (Anopheles mosquitoes)",
      rotCategory: "Moderate (depends on mosquito density, climate, housing)",
      originRegion: "Africa",
      originCountry: "Likely African tropics, now widespread in tropics/subtropics",
      lat: 0.0,
      lon: 25.0,
      timeLabel: "Ancient ‚Äì present",
      firstYear: -2000,
      lastYear: null,
      totalDeathsText: "Across history, malaria has likely killed more humans than any other single pathogen; hundreds of thousands of deaths per year today.",
      totalDeathsLow: 300000000,
      totalDeathsHigh: 1000000000,
      r0Min: 1,
      r0Max: 4,
      caseFatalityLow: 0.1,
      caseFatalityHigh: 20,
      durationPattern: "Repeated fevers over weeks‚Äìmonths; chronic burden and relapses in endemic regions.",
      hasVaccine: true,
      hasTreatment: true,
      controlLevel: 6,
      resetImpact: 9,
      description: "Malaria shapes where people can live, work, and farm. It has altered wars, colonization, and economic development, especially in the tropics.",
      resetNotes: "On the reset spectrum, malaria is a climate-linked drag on human expansion, shifting the balance between regions over millennia.",
      cosmicClockNote: "Here the cosmic connection is indirect: orbital parameters shape climate; climate shapes mosquito ranges; mosquitoes shape human history.",
      ufoNote: "Again, no reliable UFO correlation; the geographic pattern follows swamps, wetlands, and climate zones."
    },
    {
      id: "ebola_west_africa_2014",
      name: "Ebola Virus Disease ‚Äì West Africa Outbreak 2014‚Äì2016",
      pathogenType: "virus",
      agent: "Ebola virus (Zaire ebolavirus)",
      transmission: "Contact with blood & body fluids; unsafe burial practices",
      rotCategory: "Moderate (R‚ÇÄ ‚âà1.5‚Äì2 in early phases) :contentReference[oaicite:16]{index=16}",
      originRegion: "Africa",
      originCountry: "Guinea, then Liberia & Sierra Leone",
      lat: 8.6,
      lon: -10.1,
      timeLabel: "2014‚Äì2016 CE",
      firstYear: 2014,
      lastYear: 2016,
      totalDeathsText: "‚âà28,600 cases and ~11,300 deaths. :contentReference[oaicite:17]{index=17}",
      totalDeathsLow: 11000,
      totalDeathsHigh: 12000,
      r0Min: 1.4,
      r0Max: 2.1,
      caseFatalityLow: 40,
      caseFatalityHigh: 70,
      durationPattern: "Illness over days‚Äìweeks; outbreaks can last months without control, but burn out due to high lethality and intensive control.",
      hasVaccine: true,
      hasTreatment: limited,
      controlLevel: 6,
      resetImpact: 7,
      description: "The largest Ebola outbreak ever recorded, devastating health workers and communities in West Africa. It also accelerated vaccine development and global outbreak-response systems.",
      resetNotes: "On your timeline, Ebola is a sharp local spike ‚Äì terrible regionally, but limited globally thanks to aggressive control and the inherent ‚Äòburn-out‚Äô of highly lethal pathogens.",
      cosmicClockNote: "The key geometry here is bush-meat hunting, forest edges, and funeral gatherings ‚Äì not planetary motions.",
      ufoNote: "Intense fear and rumor spread, but no credible link to UFOs or non-human visitors."
    }
  ];

  // ---------- Helper functions ----------

  function pathogenTagClass(type) {
    if (type === "virus") return "tag tag-type-virus";
    if (type === "bacteria") return "tag tag-type-bacteria";
    if (type === "parasite") return "tag tag-type-parasite";
    return "tag tag-type-other";
  }

  function regionTagClass(region) {
    if (region === "Africa") return "tag tag-region-africa";
    if (region === "Asia") return "tag tag-region-asia";
    if (region === "Europe") return "tag tag-region-europe";
    if (region === "Americas") return "tag tag-region-americas";
    return "tag tag-region-global";
  }

  function transmissionTagClass(trans) {
    const t = trans.toLowerCase();
    if (t.includes("airborne")) return "tag tag-trans-airborne";
    if (t.includes("droplet") || t.includes("contact")) return "tag tag-trans-droplet";
    if (t.includes("vector")) return "tag tag-trans-vector";
    if (t.includes("blood") || t.includes("sexual") || t.includes("fluid")) return "tag tag-trans-fluid";
    return "tag tag-trans-other";
  }

  function controlTagClass(level) {
    if (level >= 7) return "tag tag-control-high";
    if (level >= 4) return "tag tag-control-medium";
    return "tag tag-control-low";
  }

  function controlLabel(level, hasVaccine, hasTreatment) {
    if (level >= 7) {
      if (hasVaccine && hasTreatment) return "High: vaccine + effective treatment";
      if (hasVaccine) return "High: vaccine is the main shield";
      if (hasTreatment) return "High: strong treatment reduces deaths";
    }
    if (level >= 4) return "Medium: some tools, still dangerous";
    return "Low: little or no control at the time";
  }

  function formatR0(d) {
    if (!d.r0Min && !d.r0Max) return "Unknown";
    if (d.r0Min && d.r0Max) return `${d.r0Min.toFixed(1)}‚Äì${d.r0Max.toFixed(1)}`;
    if (d.r0Max) return `‚âà${d.r0Max.toFixed(1)}`;
    return `‚âà${d.r0Min.toFixed(1)}`;
  }

  function formatLatLon(lat, lon) {
    if (lat == null || lon == null) return "Global / diffuse origin";
    const ns = lat >= 0 ? "N" : "S";
    const ew = lon >= 0 ? "E" : "W";
    return `${Math.abs(lat).toFixed(1)}¬∞${ns}, ${Math.abs(lon).toFixed(1)}¬∞${ew}`;
  }

  // Normalize R‚ÇÄ and CFR into 0‚Äì100% bar widths
  function r0Width(d) {
    const maxR0 = d.r0Max || d.r0Min || 0;
    const norm = Math.min(20, maxR0); // cap at R‚ÇÄ = 20
    return (norm / 20) * 100;
  }

  function cfrWidth(d) {
    const maxCfr = d.caseFatalityHigh || d.caseFatalityLow || 0;
    const norm = Math.min(80, maxCfr); // cap 80%
    return (norm / 80) * 100;
  }

  function controlWidth(d) {
    return (d.controlLevel || 0) * 10;
  }

  function resetWidth(d) {
    return (d.resetImpact || 0) * 10;
  }

  // ---------- UI wiring ----------
  const tbody = document.getElementById("eventTableBody");
  const detailsContent = document.getElementById("detailsContent");
  const typeFilter = document.getElementById("typeFilter");
  const envFilter = document.getElementById("envFilter");
  const modeFilter = document.getElementById("modeFilter");
  const searchBox = document.getElementById("searchBox");

  function renderTable() {
    const t = typeFilter.value;
    const region = envFilter.value;
    const control = modeFilter.value;
    const q = (searchBox.value || "").toLowerCase();

    tbody.innerHTML = "";

    const filtered = diseases.filter(d => {
      if (t !== "all" && d.pathogenType !== t) return false;
      if (region !== "all" && d.originRegion !== region) return false;

      if (control !== "all") {
        if (control === "high" && d.controlLevel < 7) return false;
        if (control === "medium" && (d.controlLevel < 4 || d.controlLevel >= 7)) return false;
        if (control === "low" && d.controlLevel >= 4) return false;
      }

      if (q) {
        const hay = (
          d.name + " " +
          d.agent + " " +
          d.transmission + " " +
          d.originRegion + " " +
          d.originCountry + " " +
          d.description + " " +
          d.resetNotes
        ).toLowerCase();
        if (!hay.includes(q)) return false;
      }
      return true;
    });

    filtered.forEach(d => {
      const tr = document.createElement("tr");
      tr.dataset.id = d.id;

      const tdName = document.createElement("td");
      tdName.textContent = d.name;

      const tdYears = document.createElement("td");
      tdYears.textContent = d.timeLabel;

      const tdOrigin = document.createElement("td");
      const spanRegion = document.createElement("span");
      spanRegion.className = regionTagClass(d.originRegion);
      const dotR = document.createElement("span");
      dotR.className = "tag-dot";
      const labelR = document.createElement("span");
      labelR.textContent = d.originRegion === "Global" ? "Global" : d.originRegion;
      spanRegion.appendChild(dotR);
      spanRegion.appendChild(labelR);
      tdOrigin.appendChild(spanRegion);

      const tdPathogen = document.createElement("td");
      const spanPath = document.createElement("span");
      spanPath.className = pathogenTagClass(d.pathogenType);
      const dotP = document.createElement("span");
      dotP.className = "tag-dot";
      const labelP = document.createElement("span");
      labelP.textContent = d.pathogenType.charAt(0).toUpperCase() + d.pathogenType.slice(1);
      spanPath.appendChild(dotP);
      spanPath.appendChild(labelP);
      tdPathogen.appendChild(spanPath);

      const tdR0 = document.createElement("td");
      tdR0.textContent = formatR0(d);

      tr.appendChild(tdName);
      tr.appendChild(tdYears);
      tr.appendChild(tdOrigin);
      tr.appendChild(tdPathogen);
      tr.appendChild(tdR0);

      tr.addEventListener("click", () => {
        document.querySelectorAll("#eventTableBody tr").forEach(r => r.classList.remove("active-row"));
        tr.classList.add("active-row");
        renderDetails(d);
      });

      tbody.appendChild(tr);
    });

    if (!filtered.length) {
      const tr = document.createElement("tr");
      const td = document.createElement("td");
      td.colSpan = 5;
      td.className = "muted";
      td.textContent = "No disease events match the current filters.";
      tr.appendChild(td);
      tbody.appendChild(tr);
    }
  }

  function renderDetails(d) {
    const r0Label = formatR0(d);
    const r0W = r0Width(d);
    const cfrW = cfrWidth(d);
    const ctlW = controlWidth(d);
    const resetW = resetWidth(d);

    const ctlTagClass = controlTagClass(d.controlLevel);
    const ctlLabel = controlLabel(d.controlLevel, d.hasVaccine, d.hasTreatment);
    const transClass = transmissionTagClass(d.transmission);

    const latlon = formatLatLon(d.lat, d.lon);

    const vaccText = d.hasVaccine ? "Yes" : "No";
    const treatText = d.hasTreatment ? "Yes" : "No";

    detailsContent.innerHTML = `
      <div class="details-header">
        <div class="details-title">${d.name}</div>
        <div class="details-subtitle">
          ${d.timeLabel} ¬∑ ${d.originCountry || d.originRegion} ¬∑
          <span class="coords">${latlon}</span>
        </div>
      </div>

      <div class="pill-row">
        <span class="${pathogenTagClass(d.pathogenType)}">
          <span class="tag-dot"></span>
          <span>${d.agent}</span>
        </span>

        <span class="${transClass}">
          <span class="tag-dot"></span>
          <span>${d.transmission}</span>
        </span>

        <span class="${ctlTagClass}">
          <span class="tag-dot"></span>
          <span>${ctlLabel}</span>
        </span>
      </div>

      <div class="details-grid">
        <div>
          <div class="details-section-title">Transmission ¬∑ Lethality ¬∑ Control</div>

          <div class="bar-row">
            <div class="bar-label">R‚ÇÄ (rate of spread)</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${r0W.toFixed(1)}%;"></div>
            </div>
          </div>
          <p class="mini">
            Approx R‚ÇÄ: <strong>${r0Label}</strong> (rough, context-dependent).
          </p>

          <div class="bar-row">
            <div class="bar-label">Case fatality (max)</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${cfrW.toFixed(1)}%; background:linear-gradient(to right,#ef4444,#f97316);"></div>
            </div>
          </div>
          <p class="mini">
            Estimated case-fatality range: <strong>${d.caseFatalityLow || "?"}‚Äì${d.caseFatalityHigh || "?"}%</strong> (varies with care).
          </p>

          <div class="bar-row">
            <div class="bar-label">Medical control tools</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${ctlW.toFixed(1)}%; background:linear-gradient(to right,#22c55e,#0ea5e9);"></div>
            </div>
          </div>
          <p class="mini">
            Vaccine: <strong>${vaccText}</strong> ¬∑ Treatment: <strong>${treatText}</strong>
          </p>

          <ul>
            <li><strong>Typical course:</strong> ${d.durationPattern}</li>
            <li><strong>Total deaths (estimate):</strong> ${d.totalDeathsText}</li>
          </ul>
        </div>

        <div>
          <div class="details-section-title">Reset & Cosmic Clock Context</div>

          <div class="bar-row">
            <div class="bar-label">Reset impact on humanity</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${resetW.toFixed(1)}%; background:linear-gradient(to right,#22c55e,#a855f7);"></div>
            </div>
          </div>
          <p class="mini">
            Reset impact (1‚Äì10): <strong>${d.resetImpact}</strong> ‚Äî where 10 is a Black-Death-scale shock to population and systems.
          </p>

          <ul>
            <li><strong>Historical reset notes:</strong> ${d.resetNotes}</li>
            <li><strong>Cosmic clock notes:</strong> ${d.cosmicClockNote}</li>
            <li><strong>UFO / anomaly notes:</strong> ${d.ufoNote}</li>
          </ul>

          <div class="details-section-title">Plain-language summary</div>
          <p class="mini">
            ${d.description}
          </p>
        </div>
      </div>

      <p class="muted mini" style="margin-top:6px;">
        ‚ö†Ô∏è This panel is a simplified cosmic-clock view: it maps big disease events onto time, region, and human
        systems. It does <strong>not</strong> claim that star positions or UFOs cause outbreaks ‚Äì the evidence points
        to ecology, trade routes, climate, and human behavior as the true drivers.
      </p>
    `;
  }

  // Filters
  typeFilter.addEventListener("change", renderTable);
  envFilter.addEventListener("change", renderTable);
  modeFilter.addEventListener("change", renderTable);
  searchBox.addEventListener("input", renderTable);

  // Initial render
  renderTable();
</script>
</body>
</html>
