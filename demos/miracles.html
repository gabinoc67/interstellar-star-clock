<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>COSMIC CLOCK ¬∑ Miracles ¬∑ Ice Cores ¬∑ CST Ephemeris</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      margin:0;padding:0;
      background:#020617;
      color:#e5e7eb;
    }
    header{
      padding:16px 24px;
      border-bottom:1px solid rgba(148,163,184,0.4);
      background:radial-gradient(circle at top left,#22c55e 0,#0f172a 40%,#000 100%);
    }
    header h1{
      margin:0 0 4px;
      font-size:24px;
      letter-spacing:0.06em;
      text-transform:uppercase;
    }
    header p{margin:3px 0;font-size:13px;color:#bbf7d0}
    .muted{color:#9ca3af;font-size:11px}
    .mini{font-size:11px}

    .container{
      display:grid;
      grid-template-columns:minmax(0,2.2fr) minmax(0,1.9fr);
      gap:16px;
      padding:16px 20px 20px;
    }
    @media (max-width:960px){
      .container{grid-template-columns:minmax(0,1fr)}
    }

    .panel{
      background:radial-gradient(circle at top,rgba(34,197,94,0.16),rgba(15,23,42,0.97));
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.35);
      box-shadow:0 18px 45px rgba(15,23,42,0.9);
      padding:14px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .panel h2{
      margin:0;
      font-size:16px;
      font-weight:600;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .panel h2 span{font-size:18px}

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
      font-size:12px;
    }
    .controls label{font-size:12px;color:#bbf7d0}
    select,input[type="text"]{
      background:rgba(15,23,42,0.9);
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      color:#e5e7eb;
      padding:4px 10px;
      font-size:12px;
      outline:none;
    }
    select:focus,input[type="text"]:focus{
      border-color:#4ade80;
      box-shadow:0 0 0 1px rgba(74,222,128,0.7);
    }
    input[type="text"]{min-width:150px}

    table{width:100%;border-collapse:collapse;margin-top:6px;font-size:11px}
    thead{
      position:sticky;top:0;
      background:linear-gradient(to right,rgba(15,23,42,0.98),rgba(15,23,42,0.9));
      z-index:1;
    }
    th,td{
      padding:5px 6px;
      text-align:left;
      border-bottom:1px solid rgba(55,65,81,0.7);
    }
    th{
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:0.06em;
      color:#9ca3af;
      white-space:nowrap;
    }
    tbody tr{
      cursor:pointer;
      transition:background 0.1s ease,transform 0.08s ease;
    }
    tbody tr:hover{
      background:rgba(74,222,128,0.16);
      transform:translateY(-0.5px);
    }
    tbody tr.active-row{
      background:radial-gradient(circle at left,rgba(34,197,94,0.35),rgba(15,23,42,0.95));
    }

    .scroll{
      max-height:430px;
      overflow:auto;
      margin:0 -6px -6px;
      padding:0 6px 1px;
    }

    .tag{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:1px 7px;
      border-radius:999px;
      font-size:10px;
      border:1px solid rgba(148,163,184,0.8);
      background:rgba(15,23,42,0.92);
      white-space:nowrap;
    }
    .tag-dot{width:5px;height:5px;border-radius:999px}

    .tag-type-biblical .tag-dot{background:#eab308}
    .tag-type-marian .tag-dot{background:#22c55e}
    .tag-type-lights .tag-dot{background:#0ea5e9}
    .tag-type-haunting .tag-dot{background:#a855f7}
    .tag-type-acoustic .tag-dot{background:#f97316}
    .tag-type-other .tag-dot{background:#f97316}

    .tag-region .tag-dot{background:#f9a8d4}
    .tag-driver .tag-dot{background:#facc15}
    .tag-cst .tag-dot{background:#60a5fa}
    .tag-ice .tag-dot{background:#67e8f9}
    .tag-env .tag-dot{background:#fdba74}

    .coords{
      font-family:"JetBrains Mono",ui-monospace,Menlo,Consolas,monospace;
      font-size:11px;
      color:#bae6fd;
    }

    .details-header{display:flex;flex-direction:column;gap:2px;margin-bottom:4px}
    .details-title{font-size:17px;font-weight:600}
    .details-subtitle{font-size:12px;color:#9ca3af}

    .pill-row{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin:4px 0;
    }

    .details-grid{
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);
      gap:10px;
      margin-top:4px;
      font-size:12px;
    }
    @media (max-width:860px){
      .details-grid{grid-template-columns:minmax(0,1fr)}
    }

    .details-section-title{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:0.08em;
      color:#9ca3af;
      margin-bottom:3px;
    }
    ul{padding-left:16px;margin:3px 0}
    li{margin-bottom:2px;line-height:1.35}

    .env-dots{
      font-family:ui-monospace,monospace;
      font-size:10px;
      letter-spacing:0.05em;
      text-align:center;
    }

    .interpret-bar{
      margin-top:6px;
      height:6px;
      border-radius:999px;
      background:linear-gradient(to right,#22c55e,#facc15,#f97316,#e11d48);
      position:relative;
      overflow:hidden;
    }
    .interpret-marker{
      position:absolute;
      top:-3px;
      width:2px;
      height:12px;
      background:#e5e7eb;
      box-shadow:0 0 4px rgba(248,250,252,0.9);
    }
    .interpret-labels{
      display:flex;
      justify-content:space-between;
      margin-top:2px;
      font-size:9px;
      color:#9ca3af;
    }

    .ephem-grid{
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);
      gap:8px;
      margin-top:4px;
      font-size:11px;
    }
    @media (max-width:860px){
      .ephem-grid{grid-template-columns:minmax(0,1fr)}
    }

    code{
      font-size:11px;
      background:rgba(15,23,42,0.92);
      padding:1px 4px;
      border-radius:4px;
      border:1px solid rgba(55,65,81,0.8);
    }
  </style>
</head>
<body>
<header>
  <h1>MIRACLES ¬∑ ICE CORES ¬∑ CST CLOCK</h1>
  <p>
    Famous miracles, apparitions, ghost lights and hums with
    <strong>ice-core climate epoch</strong> and a fast
    <strong>CST-style ephemeris</strong> so you can click an event
    and see Sun‚ÄìEarth‚ÄìMoon angles on your clock.
  </p>
  <p class="muted mini">
    Ephemeris is approximate (Meeus-style short formulas, noon UTC).
    Biblical dates are uncertain so CST angles are not computed for them.
    Ice-core notes use published sulfate/temperature reconstructions
    (Little Ice Age, 20th-century volcanic spikes) as context, not proof.
  </p>
</header>

<div class="container">
  <!-- LEFT: TABLE -->
  <section class="panel">
    <h2><span>üìú</span> Events ¬∑ Filters ¬∑ Ghost-Physics Table</h2>
    <div class="controls">
      <label>
        Type:
        <select id="typeFilter">
          <option value="all">All</option>
          <option value="biblical">Biblical / early</option>
          <option value="marian">Marian apparition</option>
          <option value="lights">Lights / sky</option>
          <option value="haunting">Haunting / ghost</option>
          <option value="acoustic">Hum / acoustic</option>
          <option value="other">Other anomaly</option>
        </select>
      </label>
      <label>
        Region:
        <select id="regionFilter">
          <option value="all">All regions</option>
          <option value="Middle East">Middle East</option>
          <option value="Europe">Europe</option>
          <option value="Africa">Africa</option>
          <option value="Asia">Asia</option>
          <option value="Americas">Americas</option>
        </select>
      </label>
      <label>
        Driver:
        <select id="driverFilter">
          <option value="all">Any driver</option>
          <option value="tectonic">Quake / tsunami</option>
          <option value="volcano">Volcanic / ash</option>
          <option value="weather">Storm / wind / flood</option>
          <option value="astronomy">Astronomy / optics</option>
          <option value="em_env">EMF / infrasound</option>
          <option value="psych">Perception / crowd</option>
          <option value="unknown">Unknown / mixed</option>
        </select>
      </label>
      <label>
        Search:
        <input type="text" id="searchBox" placeholder="name, country, note‚Ä¶">
      </label>
    </div>

    <div class="scroll">
      <table>
        <thead>
        <tr>
          <th>Event</th>
          <th>Type</th>
          <th>Region</th>
          <th>Lat</th>
          <th>Date</th>
          <th>Inf</th>
          <th>EMF</th>
          <th>Seis</th>
          <th>Exp</th>
        </tr>
        </thead>
        <tbody id="eventTableBody"></tbody>
      </table>
    </div>
  </section>

  <!-- RIGHT: DETAILS + ICE + CST -->
  <section class="panel">
    <h2><span>üåå</span> Details ¬∑ Ice-Core Epoch ¬∑ CST Ephemeris</h2>
    <div id="detailsContent">
      <p class="muted">
        Click any row on the left. For each event you‚Äôll see:
      </p>
      <ul class="muted">
        <li>Latitude band and hemisphere on your Cosmic Clock</li>
        <li>Approximate zodiac slot and lunar phase (where known)</li>
        <li>Local ghost-physics table: infrasound, EMF, seismic, expectation</li>
        <li>Ice-core context: Little Ice Age, post-Novarupta 1912, post-Agung 1963, or quiet background</li>
        <li>CST snapshot: Julian Date and Sun / Earth / Moon clock angles (12 and 24 sectors)</li>
      </ul>
      <p class="muted mini">
        To use your own VT ‚â° CIT ‚â° CST equations, you can replace the
        <code>computeEphemeris(ev)</code> function in the script
        with your exact warp-clock math; the UI will still display
        whatever angles you compute.
      </p>
    </div>
  </section>
</div>

<script>
  // ---------- helpers ----------
  function latBand(lat){
    const a = Math.abs(lat);
    if(a < 10) return "Equatorial (0‚Äì10¬∞)";
    if(a < 23.5) return "Tropical (10‚Äì23.5¬∞)";
    if(a < 40) return "Subtropical / warm mid-latitudes (23.5‚Äì40¬∞)";
    if(a < 60) return "Mid-latitudes (40‚Äì60¬∞)";
    return "High-latitude / polar (60¬∞+)";
  }
  function typeClass(t){
    if(t === "biblical") return "tag tag-type-biblical";
    if(t === "marian") return "tag tag-type-marian";
    if(t === "lights") return "tag tag-type-lights";
    if(t === "haunting") return "tag tag-type-haunting";
    if(t === "acoustic") return "tag tag-type-acoustic";
    return "tag tag-type-other";
  }
  function envDots(level){
    if(level === "low") return "‚Ä¢¬∑¬∑";
    if(level === "med") return "‚Ä¢‚Ä¢¬∑";
    if(level === "high") return "‚Ä¢‚Ä¢‚Ä¢";
    return "¬∑¬∑?";
  }
  function interpretOffset(score){
    const clamp = Math.max(0, Math.min(3, score || 0));
    return (clamp / 3) * 100;
  }
  function driverLabel(d){
    const map = {
      tectonic:"Quake / tsunami candidate",
      volcano:"Volcanic / ash / sulfate",
      weather:"Storm / wind / flood",
      astronomy:"Astronomy / optics",
      em_env:"EMF / infrasound / resonance",
      psych:"Perception / crowd expectation",
      unknown:"Unknown / mixed"
    };
    return map[d] || d;
  }
  function expectationLevel(exp){
    if(!exp) return "med";
    const s = exp.toLowerCase();
    if(s.includes("very-high")) return "high";
    if(s.includes("high")) return "high";
    if(s.includes("low")) return "low";
    return "med";
  }

  // ---------- simple ephemeris (approximate, noon UTC) ----------
  const DEG2RAD = Math.PI / 180;
  const RAD2DEG = 180 / Math.PI;

  function normalizeDeg(x){
    let v = x % 360;
    if(v < 0) v += 360;
    return v;
  }

  // Y, M, D ‚Üí Julian Date (noon shift)
  function toJulianDate(y,m,d){
    if(!y || !m || !d) return null;
    let a = Math.floor((14 - m)/12);
    let yy = y + 4800 - a;
    let mm = m + 12*a - 3;
    let jd = d + Math.floor((153*mm + 2)/5) + 365*yy + Math.floor(yy/4) - Math.floor(yy/100) + Math.floor(yy/400) - 32045;
    // set to noon UTC:
    return jd - 0.5 + 0.5;
  }

  // Very simple Sun ecliptic longitude
  function sunLongitudeDeg(JD){
    const n = JD - 2451545.0;
    let L = 280.460 + 0.9856474 * n;      // mean longitude
    let g = 357.528 + 0.9856003 * n;      // mean anomaly
    L = normalizeDeg(L);
    g = normalizeDeg(g);
    const lambda = L + 1.915 * Math.sin(g*DEG2RAD) + 0.020 * Math.sin(2*g*DEG2RAD);
    return normalizeDeg(lambda);
  }

  // Very simple Moon mean ecliptic longitude
  function moonLongitudeDeg(JD){
    const n = JD - 2451545.0;
    // mean longitude of the Moon (degrees)
    let Lm = 218.316 + 13.176396 * n;
    Lm = normalizeDeg(Lm);
    // one quick correction term (optional small refinement)
    const Mm = normalizeDeg(134.963 + 13.064993 * n); // mean anomaly
    Lm += 6.289 * Math.sin(Mm*DEG2RAD);
    return normalizeDeg(Lm);
  }

  function toSector(angle, n){
    const a = normalizeDeg(angle);
    return Math.floor((a / 360) * n) % n;
  }

  function computeEphemeris(ev){
    if(!ev.year || !ev.month || !ev.day){
      return {ok:false, reason:"Date not precise enough for ephemeris"};
    }
    const JD = toJulianDate(ev.year, ev.month, ev.day);
    const sunL = sunLongitudeDeg(JD);
    const earthL = normalizeDeg(sunL + 180);
    const moonL = moonLongitudeDeg(JD);

    return {
      ok:true,
      JD:JD.toFixed(3),
      sunL:sunL.toFixed(2),
      earthL:earthL.toFixed(2),
      moonL:moonL.toFixed(2),
      sun12:toSector(sunL,12),
      sun24:toSector(sunL,24),
      moon12:toSector(moonL,12),
      moon24:toSector(moonL,24),
      earth12:toSector(earthL,12),
      earth24:toSector(earthL,24)
    };
  }

  // ---------- dataset ----------
  const events = [
    // ---- Biblical / early reset motifs ----
    {
      id:"red_sea",
      name:"Red Sea crossing (Exodus narrative)",
      type:"biblical",
      region:"Middle East",
      lat:29.5, lon:32.8,
      locationText:"Proposed shallow lagoon / Gulf of Suez region near Sinai",
      dateText:"c. 13th century BCE (legendary; not dated to a specific day)",
      year:null, month:null, day:null,
      moonPhase:"No direct record; only later tradition.",
      zodiacHint:"Unknown ‚Äî CST ephemeris disabled because date is not fixed.",
      naturalDrivers:["tectonic","weather","unknown"],
      env:{infra:"low",emf:"low",seis:"med",exp:"very-high"},
      iceEpoch:"Deep Holocene (post-Younger Dryas, pre-Little Ice Age).",
      iceNote:
        "Ice cores show deglaciated Holocene background climate; no single sharp anomaly can be tied to a legendary date here.",
      cstNotes:
        "Desert coastal band likely sensitive to wind-setdown and seiche effects; good lab case for your flood/tsunami CST sectors.",
      physicsNotes:
        "Wind-setdown in a shallow basin and/or tsunami drawdown can expose temporary land bridges before water returns.",
      faithNotes:
        "Preserved as a central liberation story in Jewish and Christian scripture rather than as a meteorological report.",
      interpretationScore:1.5
    },
    {
      id:"noah_flood",
      name:"Noah‚Äôs flood (ark & ‚Äòworldwide‚Äô deluge)",
      type:"biblical",
      region:"Middle East",
      lat:39.7, lon:44.3,
      locationText:"Ararat / upper Mesopotamian region (traditional ‚Äòark resting‚Äô zone)",
      dateText:"Mythic frame, often associated with early Holocene megafloods (~10,000‚Äì5,000 BCE)",
      year:null, month:null, day:null,
      moonPhase:"Not constrained by data.",
      zodiacHint:"Unknown ‚Äî several real megafloods probably compressed into one story.",
      naturalDrivers:["tectonic","weather","unknown"],
      env:{infra:"low",emf:"low",seis:"med",exp:"high"},
      iceEpoch:"Early‚Äìmid Holocene warm period and sea-level rise.",
      iceNote:
        "Ice cores and sea-level proxies show big meltwater and climate pulses early in the Holocene; a good frame for archetypal flood stories.",
      cstNotes:
        "Treat as a multi-year CST ‚Äòreset‚Äô band, overlapping with your lost-cities and mega-flood simulations.",
      physicsNotes:
        "Black Sea infill, Mesopotamian river floods, or local dam-breaks are all candidates; villagers experience ‚Äòtheir world‚Äô flooding.",
      faithNotes:
        "In Abrahamic traditions, read as moral and covenant drama: not just high water, but a restart of human history.",
      interpretationScore:2
    },

    // ---- Major Marian apparitions & shrines ----
    {
      id:"guadalupe",
      name:"Our Lady of Guadalupe (Tepeyac)",
      type:"marian",
      region:"Americas",
      lat:19.48, lon:-99.12,
      locationText:"Tepeyac hill, Mexico City basin, Mexico",
      dateText:"9‚Äì12 December 1531 (traditional series)",
      year:1531, month:12, day:12,
      moonPhase:"Close to last-quarter / waning gibbous (approximate reconstructions).",
      zodiacHint:"Sun in Sagittarius; mid-latitude sky but at high elevation.",
      naturalDrivers:["psych","unknown"],
      env:{infra:"low",emf:"low",seis:"low",exp:"very-high"},
      iceEpoch:"Early Little Ice Age (LIA) background cooling.",
      iceNote:
        "Ice cores show LIA starting after strong 13th‚Äì15th century eruptions; 1531 sits in a cooler, more volcanically forced climate regime.",
      cstNotes:
        "High-altitude equatorial-adjacent basin ‚Äî good for linking the tilma star pattern with your CST zodiac sectors.",
      physicsNotes:
        "No large geophysical trigger; core is visionary experience and image on cloth in a colonial crisis context.",
      faithNotes:
        "For millions in the Americas this is a foundational miracle and identity symbol, not just a private vision.",
      interpretationScore:2.2
    },
    {
      id:"lourdes",
      name:"Lourdes grotto apparitions",
      type:"marian",
      region:"Europe",
      lat:43.10, lon:-0.05,
      locationText:"Massabielle grotto, Lourdes, Pyrenees, France",
      dateText:"From 11 February 1858",
      year:1858, month:2, day:11,
      moonPhase:"Waning crescent / new region for early February (approx).",
      zodiacHint:"Sun in Aquarius at mid-latitude mountain band.",
      naturalDrivers:["water","psych"],
      env:{infra:"low",emf:"low",seis:"low",exp:"high"},
      iceEpoch:"Tail end of the Little Ice Age.",
      iceNote:
        "Ice cores show strong volcanic sulfate spikes and cooler temperatures up to mid-19th century; 1858 is near the LIA ‚Üí modern transition.",
      cstNotes:
        "Karst spring in a river valley ‚Äî perfect target to couple groundwater timing with CST and local pilgrim flow.",
      physicsNotes:
        "Spring emergence and some healings can be explained naturalistically; a minority of cures remain medically unusual even after review.",
      faithNotes:
        "Church treats a small set of healings as miracles; site functions as a massive global prayer node.",
      interpretationScore:2
    },
    {
      id:"fatima_sun",
      name:"F√°tima ‚ÄúMiracle of the Sun‚Äù",
      type:"marian",
      region:"Europe",
      lat:39.63, lon:-8.67,
      locationText:"Cova da Iria, near F√°tima, Portugal",
      dateText:"13 October 1917",
      year:1917, month:10, day:13,
      moonPhase:"Waning crescent (~5‚Äì10% lit) that morning.",
      zodiacHint:"Sun in Libra; Moon near Virgo/Libra region (approx).",
      naturalDrivers:["astronomy","weather","psych"],
      env:{infra:"low",emf:"low",seis:"low",exp:"very-high"},
      iceEpoch:"Early 20th century, still influenced by Novarupta 1912 sulfate spike.",
      iceNote:
        "Ice cores record a major sulfate layer from the 1912 Novarupta-Katmai eruption; its cooling persists into the decade but 1917 has no unique extra spike.",
      cstNotes:
        "Nice test case for solar CST sectors: Sun high, thin clouds, huge crowd at a specific announced minute.",
      physicsNotes:
        "Thin cloud + retinal after-images + mass suggestion can explain ‚Äòdancing, color-shifting sun‚Äô without moving the actual Sun.",
      faithNotes:
        "Crowds read the optical show as direct divine confirmation of the children‚Äôs warnings and secrets.",
      interpretationScore:1.5
    },
    {
      id:"zeitoun",
      name:"Zeitoun luminous Virgin over church domes",
      type:"marian",
      region:"Africa",
      lat:30.10, lon:31.32,
      locationText:"Church of Saint Mary, Zeitoun district, Cairo, Egypt",
      dateText:"From 2 April 1968 (multi-year series)",
      year:1968, month:4, day:2,
      moonPhase:"Waxing crescent (‚âà15‚Äì25% lit) early April 1968.",
      zodiacHint:"Sun in Aries; Moon in Taurus band.",
      naturalDrivers:["astronomy","em_env","unknown"],
      env:{infra:"med",emf:"med",seis:"low",exp:"high"},
      iceEpoch:"Post-Agung 1963 volcanic cooling, pre-modern accelerated warming.",
      iceNote:
        "Ice cores preserve sulfate from Agung 1963, which caused short-lived global cooling; by 1968 climate is recovering and greenhouse warming is ramping.",
      cstNotes:
        "Urban EM + dust + rooftop geometry make this a great CST test site for ‚Äòsacred light‚Äô vs dusty plasma and searchlight scattering.",
      physicsNotes:
        "Hypotheses include reflected/projection lights in polluted air; sustained multi-year visibility keeps this in ‚Äòopen case‚Äô territory.",
      faithNotes:
        "Recognized as a national consolation; Muslims and Christians both reported healings and signs.",
      interpretationScore:2
    },
    {
      id:"medjugorje",
      name:"Medjugorje apparitions (ongoing claims)",
      type:"marian",
      region:"Europe",
      lat:43.20, lon:17.66,
      locationText:"Village of Medjugorje, Bosnia & Herzegovina",
      dateText:"From 24 June 1981",
      year:1981, month:6, day:24,
      moonPhase:"Waning gibbous (~70‚Äì80% lit) in Pisces sector (approx).",
      zodiacHint:"Sun in Cancer; Moon in Pisces (approx ephemeris).",
      naturalDrivers:["psych","unknown"],
      env:{infra:"low",emf:"low",seis:"low",exp:"very-high"},
      iceEpoch:"Modern warming era.",
      iceNote:
        "By 1980s, ice cores + direct air samples show greenhouse gases outside natural 800k-year range; no large volcanic anomaly right at 1981.",
      cstNotes:
        "Works as a long-running ‚Äòperception + prophecy‚Äô stream on top of a relatively stable physical environment.",
      physicsNotes:
        "Most phenomena are subjective visions, interior messages and sun-gazing, not big external environmental changes.",
      faithNotes:
        "Pilgrims report conversion and healing; Church maintains a cautious, partial recognition.",
      interpretationScore:2.4
    },
    {
      id:"akita",
      name:"Akita weeping statue & messages",
      type:"marian",
      region:"Asia",
      lat:39.72, lon:140.10,
      locationText:"Seitai Hoshikai convent, near Akita, Japan",
      dateText:"From 6 July 1973",
      year:1973, month:7, day:6,
      moonPhase:"Waxing gibbous region (approx).",
      zodiacHint:"Sun in Cancer at ~40¬∞N.",
      naturalDrivers:["psych","unknown"],
      env:{infra:"low",emf:"low",seis:"med",exp:"high"},
      iceEpoch:"Modern warming, post-Agung era.",
      iceNote:
        "After Agung 1963, no comparable sulfate spike dominates the early 1970s; ice cores show background modern warming trend.",
      cstNotes:
        "Sits in a tectonically active island arc; interesting for your ‚Äòwarning‚Äô messaging vs seismic risk mapping.",
      physicsNotes:
        "Weeping statues sometimes involve condensation or micro-cracks; no widely published forensic breakdown here.",
      faithNotes:
        "Locally approved as worthy of belief; interpreted as a warning about future trials.",
      interpretationScore:2.3
    },
    {
      id:"kibeho",
      name:"Kibeho schoolgirl visions",
      type:"marian",
      region:"Africa",
      lat:-2.65, lon:29.55,
      locationText:"Sanctuary of Our Lady of Kibeho, Rwanda",
      dateText:"From 28 November 1981",
      year:1981, month:11, day:28,
      moonPhase:"Waxing gibbous (~70%) near Taurus (approx).",
      zodiacHint:"Sun in Sagittarius; Moon in Taurus band.",
      naturalDrivers:["psych"],
      env:{infra:"low",emf:"low",seis:"low",exp:"high"},
      iceEpoch:"Modern warming era.",
      iceNote:
        "Ice-core greenhouse record clearly above Holocene natural range; no large volcanic spike right in 1981.",
      cstNotes:
        "Equatorial highland band ‚Äî good to cross-link with your genocide / war resets and CST warnings.",
      physicsNotes:
        "Content is visionary and predictive, not driven by tides or quakes.",
      faithNotes:
        "Later interpreted as a warning for the 1994 genocide; recognized as an official apparition site by the local Church.",
      interpretationScore:2.5
    },
    {
      id:"champion",
      name:"Champion, Wisconsin (Adele Brise)",
      type:"marian",
      region:"Americas",
      lat:44.59, lon:-87.77,
      locationText:"Shrine of Our Lady of Champion, near Green Bay, USA",
      dateText:"9 October 1859",
      year:1859, month:10, day:9,
      moonPhase:"Near last-quarter (approx).",
      zodiacHint:"Sun in Libra / early Scorpio band.",
      naturalDrivers:["weather","psych"],
      env:{infra:"low",emf:"low",seis:"low",exp:"high"},
      iceEpoch:"Late Little Ice Age + 1859 solar (Carrington) activity.",
      iceNote:
        "Mid-19th century still cool in many regions; 1859 also saw the Carrington solar storm, visible in ice-core nitrate and geomagnetic archives.",
      cstNotes:
        "Neat test case for tying your CST to both climate (LIA tail) and solar outburst timing.",
      physicsNotes:
        "The apparitions were private; later wildfire survival of the shrine is part of local miracle tradition.",
      faithNotes:
        "Only approved Marian apparition site in the USA; interpreted as a call to catechize frontier settlers.",
      interpretationScore:2.2
    },

    // ---- Earth-lights / sky lights ----
    {
      id:"marfa",
      name:"Marfa lights (West Texas desert)",
      type:"lights",
      region:"Americas",
      lat:30.31, lon:-104.02,
      locationText:"Mitchell Flat, east of Marfa, Texas, USA",
      dateText:"Reports since late 19th century; active today",
      year:2000, month:1, day:1,
      moonPhase:"Varies; best reported on dark, clear nights.",
      zodiacHint:"Generic sample date (1 Jan) used for ephemeris ‚Äî adjust to real night when you log data.",
      naturalDrivers:["astronomy","em_env"],
      env:{infra:"med",emf:"med",seis:"low",exp:"high"},
      iceEpoch:"Modern warming era, no major volcanic anomaly at typical sighting years.",
      iceNote:
        "Ice cores show anthropogenic rising greenhouse gases; no strong sulfate spike for ‚ÄòMarfa years‚Äô specifically.",
      cstNotes:
        "Subtropical high desert ‚Äî combine inversion layers, car lights, and CST timing for your light-ball catalogue.",
      physicsNotes:
        "Serious studies correlate many lights with car headlights and mirages; a smaller subset still behaves oddly.",
      faithNotes:
        "Locals frame them more as mystery / folklore than as religious apparitions.",
      interpretationScore:0.8
    },
    {
      id:"brown_mountain",
      name:"Brown Mountain lights",
      type:"lights",
      region:"Americas",
      lat:35.91, lon:-81.74,
      locationText:"Brown Mountain ridge near Morganton, North Carolina, USA",
      dateText:"Sightings since early 1900s",
      year:1913, month:10, day:1,
      moonPhase:"Autumn nights; often near dark periods to enhance visibility.",
      zodiacHint:"Sample October date used; refine in your logs.",
      naturalDrivers:["astronomy","em_env","weather"],
      env:{infra:"med",emf:"med",seis:"med",exp:"high"},
      iceEpoch:"Early 20th century, post-Novarupta cooling background.",
      iceNote:
        "Novarupta 1912 sulfate spike appears in ice cores; by 1913 the short cooling is still fading, but no special anomaly at this ridge.",
      cstNotes:
        "Good US East-coast analog to Hessdalen; stick your CST-EMF array here as a test someday.",
      physicsNotes:
        "Likely mix of distant car lights, campfires, ball lightning-like plasma and eye/terrain illusions.",
      faithNotes:
        "Mostly ghost/UFO folklore; not central to formal religious traditions.",
      interpretationScore:1.4
    },
    {
      id:"naga_fireballs",
      name:"Naga fireballs on the Mekong",
      type:"lights",
      region:"Asia",
      lat:18.02, lon:103.08,
      locationText:"Mekong River near Phon Phisai, Thai‚ÄìLao border",
      dateText:"Annual late-October events (Buddhist Lent end)",
      year:1990, month:10, day:30,
      moonPhase:"Usually near full-moon festival.",
      zodiacHint:"Sun in Scorpio; Moon near Taurus/Aries opposite band.",
      naturalDrivers:["astronomy","weather","unknown"],
      env:{infra:"med",emf:"low",seis:"low",exp:"high"},
      iceEpoch:"Modern warming era.",
      iceNote:
        "No big global sulfate spikes for 1990 festival years; background anthropogenic warming dominates.",
      cstNotes:
        "Treat as CST-synchronized local river plasma or flare event; perfect mix of festival expectation and natural gas hypotheses.",
      physicsNotes:
        "Hypotheses include flammable gas bubbles, human-launched flares, and refracted boat lights; not resolved.",
      faithNotes:
        "Linked with Naga serpent spirits; half pilgrimage, half party.",
      interpretationScore:1.8
    },

    // ---- Hauntings & EMF/infrasound ----
    {
      id:"mary_kings_close",
      name:"Mary King‚Äôs Close infrasound ‚Äòhaunting‚Äô",
      type:"haunting",
      region:"Europe",
      lat:55.95, lon:-3.19,
      locationText:"Real Mary King‚Äôs Close, beneath Royal Mile, Edinburgh, Scotland",
      dateText:"Modern tours; infrasound study ~2005",
      year:2005, month:10, day:1,
      moonPhase:"Varies by night; indoor effect.",
      zodiacHint:"Not central; underground corridors.",
      naturalDrivers:["em_env","psych"],
      env:{infra:"high",emf:"med",seis:"low",exp:"very-high"},
      iceEpoch:"Modern warming era.",
      iceNote:
        "Ice cores here just show 20th-century greenhouse rise; no large volcanic spike specifically at 2005.",
      cstNotes:
        "Perfect control case for ‚Äòghost via infrasound‚Äô: coil your CST‚Äìfrequency model directly into the cellar‚Äôs standing waves.",
      physicsNotes:
        "Strong ~19 Hz infrasound caused dread, presence feelings and shadow forms; turning the source off killed the haunting.",
      faithNotes:
        "Shows how sincere ghost reports can ride on invisible physics instead of spirits.",
      interpretationScore:0.5
    },
    {
      id:"hampton_court",
      name:"Hampton Court Palace ghost corridor",
      type:"haunting",
      region:"Europe",
      lat:51.40, lon:-0.34,
      locationText:"Hampton Court Palace near London, UK",
      dateText:"CCTV ‚ÄòSkeletor‚Äô clip (2003)",
      year:2003, month:12, day:1,
      moonPhase:"Waxing gibbous period (approx).",
      zodiacHint:"Sun in Sagittarius/Capricorn region.",
      naturalDrivers:["em_env","psych"],
      env:{infra:"med",emf:"med",seis:"low",exp:"very-high"},
      iceEpoch:"Modern warming era.",
      iceNote:"No major volcanic signal at 2003; standard anthropogenic climate background.",
      cstNotes:
        "Old stone, drafts and heavy doors are great mechanical test rigs for your CST-triggered ‚Äòdoor slam‚Äô myth vs gust reality.",
      physicsNotes:
        "Likely either a staffer or video artifact; strong ghost expectation reframes ambiguous footage as ‚Äòroyal spirit‚Äô.",
      faithNotes:
        "Cultural haunting, not tied to doctrine; shows strength of story + palace atmosphere.",
      interpretationScore:1.4
    },

    // ---- Hum / acoustic mystery ----
    {
      id:"taos_hum",
      name:"Taos Hum (town-wide low-frequency drone)",
      type:"acoustic",
      region:"Americas",
      lat:36.41, lon:-105.57,
      locationText:"Taos and surroundings, New Mexico, USA",
      dateText:"Complaints since early 1990s",
      year:1993, month:6, day:1,
      moonPhase:"Not systematically linked; mixed reports.",
      zodiacHint:"Sample June date used; refine for real campaigns.",
      naturalDrivers:["em_env","acoustic","psych"],
      env:{infra:"high",emf:"med",seis:"low",exp:"high"},
      iceEpoch:"Modern warming era.",
      iceNote:
        "No ice-core sulfate anomaly at 1990s hum years; long-term greenhouse trend continues.",
      cstNotes:
        "High-altitude basin; great for mapping industrial 40‚Äì80 Hz hums + infrasound against your CST time sectors and human sensitivity.",
      physicsNotes:
        "Likely mix of low-frequency industrial noise, power lines and individual sensitivity; many residents hear nothing.",
      faithNotes:
        "Experienced as uncanny or oppressive but usually not religious; a good example of ‚Äòmystery sound‚Äô physics.",
      interpretationScore:0.9
    }
  ];

  // ---------- UI wiring ----------
  const tbody = document.getElementById("eventTableBody");
  const detailsContent = document.getElementById("detailsContent");
  const typeFilter = document.getElementById("typeFilter");
  const regionFilter = document.getElementById("regionFilter");
  const driverFilter = document.getElementById("driverFilter");
  const searchBox = document.getElementById("searchBox");

  function renderTable(){
    const t = typeFilter.value;
    const r = regionFilter.value;
    const d = driverFilter.value;
    const q = (searchBox.value || "").toLowerCase();

    tbody.innerHTML = "";

    const filtered = events.filter(ev => {
      if(t !== "all" && ev.type !== t) return false;
      if(r !== "all" && ev.region !== r) return false;
      if(d !== "all" && !(ev.naturalDrivers || []).includes(d)) return false;
      if(q){
        const hay = (
          ev.name + " " +
          ev.locationText + " " +
          ev.region + " " +
          ev.dateText + " " +
          (ev.physicsNotes || "") + " " +
          (ev.faithNotes || "") + " " +
          (ev.iceEpoch || "") + " " +
          (ev.iceNote || "")
        ).toLowerCase();
        if(!hay.includes(q)) return false;
      }
      return true;
    });

    filtered.forEach(ev => {
      const tr = document.createElement("tr");
      tr.dataset.id = ev.id;

      const env = ev.env || {};
      const infraLevel = env.infra || "unknown";
      const emfLevel = env.emf || "unknown";
      const seisLevel = env.seis || "unknown";
      const expLevel = expectationLevel(env.exp || "med");

      const tdName = document.createElement("td");
      tdName.textContent = ev.name;

      const tdType = document.createElement("td");
      const spanType = document.createElement("span");
      spanType.className = typeClass(ev.type);
      const dot = document.createElement("span");
      dot.className = "tag-dot";
      const label = document.createElement("span");
      const typeLabelMap = {
        biblical:"Biblical",
        marian:"Marian",
        lights:"Lights",
        haunting:"Haunting",
        acoustic:"Hum",
        other:"Other"
      };
      label.textContent = typeLabelMap[ev.type] || ev.type;
      spanType.appendChild(dot);
      spanType.appendChild(label);
      tdType.appendChild(spanType);

      const tdRegion = document.createElement("td");
      tdRegion.textContent = ev.region;

      const tdLat = document.createElement("td");
      tdLat.textContent = (ev.lat != null ? ev.lat.toFixed(2) : "‚Äî");

      const tdDate = document.createElement("td");
      tdDate.textContent = ev.dateText;

      function mkEnvCell(level){
        const td = document.createElement("td");
        td.className = "env-dots";
        td.textContent = envDots(level);
        return td;
      }

      tr.appendChild(tdName);
      tr.appendChild(tdType);
      tr.appendChild(tdRegion);
      tr.appendChild(tdLat);
      tr.appendChild(tdDate);
      tr.appendChild(mkEnvCell(infraLevel));
      tr.appendChild(mkEnvCell(emfLevel));
      tr.appendChild(mkEnvCell(seisLevel));
      tr.appendChild(mkEnvCell(expLevel));

      tr.addEventListener("click", () => {
        document.querySelectorAll("#eventTableBody tr").forEach(r => r.classList.remove("active-row"));
        tr.classList.add("active-row");
        renderDetails(ev);
      });

      tbody.appendChild(tr);
    });

    if(!filtered.length){
      const tr = document.createElement("tr");
      const td = document.createElement("td");
      td.colSpan = 9;
      td.className = "muted";
      td.textContent = "No events match the current filters.";
      tr.appendChild(td);
      tbody.appendChild(tr);
    }
  }

  function renderDetails(ev){
    const hemisphere = ev.lat != null ? (ev.lat >= 0 ? "Northern" : "Southern") : "Unknown";
    const band = ev.lat != null ? latBand(ev.lat) : "Unknown band";

    const driverTags = (ev.naturalDrivers || []).map(d => `
      <span class="tag tag-driver">
        <span class="tag-dot"></span>
        <span>${driverLabel(d)}</span>
      </span>
    `).join("");

    const typeTag = `
      <span class="${typeClass(ev.type)}">
        <span class="tag-dot"></span>
        <span>${ev.type.charAt(0).toUpperCase() + ev.type.slice(1)}</span>
      </span>
    `;

    const regionTag = `
      <span class="tag tag-region">
        <span class="tag-dot"></span>
        <span>${ev.region}</span>
      </span>
    `;

    const env = ev.env || {};
    const envBlock = `
      <div class="details-section-title">Local environment ¬∑ ghost-physics</div>
      <ul>
        <li><strong>Infrasound:</strong> ${env.infra || "unknown"} (${envDots(env.infra || "unknown")})</li>
        <li><strong>EMF / electrical:</strong> ${env.emf || "unknown"} (${envDots(env.emf || "unknown")})</li>
        <li><strong>Seismic noise:</strong> ${env.seis || "unknown"} (${envDots(env.seis || "unknown")})</li>
        <li><strong>Human expectation:</strong> ${env.exp || "medium"} (${envDots(expectationLevel(env.exp || "med"))})</li>
      </ul>
    `;

    const iceEpoch = ev.iceEpoch || "Not tagged to a specific ice-core epoch.";
    const iceNote = ev.iceNote || "No extra ice-core annotation yet.";

    const cst = ev.cstNotes || "No custom CST note added yet.";
    const physics = ev.physicsNotes || "No detailed physical hypothesis logged yet.";
    const faith = ev.faithNotes || "No specific faith interpretation summary yet.";

    const moonLine = ev.moonPhase || "Not constrained by surviving records.";
    const zodiacLine = ev.zodiacHint || "Zodiac sector approximate or not evaluated.";

    const interpret = ev.interpretationScore != null ? ev.interpretationScore : 1.5;
    const offset = interpretOffset(interpret);

    const epi = computeEphemeris(ev);

    let ephemHtml;
    if(!epi.ok){
      ephemHtml = `
        <p class="mini">
          <strong>CST snapshot:</strong> not computed because this event has no precise Y‚ÄìM‚ÄìD (legendary or ‚Äògeneric‚Äô year).  
          When you know an exact date for your CST model, fill in <code>year/month/day</code> in the dataset and the angles will appear here.
        </p>
      `;
    } else {
      ephemHtml = `
        <div class="ephem-grid">
          <div>
            <div class="details-section-title">Numeric CST angles (approx)</div>
            <ul>
              <li><strong>Julian Date (noon UTC):</strong> ${epi.JD}</li>
              <li><strong>Sun Œª‚òâ:</strong> ${epi.sunL}¬∞  ¬∑ sectors: 12=${epi.sun12}, 24=${epi.sun24}</li>
              <li><strong>Earth Œª‚äï (opposite Sun):</strong> ${epi.earthL}¬∞  ¬∑ sectors: 12=${epi.earth12}, 24=${epi.earth24}</li>
              <li><strong>Moon Œª‚òæ:</strong> ${epi.moonL}¬∞  ¬∑ sectors: 12=${epi.moon12}, 24=${epi.moon24}</li>
            </ul>
          </div>
          <div>
            <div class="details-section-title">Math slot (swap your own formulas)</div>
            <p class="mini">
              Current snapshot uses simple ecliptic longitudes:
            </p>
            <ul class="mini">
              <li><code>n = JD ‚àí 2451545.0</code></li>
              <li><code>Œª‚òâ ‚âà L + 1.915¬∑sin(g) + 0.020¬∑sin(2g)</code> (deg)</li>
              <li><code>Œª‚äï = Œª‚òâ + 180¬∞ (mod 360¬∞)</code></li>
              <li><code>Œª‚òæ ‚âà 218.316¬∞ + 13.176396¬∞¬∑n + small terms</code></li>
              <li><code>CST_sector‚ÇÅ‚ÇÇ = floor(12¬∑Œª/360)</code> (similar for 24 sectors)</li>
            </ul>
            <p class="mini">
              Replace <code>computeEphemeris(ev)</code> with your VT‚â°CIT‚â°CST warp equations to get your exact
              Cosmic Standard Time angles from the same click.
            </p>
          </div>
        </div>
      `;
    }

    detailsContent.innerHTML = `
      <div class="details-header">
        <div class="details-title">${ev.name}</div>
        <div class="details-subtitle">${ev.dateText}</div>
        <div class="coords">
          ${ev.locationText || ""}<br>
          Lat ${ev.lat != null ? ev.lat.toFixed(4) : "‚Äî"}¬∞, Lon ${ev.lon != null ? ev.lon.toFixed(4) : "‚Äî"}¬∞ (${hemisphere} Hemisphere)
        </div>
      </div>

      <div class="pill-row">
        ${typeTag}
        ${regionTag}
        <span class="tag tag-cst">
          <span class="tag-dot"></span>
          <span>Band: ${band}</span>
        </span>
        <span class="tag tag-ice">
          <span class="tag-dot"></span>
          <span>Ice-core epoch</span>
        </span>
        ${driverTags}
      </div>

      <div class="details-grid">
        <div>
          <div class="details-section-title">Cosmic Clock slot</div>
          <ul>
            <li><strong>Latitude band:</strong> ${band}</li>
            <li><strong>Hemisphere:</strong> ${hemisphere}</li>
            <li><strong>Approx Sun/Moon zodiac:</strong> ${zodiacLine}</li>
            <li><strong>Lunar phase description:</strong> ${moonLine}</li>
          </ul>

          <div class="details-section-title">Ice-core snapshot</div>
          <p class="mini"><strong>Epoch:</strong> ${iceEpoch}</p>
          <p class="mini">${iceNote}</p>

          <div class="details-section-title">CST navigation note</div>
          <p class="mini">${cst}</p>
        </div>

        <div>
          <div class="details-section-title">Physics &amp; faith lenses</div>
          <p class="mini"><strong>Physical hypotheses:</strong> ${physics}</p>
          <p class="mini"><strong>Faith / meaning layer:</strong> ${faith}</p>

          ${envBlock}

          <div class="details-section-title">Nature ‚Üî Mystery slider</div>
          <div class="interpret-bar">
            <div class="interpret-marker" style="left:${offset}%;"></div>
          </div>
          <div class="interpret-labels">
            <span>Mostly nature</span>
            <span>Nature + faith</span>
            <span>Ambiguous</span>
            <span>Mystery open</span>
          </div>
        </div>
      </div>

      <div class="details-section-title" style="margin-top:8px;">CST ephemeris snapshot (Sun‚ÄìEarth‚ÄìMoon)</div>
      ${ephemHtml}

      <p class="muted mini" style="margin-top:6px;">
        For your big ‚Äúreset‚Äù research: line up these CST angles and ice-core epochs
        with your lost cities, earthquakes, tsunamis and volcano simulators. Where a
        miracle or haunting sits right on top of a strong natural pulse, mark it as
        <strong>physics + meaning</strong>; where nothing physical lines up, keep the
        door open instead of forcing a story either way.
      </p>
    `;
  }

  typeFilter.addEventListener("change", renderTable);
  regionFilter.addEventListener("change", renderTable);
  driverFilter.addEventListener("change", renderTable);
  searchBox.addEventListener("input", renderTable);

  renderTable();
</script>
</body>
</html>
