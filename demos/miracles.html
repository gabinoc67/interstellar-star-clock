<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Miracles ¬∑ Apparitions ¬∑ Ghost Physics ‚Äî Cosmic Clock Simulator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #020617;
      color: #e5e7eb;
    }

    header {
      padding: 16px 24px;
      border-bottom: 1px solid rgba(148,163,184,0.4);
      background: radial-gradient(circle at top left, #22c55e 0, #0f172a 40%, #000 100%);
      color: #e5e7eb;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 24px;
      letter-spacing: 0.04em;
    }

    header p {
      margin: 2px 0;
      font-size: 13px;
      color: #bbf7d0;
    }

    .muted {
      color: #9ca3af;
      font-size: 11px;
    }

    .mini {
      font-size: 11px;
    }

    .container {
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.8fr);
      gap: 16px;
      padding: 16px 20px 20px;
    }

    .panel {
      background: radial-gradient(circle at top, rgba(34,197,94,0.14), rgba(15,23,42,0.98));
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.35);
      box-shadow: 0 18px 45px rgba(15,23,42,0.9);
      padding: 14px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel h2 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e5e7eb;
    }

    .panel h2 span {
      font-size: 18px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 12px;
    }

    .controls label {
      font-size: 12px;
      color: #bbf7d0;
    }

    select, input[type="text"] {
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      color: #e5e7eb;
      padding: 4px 10px;
      font-size: 12px;
      outline: none;
    }

    select:focus, input[type="text"]:focus {
      border-color: #4ade80;
      box-shadow: 0 0 0 1px rgba(74,222,128,0.7);
    }

    input[type="text"] {
      min-width: 160px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 11px;
    }

    thead {
      position: sticky;
      top: 0;
      background: linear-gradient(to right, rgba(15,23,42,0.98), rgba(15,23,42,0.9));
      z-index: 1;
    }

    th, td {
      padding: 5px 5px;
      text-align: left;
      border-bottom: 1px solid rgba(55,65,81,0.7);
    }

    th {
      font-weight: 600;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #9ca3af;
      white-space: nowrap;
    }

    tbody tr {
      cursor: pointer;
      transition: background 0.1s ease, transform 0.08s ease;
    }

    tbody tr:hover {
      background: rgba(74,222,128,0.16);
      transform: translateY(-0.5px);
    }

    tbody tr.active-row {
      background: radial-gradient(circle at left, rgba(34,197,94,0.35), rgba(15,23,42,0.95));
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 1px 7px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid rgba(148,163,184,0.85);
      color: #e5e7eb;
      background: rgba(15,23,42,0.85);
      white-space: nowrap;
    }

    .tag-dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
    }

    .tag-cat-marian .tag-dot { background: #f97316; }
    .tag-cat-biblical .tag-dot { background: #22c55e; }
    .tag-cat-ghost .tag-dot { background: #a855f7; }
    .tag-cat-earthlight .tag-dot { background: #38bdf8; }
    .tag-cat-lab .tag-dot { background: #eab308; }

    .tag-region-europe .tag-dot { background: #60a5fa; }
    .tag-region-americas .tag-dot { background: #f97316; }
    .tag-region-middleeast .tag-dot { background: #facc15; }
    .tag-region-africa .tag-dot { background: #22c55e; }
    .tag-region-nordic .tag-dot { background: #a855f7; }
    .tag-region-lab .tag-dot { background: #e5e7eb; }

    .tag-driver {
      border-color: rgba(248,250,252,0.6);
      color: #e5e7eb;
    }

    .tag-sky {
      border-color: rgba(96,165,250,0.8);
      color: #bfdbfe;
    }

    .coords {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      color: #bae6fd;
    }

    .details-header {
      display: flex;
      flex-direction: column;
      gap: 2px;
      margin-bottom: 4px;
    }

    .details-title {
      font-size: 17px;
      font-weight: 600;
    }

    .details-subtitle {
      font-size: 12px;
      color: #9ca3af;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: 4px 0;
    }

    .details-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 10px;
      margin-top: 4px;
      font-size: 12px;
    }

    .details-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 3px;
    }

    ul {
      padding-left: 16px;
      margin: 3px 0;
    }

    li {
      margin-bottom: 2px;
      line-height: 1.35;
    }

    .scroll {
      max-height: 420px;
      overflow: auto;
      margin: 0 -6px -6px;
      padding: 0 6px 1px;
    }

    code {
      font-size: 11px;
      background: rgba(15,23,42,0.9);
      padding: 1px 4px;
      border-radius: 4px;
      border: 1px solid rgba(55,65,81,0.8);
    }

    @media (max-width: 1024px) {
      .container {
        grid-template-columns: minmax(0, 1fr);
      }
      .scroll {
        max-height: 280px;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>Miracles ¬∑ Apparitions ¬∑ Ghost Physics ‚Äî Cosmic Clock</h1>
  <p>
    Scriptural floods, Marian apparitions, earth-lights and ‚Äúhaunted‚Äù rooms ‚Äî
    all plotted by latitude, date, and physical drivers so you can compare
    <strong>Mother Nature ¬∑ EMF ¬∑ infrasound ¬∑ human expectation</strong> against your CST clock.
  </p>
  <p class="muted mini">
    This is a research simulator, not a verdict on faith. For each event you can
    log: coordinates, date, Sun sign & Moon phase (approximate), local EMF /
    infrasound / seismic noise and human expectations ‚Äî then decide if it looks
    like <strong>mostly physics</strong>, <strong>mostly miracle</strong>, or
    <strong>both together</strong>.
  </p>
</header>

<div class="container">
  <!-- LEFT: Event list -->
  <section class="panel">
    <h2><span>‚ú®</span> Events ¬∑ Miracles ¬∑ Ghost Sites</h2>
    <div class="controls">
      <label>
        Category:
        <select id="catFilter">
          <option value="all">All</option>
          <option value="marian">Marian apparitions</option>
          <option value="biblical">Biblical / scriptural</option>
          <option value="ghost">Ghost / haunting</option>
          <option value="earthlight">Earth-lights / plasma</option>
          <option value="lab">Lab EMF / infrasound</option>
        </select>
      </label>

      <label>
        Region:
        <select id="regionFilter">
          <option value="all">All regions</option>
          <option value="Europe">Europe</option>
          <option value="Americas">Americas</option>
          <option value="Middle East">Middle East</option>
          <option value="Africa">Africa</option>
          <option value="Nordic">Nordic / Arctic</option>
          <option value="Lab / Research">Lab / Research</option>
        </select>
      </label>

      <label>
        Physical driver:
        <select id="driverFilter">
          <option value="all">Any</option>
          <option value="optics">Optics / atmosphere</option>
          <option value="water">Flood / water dynamics</option>
          <option value="tectonic">Tectonic / tsunami / quake</option>
          <option value="emf">EMF / magnetic / plasma</option>
          <option value="infrasound">Infrasound / acoustic</option>
          <option value="psychology">Human expectation / crowd</option>
          <option value="astronomy">Astronomy / sky alignment</option>
        </select>
      </label>

      <label>
        Search:
        <input type="text" id="searchBox" placeholder="name, place, notes‚Ä¶">
      </label>
    </div>

    <div class="scroll">
      <table>
        <thead>
        <tr>
          <th>Event</th>
          <th>Category</th>
          <th>Region</th>
          <th>Lat</th>
          <th>Date</th>
          <th>Infra</th>
          <th>EMF</th>
          <th>Seis</th>
          <th>Expect.</th>
        </tr>
        </thead>
        <tbody id="eventTableBody"></tbody>
      </table>
    </div>
  </section>

  <!-- RIGHT: Details + CST / Star chart -->
  <section class="panel">
    <h2><span>üß≠</span> Cosmic Clock ¬∑ Sky ¬∑ Drivers</h2>
    <div id="detailsContent">
      <p class="muted">
        Select an event on the left to see:
      </p>
      <ul class="muted">
        <li>Lat/long band on your Cosmic Clock and hemisphere focus</li>
        <li>Approximate date, Sun sign, Moon phase / sign (where known)</li>
        <li>Local environment: infrasound, EMF / geomagnetic, seismic noise, human expectations</li>
        <li>Side-by-side ‚Äúscience lens‚Äù and ‚Äúfaith lens‚Äù interpretation</li>
        <li>Generic CST &amp; star-chart formulas (Julian Date ‚Üí Sidereal Time ‚Üí RA/Dec ‚Üí CST sectors)</li>
      </ul>
    </div>
  </section>
</div>

<script>
  // ---------- Helper functions ----------
  function latBand(lat) {
    const a = Math.abs(lat);
    if (a < 10) return "Equatorial band (0‚Äì10¬∞)";
    if (a < 23.5) return "Tropical band (10‚Äì23.5¬∞)";
    if (a < 40) return "Subtropical / warm mid-latitudes (23.5‚Äì40¬∞)";
    if (a < 60) return "Mid-latitudes (40‚Äì60¬∞)";
    return "High-latitude / polar (60¬∞+)";
  }

  function hemisphereOf(lat) {
    if (lat > 1e-3) return "Northern Hemisphere";
    if (lat < -1e-3) return "Southern Hemisphere";
    return "Near Equator";
  }

  function categoryClass(catKey) {
    if (catKey === "marian") return "tag tag-cat-marian";
    if (catKey === "biblical") return "tag tag-cat-biblical";
    if (catKey === "ghost") return "tag tag-cat-ghost";
    if (catKey === "earthlight") return "tag tag-cat-earthlight";
    if (catKey === "lab") return "tag tag-cat-lab";
    return "tag";
  }

  function regionClass(region) {
    if (region === "Europe") return "tag tag-region-europe";
    if (region === "Americas") return "tag tag-region-americas";
    if (region === "Middle East") return "tag tag-region-middleeast";
    if (region === "Africa") return "tag tag-region-africa";
    if (region === "Nordic") return "tag tag-region-nordic";
    if (region === "Lab / Research") return "tag tag-region-lab";
    return "tag";
  }

  function expectationLabel(level) {
    if (!level) return "";
    if (level === "Low") return "Low (no prior belief)";
    if (level === "Medium") return "Medium";
    if (level === "High") return "High (pilgrims / believers)";
    if (level === "Very high") return "Very high (crowd awaiting sign)";
    return level;
  }

  function driverLabel(code) {
    const map = {
      optics: "Optics / atmosphere",
      water: "Flood / water dynamics",
      tectonic: "Tectonic / tsunami / quake",
      emf: "EMF / magnetic / plasma",
      infrasound: "Infrasound / low-freq sound",
      psychology: "Human expectation / crowd",
      astronomy: "Astronomy / sky alignment"
    };
    return map[code] || code;
  }

  // ---------- Dataset ----------
  // For each event:
  // id, name, tradition, categoryKey, categoryLabel, region,
  // lat, lon, locationText, dateText, timeHint,
  // sunSign, moonPhase, moonSign,
  // infrasound, emf, seismic, expectation,
  // drivers (array of driver codes),
  // scienceView, faithView, bothView, notes

  const events = [
    {
      id: "sea_of_reeds",
      name: "Crossing of the Sea (Sea of Reeds / Red Sea traditions)",
      tradition: "Jewish / Christian scripture (Exodus)",
      categoryKey: "biblical",
      categoryLabel: "Biblical / scriptural",
      region: "Middle East",
      lat: 29.5,
      lon: 32.6,
      locationText: "Likely northern Red Sea / lakes region, between Nile delta and Sinai (approx. 29.5¬∞N, 32.6¬∞E).",
      dateText: "Late Bronze Age or early Iron Age (‚âà1500‚Äì1200 BCE; highly uncertain)",
      timeHint: "Nighttime wind and low tide in many reconstructions.",
      sunSign: "Unknown (date not securely known)",
      moonPhase: "Unknown",
      moonSign: "Unknown",
      infrasound: "Possible surf roar + storm winds over shallow lagoon / marsh.",
      emf: "Natural geomagnetic background; lightning possible in storm scenarios.",
      seismic: "Some models use no quake; others allow quake-triggered seiche or tsunami.",
      expectation: "Medium ‚Äî people in crisis, following Moses but not expecting a ‚Äòphysics lesson‚Äô.",
      drivers: ["water","tectonic","astronomy","psychology"],
      scienceView:
        "Several physical models exist: strong overnight winds blowing along a shallow lagoon can create a temporary land bridge, "
        + "with water returning in a surge when winds drop; earthquake-triggered seiche or tsunami in a narrow basin could also briefly expose seafloor.",
      faithView:
        "In scriptural tradition this is a direct, purposeful act of God to rescue a specific people at a specific moment.",
      bothView:
        "Your CST clock can treat this as a ‚Äòresonant alignment‚Äô event: natural wind, tide and basin geometry line up at exactly the time a community needs escape.",
      notes:
        "Good candidate for coupling your flood/tide models to CST sectors: when does a strong, persistent wind aligned to basin geometry become most likely?"
    },
    {
      id: "noahs_flood",
      name: "Great Flood (Noah traditions)",
      tradition: "Jewish / Christian / Islamic scripture",
      categoryKey: "biblical",
      categoryLabel: "Biblical / scriptural",
      region: "Middle East",
      lat: 36.2,
      lon: 43.0,
      locationText: "Ararat region near Eastern Turkey / Armenia / N Iraq (‚âà36¬∞N, 43¬∞E) for ‚Äòark resting place‚Äô.",
      dateText: "Deep mythic time; often linked to early Holocene megafloods (~10,000‚Äì5,000 BCE)",
      timeHint: "Extended multi-month flood season rather than a single day.",
      sunSign: "Varies across months; not a single alignment.",
      moonPhase: "All phases across a prolonged flood.",
      moonSign: "All signs across the flood duration.",
      infrasound: "Storm waves, heavy rain and distant rockfalls can generate low-frequency noise.",
      emf: "Thunderstorms + charged clouds; possible enhanced Schumann-like conditions during intense storms.",
      seismic: "Some proposed links to regional quakes, submarine landslides and sudden basin infill events.",
      expectation: "Low at start (ordinary life), rising to terror as water continues to rise beyond normal memory.",
      drivers: ["water","tectonic","astronomy","psychology"],
      scienceView:
        "Multiple real megaflood candidates exist (Black Sea level rise, Mesopotamian river floods, local dam-breaks). "
        + "A civilization-scale memory could compress many large floods into one archetypal story.",
      faithView:
        "In faith traditions the flood is moral and cosmic: a reset of human behavior and a covenant event, not just hydrology.",
      bothView:
        "On your CST clock this can be treated as a ‚Äòstacked catastrophe‚Äô: orbital cycles + sea-level rise + tectonics + extreme weather, later remembered as a single global reset.",
      notes:
        "You can cross-reference your lost-cities and ice-core simulators here: where do big flood pulses and city collapses overlap?"
    },
    {
      id: "guadalupe_1531",
      name: "Our Lady of Guadalupe (Tepeyac Hill)",
      tradition: "Catholic ¬∑ Marian apparition",
      categoryKey: "marian",
      categoryLabel: "Marian apparition",
      region: "Americas",
      lat: 19.484,
      lon: -99.117,
      locationText: "Tepeyac Hill / Basilica of Our Lady of Guadalupe, Mexico City (‚âà19.48¬∞N, 99.12¬∞W).",
      dateText: "9‚Äì12 Dec 1531 (series of reported encounters)",
      timeHint: "Morning-daytime encounters in most narratives.",
      sunSign: "Sagittarius (Sun in Sagittarius mid-December).",
      moonPhase: "Waxing crescent to first-quarter, depending on specific date/time used.",
      moonSign: "Likely early Capricorn / Aquarius region for some reported times (approximate).",
      infrasound: "No measurements; urban/rural acoustic background only.",
      emf: "Geomagnetic background; no instrument records from 16th century.",
      seismic: "Central Mexico is tectonically active, but no specific quake tied to the apparitions.",
      expectation: "Medium ‚Üí High ‚Äî indigenous convert in crisis, but no large pre-announced crowd as in F√°tima.",
      drivers: ["astronomy","psychology"],
      scienceView:
        "Psychology, colonial context, and visual perception can explain parts of the story, but not every historical detail can be tested with instruments.",
      faithView:
        "For millions this is a foundational miracle: a precise image, encoded symbols, and timing that accelerated the conversion of a continent.",
      bothView:
        "On the CST clock you can treat this as a ‚Äòphase-lock‚Äô between sky symbolism (Sun, Moon, stars on the tilma) and a major civilizational turning point.",
      notes:
        "Good anchor for your CST-symbolism work: cloak imagery ‚Üí star/constellation overlays ‚Üí Mesoamerican calendar correlations."
    },
    {
      id: "lourdes_1858",
      name: "Lourdes Apparitions (Massabielle Grotto)",
      tradition: "Catholic ¬∑ Marian apparition",
      categoryKey: "marian",
      categoryLabel: "Marian apparition",
      region: "Europe",
      lat: 43.098,
      lon: -0.058,
      locationText: "Grotto of Massabielle, Lourdes, France (‚âà43.10¬∞N, 0.06¬∞W).",
      dateText: "11 Feb ‚Äì 16 Jul 1858 (18 reported apparitions)",
      timeHint: "Often morning; some in cold, damp winter air at the grotto.",
      sunSign: "First apparition 11 Feb ‚Üí Sun in Aquarius.",
      moonPhase: "First apparition: waning crescent; later dates cover multiple phases.",
      moonSign: "Near Capricorn‚ÄìAquarius boundary for 11 Feb (approximate).",
      infrasound: "River flow + cave reverberation can create low-frequency background hum.",
      emf: "Limestone cave with flowing water: weak natural electro-telluric currents are possible.",
      seismic: "No notable seismic events tied to 1858 apparitions.",
      expectation: "Initially low (Bernadette alone), later high as crowds and pilgrimage expectations grow.",
      drivers: ["water","psychology","astronomy"],
      scienceView:
        "No strong geophysical anomaly is required; placebo and suggestion are powerful, but a minority of reported healings remain medically unusual.",
      faithView:
        "The Church treats a small subset of healings as formally recognized miracles after strict medical review; for believers the timing and content of the messages matter more than geology.",
      bothView:
        "You can treat Lourdes as a ‚Äòresonant focus point‚Äô: flowing water, cave acoustics and crowd expectation all amplifying a small initial signal.",
      notes:
        "Use this site in your simulator to compare ‚Äòholy water‚Äô claims vs ordinary spring chemistry and your EMF / CST timing variables."
    },
    {
      id: "fatima_1917",
      name: "Miracle of the Sun, F√°tima",
      tradition: "Catholic ¬∑ Marian apparition",
      categoryKey: "marian",
      categoryLabel: "Marian apparition",
      region: "Europe",
      lat: 39.626,
      lon: -8.670,
      locationText: "Cova da Iria, near F√°tima, Portugal (‚âà39.63¬∞N, 8.67¬∞W).",
      dateText: "13 Oct 1917 (crowd estimate ‚âà30,000‚Äì70,000+)",
      timeHint: "Around noon local solar time.",
      sunSign: "Libra (mid-Libra in tropical zodiac).",
      moonPhase: "Waning crescent, a couple of days before New Moon.",
      moonSign: "Near Virgo‚ÄìLibra region (approximate; exact RA from your CST ephemeris).",
      infrasound: "Open field; wind gusts and crowd motion produce broadband low-frequency noise.",
      emf: "No magnetometer data; geomagnetic field normal for Portugal.",
      seismic: "No recorded local earthquakes associated with this day.",
      expectation: "Very high ‚Äî people explicitly came because a miracle had been ‚Äòannounced‚Äô.",
      drivers: ["optics","psychology","astronomy"],
      scienceView:
        "Optical explanations include after-images from staring at the Sun, thin cloud layers, and atmospheric scattering; mass psychology and suggestion can synchronize how people report motion and color.",
      faithView:
        "For many Catholics, the scale of the crowd, coherence of testimonies, and linked prophecies make this a paradigmatic 20th-century miracle.",
      bothView:
        "On your CST clock you can model this as ‚ÄòSun sector + Libra balance‚Äô: people expecting a cosmic sign at a precise time, with the sky cooperating just enough that physics and meaning overlap.",
      notes:
        "Good candidate for overlaying your Sun‚ÄìMoon ephemeris, local weather reconstructions and crowd-expectation index."
    },
    {
      id: "zeitoun_1968",
      name: "Our Lady of Zeitoun (Cairo rooftop lights)",
      tradition: "Coptic Orthodox ¬∑ Marian apparition",
      categoryKey: "marian",
      categoryLabel: "Marian apparition",
      region: "Africa",
      lat: 30.06,
      lon: 31.28,
      locationText: "Church of the Virgin Mary, Zeitoun district, Cairo, Egypt (‚âà30.06¬∞N, 31.28¬∞E).",
      dateText: "2 Apr 1968 ‚Äì 1971 (repeated luminous forms over church domes)",
      timeHint: "Mostly at night, lasting minutes to hours.",
      sunSign: "First major night 2 Apr 1968 ‚Üí Sun in Aries.",
      moonPhase: "Near first-quarter to waxing gibbous on some major nights (approximate).",
      moonSign: "Varies by date; your CST engine can compute exact RA/dec.",
      infrasound: "Urban Cairo traffic + building resonances; no specific infrasound studies during the events.",
      emf: "City power grid, tram lines and rooftop wiring ‚Üí strong anthropogenic EM background.",
      seismic: "Cairo has modest seismicity; no clear quake‚Äìapparition correlation reported.",
      expectation: "High ‚Äî after news spread, large crowds gathered watching the roof almost nightly.",
      drivers: ["optics","emf","psychology","astronomy"],
      scienceView:
        "Photos show luminous forms above domes; skeptics suggest hoaxes, searchlights, or atmospheric optical effects in polluted air. Lack of nearby projection hardware remains an open technical point in some reports.",
      faithView:
        "Recognized by the Coptic Church as a national-scale sign of protection and comfort during a turbulent period in Egypt.",
      bothView:
        "In your simulator Zeitoun can be logged as ‚Äòlight-over-dome‚Äô events where urban EM, aerosols and human expectation all resonate at one sacred rooftop.",
      notes:
        "Nice bridge between your earth-lights work (Hessdalen) and Marian apparitions: compare spectra, duration, color and recurrence patterns."
    },
    {
      id: "hessdalen",
      name: "Hessdalen Lights (dusty plasma / earth-light valley)",
      tradition: "Anomalous earth lights (scientific + folklore)",
      categoryKey: "earthlight",
      categoryLabel: "Earth-lights / plasma",
      region: "Nordic",
      lat: 62.68,
      lon: 11.20,
      locationText: "Hessdalen valley, central Norway (‚âà62.7¬∞N, 11.2¬∞E).",
      dateText: "1930s‚Äìpresent (especially active early 1980s; ongoing rare events)",
      timeHint: "Often winter nights; some daytime cases.",
      sunSign: "Varies across decades; most observations in dark seasons when Sun is low or below horizon.",
      moonPhase: "All phases; some clustering may appear in your CST statistics.",
      moonSign: "All signs across long time series.",
      infrasound: "Mountain winds, river noise and distant avalanches can generate strong infrasound.",
      emf: "Automatic Measurement Station uses magnetometer; transient EM spikes detected during some events.",
      seismic: "Background micro-seismicity plus glacial rock strain and potential piezoelectric effects in quartz-bearing rocks.",
      expectation: "Medium ‚Äî locals expect lights but many visitors arrive as neutral observers.",
      drivers: ["emf","infrasound","tectonic","astronomy"],
      scienceView:
        "Leading models use dusty plasma, radon ionization and piezoelectric rock strain to explain self-organized light balls and their spectra.",
      faithView:
        "Some visitors treat the lights as spiritual or UFO-like; local culture includes both scientific curiosity and mystery.",
      bothView:
        "Hessdalen is a great ‚Äòcontrol case‚Äô for your miracles table: luminous phenomena with instruments but no religious content baked in.",
      notes:
        "Use this as the baseline row when you compare Marian ‚Äòlight‚Äô events to pure geophysical light balls."
    },
    {
      id: "coventry_infrasound",
      name: "Coventry ‚ÄúHaunted Cellar‚Äù ¬∑ 19 Hz Infrasound",
      tradition: "Ghost reports explained by infrasound",
      categoryKey: "ghost",
      categoryLabel: "Ghost / haunting",
      region: "Europe",
      lat: 52.41,
      lon: -1.51,
      locationText: "14th-century cellar near Coventry, England (tourist information site area).",
      dateText: "1990s investigations (Vic Tandy et al.)",
      timeHint: "Late-night lab and cellar visits.",
      sunSign: "Varies; not central to this case.",
      moonPhase: "Irrelevant; indoor setting.",
      moonSign: "Irrelevant; indoor setting.",
      infrasound: "Continuous standing wave ‚âà18.9‚Äì19 Hz from ventilation / extractor fans at strong amplitude.",
      emf: "Normal building EM; not the dominant factor.",
      seismic: "Negligible; typical urban background.",
      expectation: "Medium ‚Äî location had ghost stories, but some investigators were skeptics.",
      drivers: ["infrasound","psychology"],
      scienceView:
        "Infrasound near 19 Hz can resonate with the eyeball and vestibular system, producing feelings of presence, dread and even grey ‚Äòforms‚Äô in peripheral vision. Turning the fan off eliminated the ‚Äòhauntings‚Äô.",
      faithView:
        "Those inclined to believe in ghosts might still interpret earlier experiences as genuine encounters, later ‚Äòmasked‚Äô by a physical explanation.",
      bothView:
        "For your CST system this is the clearest example of a ‚Äòghost‚Äô where physics alone can reproduce the core sensations.",
      notes:
        "Template row for your table structure: Ghost sighting at (lat, lon) with explicit columns for infrasound / EMF / seismic / expectation."
    },
    {
      id: "lab_god_helmet",
      name: "Lab ‚ÄúPresence‚Äù Experiments (EMF / God-Helmet style)",
      tradition: "Laboratory-induced ‚Äòpresence‚Äô / spiritual feelings",
      categoryKey: "lab",
      categoryLabel: "Lab EMF / infrasound",
      region: "Lab / Research",
      lat: 46.0,
      lon: -79.0,
      locationText: "Generic lab coordinates (e.g., EM / psychology labs in Canada and Europe).",
      dateText: "1980s‚Äì2000s experimental protocols",
      timeHint: "Controlled session blocks in dark, quiet rooms.",
      sunSign: "Not relevant (indoor lab).",
      moonPhase: "Not relevant (indoor lab).",
      moonSign: "Not relevant.",
      infrasound: "Sometimes intentionally introduced; sometimes carefully minimized.",
      emf: "Complex, patterned weak magnetic fields applied around the head in some experiments.",
      seismic: "Negligible in typical lab settings.",
      expectation: "Medium ‚Äî volunteers know they‚Äôre in a ‚Äúweird sensations‚Äù experiment.",
      drivers: ["emf","psychology"],
      scienceView:
        "Some participants report presences, voices or ‚Äòentity‚Äô feelings under specific EM patterns; results are mixed across replications.",
      faithView:
        "For believers this doesn‚Äôt disprove spiritual encounters; it just shows the brain has a channel that can be tickled artificially.",
      bothView:
        "In your simulator, this becomes the lab-calibrated benchmark for ‚Äòhow much EM modulation is needed to bend perception by X%‚Äô.",
      notes:
        "Pairs well with your VRMS and CST-frequency work: the brain itself is another resonant coil in the cosmic circuit."
    }
  ];

  // ---------- UI wiring ----------
  const tbody = document.getElementById("eventTableBody");
  const detailsContent = document.getElementById("detailsContent");
  const catFilter = document.getElementById("catFilter");
  const regionFilter = document.getElementById("regionFilter");
  const driverFilter = document.getElementById("driverFilter");
  const searchBox = document.getElementById("searchBox");

  function renderTable() {
    const cat = catFilter.value;
    const reg = regionFilter.value;
    const drv = driverFilter.value;
    const q = (searchBox.value || "").toLowerCase();

    tbody.innerHTML = "";

    const filtered = events.filter(ev => {
      if (cat !== "all" && ev.categoryKey !== cat) return false;
      if (reg !== "all" && ev.region !== reg) return false;
      if (drv !== "all" && (!ev.drivers || !ev.drivers.includes(drv))) return false;

      if (q) {
        const hay = (ev.name + " " + ev.locationText + " " + ev.tradition + " " + (ev.notes || "")).toLowerCase();
        if (!hay.includes(q)) return false;
      }
      return true;
    });

    filtered.forEach(ev => {
      const tr = document.createElement("tr");
      tr.dataset.id = ev.id;

      const tdName = document.createElement("td");
      tdName.textContent = ev.name;

      const tdCat = document.createElement("td");
      const spanCat = document.createElement("span");
      spanCat.className = categoryClass(ev.categoryKey);
      const dotC = document.createElement("span");
      dotC.className = "tag-dot";
      const labC = document.createElement("span");
      labC.textContent = ev.categoryLabel;
      spanCat.appendChild(dotC);
      spanCat.appendChild(labC);
      tdCat.appendChild(spanCat);

      const tdReg = document.createElement("td");
      const spanReg = document.createElement("span");
      spanReg.className = regionClass(ev.region);
      const dotR = document.createElement("span");
      dotR.className = "tag-dot";
      const labR = document.createElement("span");
      labR.textContent = ev.region;
      spanReg.appendChild(dotR);
      spanReg.appendChild(labR);
      tdReg.appendChild(spanReg);

      const tdLat = document.createElement("td");
      tdLat.textContent = ev.lat.toFixed(2);

      const tdDate = document.createElement("td");
      tdDate.textContent = ev.dateText;

      const tdInf = document.createElement("td");
      tdInf.textContent = ev.infrasound ? (ev.infrasound.split(".")[0] + ".") : "‚Äî";

      const tdEmf = document.createElement("td");
      tdEmf.textContent = ev.emf ? (ev.emf.split(".")[0] + ".") : "‚Äî";

      const tdSeis = document.createElement("td");
      tdSeis.textContent = ev.seismic ? (ev.seismic.split(".")[0] + ".") : "‚Äî";

      const tdExp = document.createElement("td");
      tdExp.textContent = expectationLabel(ev.expectation || "Unknown");

      tr.appendChild(tdName);
      tr.appendChild(tdCat);
      tr.appendChild(tdReg);
      tr.appendChild(tdLat);
      tr.appendChild(tdDate);
      tr.appendChild(tdInf);
      tr.appendChild(tdEmf);
      tr.appendChild(tdSeis);
      tr.appendChild(tdExp);

      tr.addEventListener("click", () => {
        document.querySelectorAll("#eventTableBody tr").forEach(r => r.classList.remove("active-row"));
        tr.classList.add("active-row");
        renderDetails(ev);
      });

      tbody.appendChild(tr);
    });

    if (!filtered.length) {
      const tr = document.createElement("tr");
      const td = document.createElement("td");
      td.colSpan = 9;
      td.className = "muted";
      td.textContent = "No events match the current filters.";
      tr.appendChild(td);
      tbody.appendChild(tr);
    }
  }

  function renderDetails(ev) {
    const hemi = hemisphereOf(ev.lat);
    const band = latBand(ev.lat);
    const expectation = expectationLabel(ev.expectation || "Unknown");

    const driverTags = (ev.drivers || []).map(d => `
      <span class="tag tag-driver">
        <span class="tag-dot" style="background:#facc15;"></span>
        <span>${driverLabel(d)}</span>
      </span>
    `).join("");

    const skyTag = `
      <span class="tag tag-sky">
        <span class="tag-dot" style="background:#60a5fa;"></span>
        <span>Sun: ${ev.sunSign || "Unknown"} ¬∑ Moon: ${ev.moonPhase || "Unknown phase"}${ev.moonSign ? " ¬∑ Moon sign ~ " + ev.moonSign : ""}</span>
      </span>
    `;

    const regionTag = `
      <span class="${regionClass(ev.region)}">
        <span class="tag-dot"></span>
        <span>${ev.region}</span>
      </span>
    `;

    const catTag = `
      <span class="${categoryClass(ev.categoryKey)}">
        <span class="tag-dot"></span>
        <span>${ev.categoryLabel}</span>
      </span>
    `;

    detailsContent.innerHTML = `
      <div class="details-header">
        <div class="details-title">${ev.name}</div>
        <div class="details-subtitle">${ev.dateText}</div>
        <div class="coords">
          ${ev.locationText}<br>
          Lat ${ev.lat.toFixed(4)}¬∞, Lon ${ev.lon.toFixed(4)}¬∞
        </div>
      </div>

      <div class="pill-row">
        ${catTag}
        ${regionTag}
        ${skyTag}
        ${driverTags}
      </div>

      <div class="details-grid">
        <div>
          <div class="details-section-title">Cosmic Clock Position</div>
          <ul>
            <li><strong>Latitude band:</strong> ${band}</li>
            <li><strong>Hemisphere focus:</strong> ${hemi}</li>
            <li><strong>Tradition:</strong> ${ev.tradition}</li>
            <li><strong>Local time style:</strong> ${ev.timeHint || "Not well constrained"}</li>
          </ul>

          <div class="details-section-title">Environment ¬∑ Ghost Physics Table</div>
          <ul>
            <li><strong>Infrasound:</strong> ${ev.infrasound || "No data / not measured"}</li>
            <li><strong>EMF / magnetic:</strong> ${ev.emf || "No data / not measured"}</li>
            <li><strong>Seismic noise:</strong> ${ev.seismic || "No data / not measured"}</li>
            <li><strong>Human expectations:</strong> ${expectation}</li>
          </ul>

          <div class="details-section-title">Notes / CST hooks</div>
          <p class="mini">${ev.notes || "No extra notes yet ‚Äî you can extend this row with your own CST metrics."}</p>
        </div>

        <div>
          <div class="details-section-title">Interpretation ‚Äî Science ¬∑ Faith ¬∑ Both</div>
          <ul>
            <li><strong>Science lens:</strong> ${ev.scienceView}</li>
            <li><strong>Faith lens:</strong> ${ev.faithView}</li>
            <li><strong>Both together:</strong> ${ev.bothView}</li>
          </ul>

          <div class="details-section-title">CST &amp; Star-Chart Toolkit (generic)</div>
          <ul class="mini">
            <li>
              <strong>1. Calendar ‚Üí Julian Date (JD):</strong><br>
              For UTC date/time <code>Y, M, D, h, m, s</code>, compute JD with your standard routine
              (e.g. Meeus formula). You already use this in your CST engine.
            </li>
            <li>
              <strong>2. JD ‚Üí Greenwich Sidereal Time (GMST):</strong><br>
              Use an approximation like
              <code>GMST_hours ‚âà 18.697374558 + 24.06570982441908 ¬∑ (JD ‚àí 2451545.0)</code> (mod 24).
            </li>
            <li>
              <strong>3. GMST ‚Üí Local Sidereal Time (LST):</strong><br>
              <code>LST_hours = GMST_hours + (longitude_deg / 15)</code> (mod 24).<br>
              This pins the RA meridian overhead at the event site.
            </li>
            <li>
              <strong>4. Sun / Moon ecliptic longitude Œª:</strong><br>
              From JD, get Sun and Moon Œª using your existing ephemeris or an approximate series.
              Map Œª to zodiac sign: Aries 0‚Äì30¬∞, Taurus 30‚Äì60¬∞, ‚Ä¶, Pisces 330‚Äì360¬∞.
            </li>
            <li>
              <strong>5. CST sector index:</strong><br>
              Example: <code>CST_sector = floor( (Œª_sun / 360) ¬∑ 12 )</code> for 12 major sectors
              (or 24/60/360 sectors in your finer grid).
            </li>
            <li>
              <strong>6. Ghost-physics overlay:</strong><br>
              At the same timestamp, log <code>EMF(t)</code>, <code>Inf(t)</code>, <code>Seis(t)</code>,
              plus a subjective <code>Expectation(t)</code> (0‚Äì1). Your simulator can then look for
              coincidences of high CST alignment + high EMF/infrasound + high expectation for each event.
            </li>
          </ul>
        </div>
      </div>

      <p class="muted mini" style="margin-top:6px;">
        Use this page like your lost-cities and ice-core dashboards: once you decide on a target event,
        plug the exact date/time into your CST calculator, attach real EMF / infrasound / seismic logs
        when available, and see whether the ‚Äúmiracle‚Äù sits inside a natural resonance window,
        outside it, or right on the edge where physics and mystery touch.
      </p>
    `;
  }

  // Filters
  catFilter.addEventListener("change", renderTable);
  regionFilter.addEventListener("change", renderTable);
  driverFilter.addEventListener("change", renderTable);
  searchBox.addEventListener("input", renderTable);

  // Initial render
  renderTable();
</script>
</body>
</html>
