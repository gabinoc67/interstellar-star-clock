<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Genesis Continuum ‚Äì Survival & Hope Cosmic Clock</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #020617;
      color: #e5e7eb;
    }

    header {
      padding: 16px 24px;
      border-bottom: 1px solid rgba(148,163,184,0.4);
      background: radial-gradient(circle at top left, #22c55e 0, #0f172a 40%, #000 100%);
      color: #e5e7eb;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 24px;
      letter-spacing: 0.04em;
    }

    header p {
      margin: 2px 0;
      font-size: 13px;
      color: #bbf7d0;
    }

    .muted {
      color: #9ca3af;
      font-size: 11px;
    }

    .mini {
      font-size: 11px;
    }

    .container {
      display: grid;
      grid-template-columns: minmax(0, 1.9fr) minmax(0, 1.7fr);
      gap: 16px;
      padding: 16px 20px 20px;
    }

    .panel {
      background: radial-gradient(circle at top, rgba(34,197,94,0.16), rgba(15,23,42,0.98));
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.35);
      box-shadow: 0 18px 45px rgba(15,23,42,0.9);
      padding: 14px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel h2 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e5e7eb;
    }

    .panel h2 span {
      font-size: 18px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 12px;
    }

    .controls label {
      font-size: 12px;
      color: #bbf7d0;
    }

    select, input[type="text"] {
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      color: #e5e7eb;
      padding: 4px 10px;
      font-size: 12px;
      outline: none;
    }

    select:focus, input[type="text"]:focus {
      border-color: #22c55e;
      box-shadow: 0 0 0 1px rgba(34,197,94,0.7);
    }

    input[type="text"] {
      min-width: 150px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 12px;
    }

    thead {
      position: sticky;
      top: 0;
      background: linear-gradient(to right, rgba(15,23,42,0.98), rgba(15,23,42,0.9));
      z-index: 1;
    }

    th, td {
      padding: 6px 6px;
      text-align: left;
      border-bottom: 1px solid rgba(22,101,52,0.7);
    }

    th {
      font-weight: 600;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #9ca3af;
    }

    tbody tr {
      cursor: pointer;
      transition: background 0.1s ease, transform 0.08s ease;
    }

    tbody tr:hover {
      background: rgba(34,197,94,0.18);
      transform: translateY(-0.5px);
    }

    tbody tr.active-row {
      background: radial-gradient(circle at left, rgba(52,211,153,0.35), rgba(15,23,42,0.95));
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 1px 7px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid rgba(148,163,184,0.85);
      color: #e5e7eb;
      background: rgba(15,23,42,0.85);
      white-space: nowrap;
    }

    .tag-dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
    }

    .tag-era-life .tag-dot { background: #38bdf8; }
    .tag-era-mammal .tag-dot { background: #a855f7; }
    .tag-era-hominin .tag-dot { background: #22c55e; }
    .tag-era-human .tag-dot { background: #f97316; }

    .tag-env-gentle .tag-dot { background: #4ade80; }
    .tag-env-harsh .tag-dot { background: #ef4444; }
    .tag-env-mixed .tag-dot { background: #eab308; }

    .tag-mode-multiply {
      border-color: rgba(52,211,153,0.9);
      color: #a7f3d0;
    }
    .tag-mode-conserve {
      border-color: rgba(248,250,252,0.6);
      color: #e5e7eb;
    }

    .tag-hope-low {
      border-color: rgba(148,163,184,0.9);
      color: #e5e7eb;
    }
    .tag-hope-high {
      border-color: rgba(244,114,182,0.9);
      color: #f9a8d4;
    }

    .coords {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      color: #bbf7d0;
    }

    .details-header {
      display: flex;
      flex-direction: column;
      gap: 2px;
      margin-bottom: 4px;
    }

    .details-title {
      font-size: 17px;
      font-weight: 600;
    }

    .details-subtitle {
      font-size: 12px;
      color: #9ca3af;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: 4px 0;
    }

    .details-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.1fr);
      gap: 10px;
      margin-top: 4px;
      font-size: 12px;
    }

    .details-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 3px;
    }

    ul {
      padding-left: 16px;
      margin: 3px 0;
    }

    li {
      margin-bottom: 2px;
      line-height: 1.35;
    }

    .scroll {
      max-height: 410px;
      overflow: auto;
      margin: 0 -6px -6px;
      padding: 0 6px 1px;
    }

    .bar-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 2px 0;
    }

    .bar-label {
      font-size: 11px;
      width: 110px;
      color: #9ca3af;
    }

    .bar-track {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(55,65,81,0.9);
      overflow: hidden;
    }

    .bar-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(to right, #22c55e, #f97316);
      width: 50%;
    }

    @media (max-width: 960px) {
      .container {
        grid-template-columns: minmax(0, 1fr);
      }
      .scroll {
        max-height: 280px;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>Genesis Continuum ‚Äì Survival & Hope Cosmic Clock</h1>
  <p>
    From the first cells to modern humans: how life shifts between multiplying in good times and conserving in harsh times ‚Äì
    and how, in humans, ‚Äúhope and faith‚Äù act like inner survival training, not the origin of consciousness itself.
  </p>
  <p class="muted mini">
    This is a conceptual simulation, not a strict fossil timeline. It blends biology (mutation & survival), environment
    (plentiful vs harsh), and the growth of inner life (awareness, meaning, hope).
  </p>
</header>

<div class="container">
  <section class="panel">
    <h2><span>üß¨</span> Stages of the Genesis Continuum</h2>
    <div class="controls">
      <label>
        Stage type:
        <select id="typeFilter">
          <option value="all">All types</option>
          <option value="life">Early life</option>
          <option value="mammal">Mammals & primates</option>
          <option value="hominin">Early hominins</option>
          <option value="human">Modern humans</option>
        </select>
      </label>

      <label>
        Environment:
        <select id="envFilter">
          <option value="all">Any</option>
          <option value="gentle">More gentle / plentiful</option>
          <option value="harsh">Harsh / crisis</option>
          <option value="mixed">Mixed / unstable</option>
        </select>
      </label>

      <label>
        Mode:
        <select id="modeFilter">
          <option value="all">Multiply &amp; conserve</option>
          <option value="multiply">Multiply-focus</option>
          <option value="conserve">Conserve / adapt-focus</option>
        </select>
      </label>

      <label>
        Search:
        <input type="text" id="searchBox" placeholder="stage, idea, notes‚Ä¶">
      </label>
    </div>

    <div class="scroll">
      <table>
        <thead>
        <tr>
          <th>Stage</th>
          <th>Era</th>
          <th>Env</th>
          <th>Mode</th>
          <th>Approx. Time</th>
        </tr>
        </thead>
        <tbody id="eventTableBody"></tbody>
      </table>
    </div>
  </section>

  <section class="panel">
    <h2><span>üß≠</span> Survival Mode ¬∑ Consciousness ¬∑ Hope</h2>
    <div id="detailsContent">
      <p class="muted">
        Select a stage on the left to see:
      </p>
      <ul class="muted">
        <li>Whether the Earth was mostly <strong>plentiful or harsh</strong> for that life-form</li>
        <li>How much its survival strategy leaned toward <strong>multiplying</strong> vs <strong>conserving/adapting</strong></li>
        <li>What kind of <strong>consciousness</strong> was present (instinct, awareness, self-reflection)</li>
        <li>How <strong>hope / faith / meaning</strong> acts as a training system for humans to keep going through hard cycles</li>
      </ul>
    </div>
  </section>
</div>

<script>
  // ---------- Dataset ----------

  // fields:
  // id, name, type, eraGroup, env, envLabel, modeBias (0=conserve,1=multiply),
  // timeLabel, description,
  // consciousnessLevel (0-10), hopeSystem (0-10),
  // survivalBehaviors, consciousnessNotes, hopeNotes, faithNotes

  const stages = [
    {
      id: "primordial",
      name: "Primordial life ‚Äì first cells",
      type: "life",
      eraGroup: "Early Earth",
      env: "harsh",
      envLabel: "Hot, unstable, toxic by modern standards",
      modeBias: 0.2,
      timeLabel: "‚âà3.8‚Äì3.0 billion years ago",
      description: "Life appears in oceans and vents; chemistry learns to copy itself and repair damage.",
      consciousnessLevel: 1,
      hopeSystem: 0,
      survivalBehaviors: "Simple replication, error correction, clumping into colonies for protection.",
      consciousnessNotes: "No thoughts yet, but the basic loop of sense ‚Üí respond ‚Üí survive begins here.",
      hopeNotes: "No hope, just chemistry ‚Äì but this is where the deep pattern of persistence starts.",
      faithNotes: "From a spiritual view, some people see this as the first spark of God‚Äôs creative breath in matter."
    },
    {
      id: "multicellular",
      name: "Multicellular life & nervous systems",
      type: "life",
      eraGroup: "Pre-Cambrian & early animals",
      env: "mixed",
      envLabel: "Oceans stabilize, oxygen rises; some catastrophes, some calm periods",
      modeBias: 0.5,
      timeLabel: "‚âà1.0‚Äì0.5 billion years ago",
      description: "Cells specialize, forming tissues and simple animals. Nervous systems evolve to coordinate movement and reacting.",
      consciousnessLevel: 3,
      hopeSystem: 0,
      survivalBehaviors: "Move toward nutrients and away from danger; simple learning of patterns.",
      consciousnessNotes: "Basic sensation and response; the world is ‚Äòfelt‚Äô without stories or symbols.",
      hopeNotes: "Still no hope‚Äîjust adaptive reflexes honed by survival.",
      faithNotes: "In your cosmic clock, this is where the possibility of future minds, faith, and hope is first built into bodies."
    },
    {
      id: "dinosaur_mammals",
      name: "Dinosaur age & small mammals at night",
      type: "mammal",
      eraGroup: "Mesozoic",
      env: "mixed",
      envLabel: "Warm world, forests and seas; local disasters, asteroid at the end",
      modeBias: 0.6,
      timeLabel: "‚âà250‚Äì66 million years ago",
      description: "Dinosaurs dominate the surface. Small mammals live in the shadows, burrows and trees, surviving with stealth and flexibility.",
      consciousnessLevel: 4,
      hopeSystem: 0,
      survivalBehaviors: "Hide, forage, care for young; learn safe patterns of time and place (night vs day).",
      consciousnessNotes: "Emotional brains (fear, attachment) develop strongly; learning from experience becomes crucial.",
      hopeNotes: "No human-like hope, but strong attachment and memory‚Äîthe emotional structure that hope will later use.",
      faithNotes: "Spiritually, you could say the ‚Äòcurriculum‚Äô for later human courage is being written in these tiny survivors."
    },
    {
      id: "impact_reset",
      name: "Chicxulub impact & reset",
      type: "life",
      eraGroup: "End-Cretaceous reset",
      env: "harsh",
      envLabel: "Sudden impact winter, darkness, food chain collapse",
      modeBias: 0.05,
      timeLabel: "‚âà66 million years ago",
      description: "A large asteroid hits Earth; many species (including non-avian dinosaurs) go extinct. Mammals and other survivors inherit the emptied niches.",
      consciousnessLevel: 3,
      hopeSystem: 0,
      survivalBehaviors: "Burrowing, seed-eating, scavenging, dormancy; anything that keeps a lineage alive in famine.",
      consciousnessNotes: "No planning for the impact‚Äîonly those already suited for hiding and enduring make it through.",
      hopeNotes: "No hope as an idea, just the raw fact that life clings on through disaster.",
      faithNotes: "In your framework, this is a major tick of the cosmic clock‚Äîa reset that opens the path toward humans."
    },
    {
      id: "early_primates",
      name: "Early primates in trees",
      type: "mammal",
      eraGroup: "Early Cenozoic",
      env: "gentle",
      envLabel: "Forests, mild climates with fluctuations",
      modeBias: 0.7,
      timeLabel: "‚âà60‚Äì20 million years ago",
      description: "Tree-dwelling primates evolve grasping hands, stereo vision, and complex social groups.",
      consciousnessLevel: 5,
      hopeSystem: 1,
      survivalBehaviors: "Group living, grooming, alliances, learning safe routes and food sources.",
      consciousnessNotes: "Awareness of individuals, relationships, and simple strategies emerges strongly.",
      hopeNotes: "Beginnings of expectation and attachment: remembering good seasons and enduring bad ones.",
      faithNotes: "The ‚Äòtraining ground‚Äô for later trust and cooperation: you could see this as God teaching creatures to rely on each other."
    },
    {
      id: "early_hominins",
      name: "Early hominins walking upright",
      type: "hominin",
      eraGroup: "Pre-Homo & early Homo",
      env: "mixed",
      envLabel: "Forest‚Äìsavanna mix, shifting climates",
      modeBias: 0.5,
      timeLabel: "‚âà6‚Äì2 million years ago",
      description: "Apelike ancestors stand up, free their hands, and explore open landscapes. Stone tool use begins.",
      consciousnessLevel: 6,
      hopeSystem: 2,
      survivalBehaviors: "Exploring new terrain, cooperative defense, learning tool use to crack bones and nuts.",
      consciousnessNotes: "Future-focused behavior appears: storing food, remembering hidden resources, basic planning.",
      hopeNotes: "Instinctive sense that ‚Äòif we endure this season, better times return‚Äô starts to matter.",
      faithNotes: "From your view, mutation is not just random‚Äîit‚Äôs the Earth and life training themselves to trust survival across cycles."
    },
    {
      id: "homo_erectus",
      name: "Homo erectus ‚Äì fire & long journeys",
      type: "hominin",
      eraGroup: "Early Homo expansion",
      env: "mixed",
      envLabel: "Ice ages begin to pulse; some regions rich, others harsh",
      modeBias: 0.6,
      timeLabel: "‚âà2 million ‚Äì 300,000 years ago",
      description: "Homo erectus masters fire, travels out of Africa, and adapts to many environments.",
      consciousnessLevel: 7,
      hopeSystem: 3,
      survivalBehaviors: "Cooking food, warming against cold, strategic migration, group hunts.",
      consciousnessNotes: "Stories and proto-language likely emerge; elders remember good places and routes.",
      hopeNotes: "Hope is no longer just instinct; it‚Äôs shared in stories: ‚Äòif we keep walking, we will find food again.‚Äô",
      faithNotes: "Still pre-religion in the formal sense, but rituals and respect for the dead may begin‚Äîearly spiritual training."
    },
    {
      id: "homo_sapiens_early",
      name: "Early Homo sapiens ‚Äì symbolic mind",
      type: "hominin",
      eraGroup: "Anatomically modern humans",
      env: "mixed",
      envLabel: "Rapid climate swings near ice-age end",
      modeBias: 0.55,
      timeLabel: "‚âà300,000 ‚Äì 50,000 years ago",
      description: "Brains like ours appear. Art, ornaments, and more complex language show up.",
      consciousnessLevel: 8,
      hopeSystem: 5,
      survivalBehaviors: "Complex planning, trade, flexible technology, shelter building (caves, cliffs, early semi-underground structures).",
      consciousnessNotes: "Self-awareness deepens; humans can imagine futures, fear them, and also endure them.",
      hopeNotes: "Hope becomes mental training: we imagine better futures to power our actions through danger and hunger.",
      faithNotes: "Spiritual sense increases: burial practices, symbols, and myths start to appear as ways to hold meaning."
    },
    {
      id: "agricultural",
      name: "Agricultural revolution ‚Äì villages & cities",
      type: "human",
      eraGroup: "Neolithic & early cities",
      env: "gentle",
      envLabel: "Local river valleys and coasts very rich; climate relatively stable",
      modeBias: 0.8,
      timeLabel: "‚âà12,000 ‚Äì 5,000 years ago",
      description: "Farming emerges; humans settle, build permanent homes, and eventually cities like Jericho, √áatalh√∂y√ºk, and G√∂bekli Tepe.",
      consciousnessLevel: 9,
      hopeSystem: 7,
      survivalBehaviors: "Stored grain, animal domestication, irrigation, building in caves, hillsides, and underground to control temperature.",
      consciousnessNotes: "We link seasons to stars and build cosmic clocks in stone and myth.",
      hopeNotes: "Hope becomes organized: rituals for harvest, prayers for rain, long-term planning for children and grandchildren.",
      faithNotes: "Religious systems crystallize, offering shared stories of origin, purpose, and destiny‚Äîpowerful training for group endurance."
    },
    {
      id: "historical_age",
      name: "Historical age ‚Äì empires, philosophies, scriptures",
      type: "human",
      eraGroup: "Bronze to early modern",
      env: "mixed",
      envLabel: "Some regions rich, others in drought, war, or plague",
      modeBias: 0.7,
      timeLabel: "‚âà5,000 years ago ‚Äì ~1850 CE",
      description: "Writing, large empires, and major religious traditions emerge; cities flourish and fall.",
      consciousnessLevel: 9,
      hopeSystem: 8,
      survivalBehaviors: "Legal codes, trade networks, underground cities, fortresses, social contracts.",
      consciousnessNotes: "Humans think about justice, ethics, heaven and earth, human dignity.",
      hopeNotes: "Hope and faith explicitly train people to endure: promises of meaning beyond suffering, belief in renewal.",
      faithNotes: "For believers, God is not just creator but companion; for non-believers, these systems still act as psychological survival frameworks."
    },
    {
      id: "industrial_modern",
      name: "Industrial & modern age ‚Äì science & global risk",
      type: "human",
      eraGroup: "Industrial to digital",
      env: "mixed",
      envLabel: "Technologically rich, but with climate stress and inequality",
      modeBias: 0.85,
      timeLabel: "‚âà1850 CE ‚Äì now",
      description: "Fossil fuels, technology, and globalization accelerate change; we gain power but also new threats.",
      consciousnessLevel: 10,
      hopeSystem: 8,
      survivalBehaviors: "Engineering, medicine, data, global cooperation; also conflict and environmental impact.",
      consciousnessNotes: "We can see our own impact on Earth and the possibility of self-inflicted catastrophe.",
      hopeNotes: "Hope and faith act like training: they keep people working for solutions instead of giving in to despair.",
      faithNotes: "Some ground hope in God, others in humanity or the universe‚Äîeither way, it becomes a discipline that shapes survival choices."
    },
    {
      id: "future_resilience",
      name: "Future resilience ‚Äì conscious cosmic clock",
      type: "human",
      eraGroup: "Imagined future",
      env: "mixed",
      envLabel: "Potential climate extremes, but also potential harmony",
      modeBias: 0.6,
      timeLabel: "Future (next thousands of years)",
      description: "If we learn from past resets, humanity may use knowledge, compassion, and spiritual training to ride out future shocks.",
      consciousnessLevel: 10,
      hopeSystem: 10,
      survivalBehaviors: "Designing cities, energy systems, and cultures that can bend without breaking; going underground, underwater, or off-world if needed.",
      consciousnessNotes: "Awareness of the full cosmic clock: we know about past extinctions, volcanoes, and impacts, and we can prepare.",
      hopeNotes: "Hope and faith become deliberate practices: not naive belief, but a trained capacity to keep acting for life even when conditions are harsh.",
      faithNotes: "Your view fits here: believing in God or in a deeper meaning is one of the tools evolution gave us to handle fear, loss, and long dark cycles."
    }
  ];

  // ---------- Helpers ----------
  function eraTagClass(type) {
    if (type === "life") return "tag tag-era-life";
    if (type === "mammal") return "tag tag-era-mammal";
    if (type === "hominin") return "tag tag-era-hominin";
    if (type === "human") return "tag tag-era-human";
    return "tag";
  }

  function envTagClass(env) {
    if (env === "gentle") return "tag tag-env-gentle";
    if (env === "harsh") return "tag tag-env-harsh";
    if (env === "mixed") return "tag tag-env-mixed";
    return "tag";
  }

  function modeLabel(modeBias) {
    if (modeBias >= 0.7) return "Multiply / expansion-focused";
    if (modeBias <= 0.3) return "Conserve / adaptation-focused";
    return "Balanced multiply‚Äìconserve";
  }

  function modeTagClass(modeBias) {
    if (modeBias >= 0.6) return "tag tag-mode-multiply";
    if (modeBias <= 0.4) return "tag tag-mode-conserve";
    return "tag";
  }

  function hopeTagClass(level) {
    if (level <= 2) return "tag tag-hope-low";
    if (level >= 7) return "tag tag-hope-high";
    return "tag";
  }

  // ---------- UI wiring ----------
  const tbody = document.getElementById("eventTableBody");
  const detailsContent = document.getElementById("detailsContent");
  const typeFilter = document.getElementById("typeFilter");
  const envFilter = document.getElementById("envFilter");
  const modeFilter = document.getElementById("modeFilter");
  const searchBox = document.getElementById("searchBox");

  function renderTable() {
    const t = typeFilter.value;
    const env = envFilter.value;
    const mode = modeFilter.value;
    const q = (searchBox.value || "").toLowerCase();

    tbody.innerHTML = "";

    const filtered = stages.filter(s => {
      if (t !== "all" && s.type !== t) return false;
      if (env !== "all" && s.env !== env) return false;

      if (mode !== "all") {
        if (mode === "multiply" && s.modeBias < 0.6) return false;
        if (mode === "conserve" && s.modeBias > 0.4) return false;
      }

      if (q) {
        const hay = (s.name + " " + s.eraGroup + " " + s.description + " " + s.consciousnessNotes + " " + s.hopeNotes).toLowerCase();
        if (!hay.includes(q)) return false;
      }
      return true;
    });

    filtered.forEach(s => {
      const tr = document.createElement("tr");
      tr.dataset.id = s.id;

      const tdName = document.createElement("td");
      tdName.textContent = s.name;

      const tdEra = document.createElement("td");
      const spanEra = document.createElement("span");
      spanEra.className = eraTagClass(s.type);
      const dot = document.createElement("span");
      dot.className = "tag-dot";
      const label = document.createElement("span");
      const typeMap = {
        life: "Early life",
        mammal: "Mammals/primates",
        hominin: "Hominins",
        human: "Humans"
      };
      label.textContent = typeMap[s.type] || s.type;
      spanEra.appendChild(dot);
      spanEra.appendChild(label);
      tdEra.appendChild(spanEra);

      const tdEnv = document.createElement("td");
      const spanEnv = document.createElement("span");
      spanEnv.className = envTagClass(s.env);
      const dotE = document.createElement("span");
      dotE.className = "tag-dot";
      const labelE = document.createElement("span");
      if (s.env === "gentle") labelE.textContent = "Plentiful";
      else if (s.env === "harsh") labelE.textContent = "Harsh";
      else labelE.textContent = "Mixed";
      spanEnv.appendChild(dotE);
      spanEnv.appendChild(labelE);
      tdEnv.appendChild(spanEnv);

      const tdMode = document.createElement("td");
      const spanMode = document.createElement("span");
      spanMode.className = modeTagClass(s.modeBias);
      const dotM = document.createElement("span");
      dotM.className = "tag-dot";
      const labelM = document.createElement("span");
      labelM.textContent = modeLabel(s.modeBias);
      spanMode.appendChild(dotM);
      spanMode.appendChild(labelM);
      tdMode.appendChild(spanMode);

      const tdTime = document.createElement("td");
      tdTime.textContent = s.timeLabel;

      tr.appendChild(tdName);
      tr.appendChild(tdEra);
      tr.appendChild(tdEnv);
      tr.appendChild(tdMode);
      tr.appendChild(tdTime);

      tr.addEventListener("click", () => {
        document.querySelectorAll("#eventTableBody tr").forEach(r => r.classList.remove("active-row"));
        tr.classList.add("active-row");
        renderDetails(s);
      });

      tbody.appendChild(tr);
    });

    if (!filtered.length) {
      const tr = document.createElement("tr");
      const td = document.createElement("td");
      td.colSpan = 5;
      td.className = "muted";
      td.textContent = "No stages match the current filters.";
      tr.appendChild(td);
      tbody.appendChild(tr);
    }
  }

  function renderDetails(s) {
    const envText = s.envLabel;
    const modeText = modeLabel(s.modeBias);
    const modeWidth = Math.round(s.modeBias * 100);
    const conserveWidth = 100 - modeWidth;
    const hopeWidth = Math.round((s.hopeSystem / 10) * 100);
    const consWidth = Math.round((s.consciousnessLevel / 10) * 100);

    const hopeTag = `
      <span class="${hopeTagClass(s.hopeSystem)}">
        <span class="tag-dot" style="background:#f472b6;"></span>
        <span>Hope/faith training level: ${s.hopeSystem}/10</span>
      </span>`;

    const modeTag = `
      <span class="${modeTagClass(s.modeBias)}">
        <span class="tag-dot" style="background:#22c55e;"></span>
        <span>${modeText}</span>
      </span>`;

    const envTag = `
      <span class="${envTagClass(s.env)}">
        <span class="tag-dot"></span>
        <span>${envText}</span>
      </span>`;

    detailsContent.innerHTML = `
      <div class="details-header">
        <div class="details-title">${s.name}</div>
        <div class="details-subtitle">${s.eraGroup} ¬∑ ${s.timeLabel}</div>
      </div>

      <div class="pill-row">
        ${envTag}
        ${modeTag}
        ${hopeTag}
      </div>

      <div class="details-grid">
        <div>
          <div class="details-section-title">Survival Mode on the Cosmic Clock</div>
          <div class="bar-row">
            <div class="bar-label">Multiply (expansion)</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${modeWidth}%;"></div>
            </div>
          </div>
          <div class="bar-row">
            <div class="bar-label">Conserve/adapt</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${conserveWidth}%; background:linear-gradient(to right,#0f172a,#22c55e);"></div>
            </div>
          </div>

          <div class="details-section-title">Consciousness Level</div>
          <div class="bar-row">
            <div class="bar-label">Awareness depth</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${consWidth}%; background:linear-gradient(to right,#38bdf8,#a855f7);"></div>
            </div>
          </div>

          <ul>
            <li><strong>Survival behaviors:</strong> ${s.survivalBehaviors}</li>
            <li><strong>Environment reading:</strong> ${envText}</li>
          </ul>

          <div class="details-section-title">Consciousness Notes</div>
          <p class="mini">${s.consciousnessNotes}</p>
        </div>

        <div>
          <div class="details-section-title">Hope, Faith &amp; Inner Training</div>
          <div class="bar-row">
            <div class="bar-label">Hope/faith system</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:${hopeWidth}%; background:linear-gradient(to right,#f97316,#ec4899);"></div>
            </div>
          </div>
          <ul>
            <li><strong>Hope as training:</strong> ${s.hopeNotes}</li>
            <li><strong>Faith / meaning layer:</strong> ${s.faithNotes}</li>
          </ul>

          <div class="details-section-title">Stage Summary</div>
          <p class="mini">${s.description}</p>
        </div>
      </div>

      <p class="muted mini" style="margin-top:6px;">
        In this continuum, survival comes first, just like you said: when the world is plentiful, life multiplies;
        when the world is harsh, life conserves and adapts. Over millions of years that same rhythm produces
        nervous systems, then minds, then humans who can train themselves with hope and faith
        to keep going through darkness until conditions improve again.
      </p>
    `;
  }

  // Filters
  typeFilter.addEventListener("change", renderTable);
  envFilter.addEventListener("change", renderTable);
  modeFilter.addEventListener("change", renderTable);
  searchBox.addEventListener("input", renderTable);

  // Initial render
  renderTable();
</script>
</body>
</html>
