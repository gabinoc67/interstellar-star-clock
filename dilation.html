<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Warp Tunnel Time & Dilation Demo — Speed • Warp • CST Time-Lock</title>
<meta name="description" content="Interactive demo: select speed (≤192 km/s), warp (1–10), and destination to visualize Earth/CST vs Ship clocks, arrival times, and minimal time dilation with a CST-synchronized warp tunnel." />
<style>
  :root{
    --bg:#0b1020; --card:#0f1733; --ink:#ecf2ff; --muted:#9fb0d6; --accent:#7fb1ff; --border:#22305c;
    --good:#22c55e; --warn:#f59e0b; --bad:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
  a{color:var(--accent)}
  .wrap{max-width:1220px;margin:0 auto;padding:20px}
  header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:16px}
  .h1{font-weight:800;font-size:1.25rem}
  .pill{display:inline-block;background:#0d2250;border:1px solid var(--border);color:#cfe0ff;border-radius:999px;padding:.2rem .6rem;font-size:.8rem}
  .grid{display:grid;gap:16px}
  @media(min-width:1120px){.grid.cols-3{grid-template-columns:1.15fr 1fr 1fr}}
  @media(min-width:860px){.grid.cols-2{grid-template-columns:1fr 1fr}}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px}
  h2{margin:.2rem 0 .6rem;font-size:1.1rem}
  h3{margin:.3rem 0 .4rem;font-size:1.02rem}
  label{display:block;font-size:.9rem;color:var(--muted);margin:.35rem 0}
  input,select{width:100%;padding:.6rem;border-radius:10px;border:1px solid var(--border);background:#0b1430;color:#ecf2ff}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .row>*{flex:1}
  .btn{display:inline-block;background:#0d2250;border:1px solid var(--border);color:#cfe0ff;border-radius:10px;padding:.55rem .8rem;text-decoration:none}
  .btn:hover{background:#102b6b}
  .kpi{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  .kpi .box{background:#0b1430;border:1px solid var(--border);border-radius:12px;padding:10px}
  .kpi .box h4{margin:0 0 .2rem;font-size:.9rem;color:#cfe0ff}
  .kpi .box p{margin:0;font-variant-numeric:tabular-nums}
  .num{font-weight:700;color:#e7f1ff}
  .muted{color:var(--muted)}
  .ok{color:var(--good)}
  .warn{color:var(--warn)}
  .bad{color:var(--bad)}
  .clock{font-family:ui-monospace,Menlo,Consolas,monospace}
  .sep{height:1px;background:var(--border);margin:14px 0}
  .legend{display:flex;gap:8px;flex-wrap:wrap;font-size:.85rem;color:#cfe0ff}
  .tag{display:inline-block;border:1px solid var(--border);padding:.2rem .5rem;border-radius:999px;font-size:.75rem;color:#b7c7ff}
  footer{margin-top:18px;color:var(--muted);font-size:.9rem;text-align:center}
  .inline-note{font-size:.85rem;color:#cfe0ff}
  .switch{display:inline-flex;align-items:center;gap:10px}
  .switch input{width:auto}
  .hero-clocks{display:grid;gap:10px}
  @media(min-width:860px){.hero-clocks{grid-template-columns:1fr 1fr}}
  .bigclock{background:#0b1430;border:1px solid var(--border);border-radius:14px;padding:12px}
  .bigclock h3{margin:.2rem 0 .3rem}
  .bigclock p{font-size:1.02rem;margin:.2rem 0}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <div class="h1">Warp Tunnel Time & Dilation Demo — Keep Clocks in Step with Earth</div>
      <div class="muted">Speed ≤ 192 km/s • Warp = <em>path-shortening</em> (not speed-up) • CST time-lock</div>
    </div>
    <span class="pill">Proposed concept • Educational math demo</span>
  </header>

  <!-- Hero clocks: Outside vs Inside -->
  <section class="hero-clocks">
    <div class="bigclock">
      <h3>Outside the Ship — Earth/CST</h3>
      <p class="clock"><strong>Earth UTC:</strong> <span id="heroUTC">—</span></p>
      <p class="clock"><strong>CST (cosmic):</strong> <span id="heroCST">—</span></p>
    </div>
    <div class="bigclock">
      <h3>Inside the Ship — Proper Clock</h3>
      <p class="clock"><strong>Ship Clock:</strong> <span id="heroShip">—</span></p>
      <p class="clock"><strong>Ship − UTC Offset:</strong> <span id="heroOffset" class="num">0.000 s</span></p>
    </div>
  </section>

  <div class="sep"></div>

  <div class="grid cols-3">
    <!-- Controls -->
    <section class="card">
      <h2>Mission Setup</h2>

      <label for="dest">Destination (static Earth → closest reference distance)</label>
      <select id="dest">
        <option value="3.844e5">Moon — 384,400 km</option>
        <option value="4.10e7">Venus — 41,000,000 km</option>
        <option value="7.70e7">Mercury — 77,000,000 km</option>
        <option value="5.46e7" selected>Mars — 54,600,000 km</option>
        <option value="5.88e8">Jupiter — 588,000,000 km</option>
        <option value="1.20e9">Saturn — 1,200,000,000 km</option>
        <option value="2.60e9">Uranus — 2,600,000,000 km</option>
        <option value="4.30e9">Neptune — 4,300,000,000 km</option>
        <option value="4.67e9">Pluto — 4,670,000,000 km</option>
      </select>

      <div class="row">
        <div>
          <label for="customKm">Or custom distance (km)</label>
          <input id="customKm" type="number" min="0" step="1000" placeholder="Enter km to override preset (optional)">
        </div>
        <div>
          <label for="age">Traveler age now (years, optional)</label>
          <input id="age" type="number" min="0" step="0.1" placeholder="e.g., 40">
        </div>
      </div>

      <div class="row">
        <div>
          <label for="speed">Speed (km/s) — max 192</label>
          <input id="speed" type="range" min="1" max="192" step="1" value="192" oninput="updateSpeedLabel(this.value)">
          <div class="legend"><span>Speed: <span id="speedLabel" class="num">192</span> km/s</span> <span class="tag">c = 299,792 km/s</span></div>
        </div>
        <div>
          <label for="warp">Warp Index (1–10) — path shortened by 1/warp</label>
          <input id="warp" type="range" min="1" max="10" step="1" value="8" oninput="updateWarpLabel(this.value)">
          <div class="legend"><span>Warp: <span id="warpLabel" class="num">8</span></span> <span class="tag">Shortening = distance ÷ warp</span></div>
        </div>
      </div>

      <div class="row">
        <div class="switch">
          <input id="stabilize" type="checkbox" checked />
          <label for="stabilize"><strong>Dilation Stabilization</strong> (CST time-lock + gentle fields)</label>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <a href="#" class="btn" onclick="compute();return false;">Compute</a>
        <a href="#" class="btn" onclick="startSim();return false;">Start Clock Sim</a>
        <a href="#" class="btn" onclick="stopSim();return false;">Stop</a>
        <a href="#" class="btn" onclick="resetAll();return false;">Reset</a>
        <a href="#" class="btn" onclick="demoPreset();return false;">Try a Demo</a>
      </div>

      <div class="sep"></div>
      <p class="inline-note">
        <strong>What this shows:</strong> modest speed + path-bending ⇒ **tiny** SR dilation.  
        <strong>Stabilization ON:</strong> only the tiny SR offset remains and clocks are time-locked.  
        <strong>Stabilization OFF:</strong> adds an illustrative **unsynchronized drift** so you can see how displays can separate without CST; proper (biological) time doesn’t change.
      </p>
    </section>

    <!-- Results -->
    <section class="card">
      <h2>Results</h2>
      <div class="kpi">
        <div class="box"><h4>Coordinate Distance</h4><p><span id="coordKm" class="num">—</span> km</p></div>
        <div class="box"><h4>Shortened Distance</h4><p><span id="shortKm" class="num">—</span> km</p></div>
        <div class="box"><h4>Earth-Frame Travel Time</h4><p><span id="earthTime" class="num">—</span></p></div>
        <div class="box"><h4>Ship Proper Time</h4><p><span id="shipTime" class="num">—</span></p></div>
        <div class="box"><h4>SR Dilation (Δ = Earth − Ship)</h4><p><span id="deltaSR" class="num ok">—</span></p></div>
        <div class="box"><h4>Gravitational Dilation</h4><p><span id="deltaGR" class="num ok">minimized (gentle)</span></p></div>
      </div>

      <div class="sep"></div>
      <div class="kpi">
        <div class="box"><h4>Traveler age at arrival (Earth frame)</h4><p><span id="ageEarth" class="num">—</span></p></div>
        <div class="box"><h4>Traveler age at arrival (proper / ship)</h4><p><span id="ageShip" class="num">—</span></p></div>
      </div>

      <p class="inline-note">
        Example: 192 km/s = **0.064% c**, γ ≈ **1.000000205** → only **seconds** of difference over months.  
        Warp shortens the route; we don’t chase extreme velocity.
      </p>
    </section>

    <!-- Clocks / Timeline -->
    <section class="card">
      <h2>Clocks & Timeline</h2>
      <p class="muted" style="margin-top:-6px">
        With stabilization ON, Earth UTC and CST align; Ship is kept in step (offset ≈ SR Δ).  
        With stabilization OFF, an **illustrative drift** is added (no effect on proper time).
      </p>
      <div class="kpi">
        <div class="box"><h4>Earth UTC</h4><p class="clock"><span id="clkUTC">—</span></p></div>
        <div class="box"><h4>CST</h4><p class="clock"><span id="clkCST">—</span></p></div>
        <div class="box"><h4>Ship Clock</h4><p class="clock"><span id="clkShip">—</span></p></div>
        <div class="box"><h4>Ship − UTC Offset</h4><p class="clock"><span id="clkOffset" class="num">0.000 s</span></p></div>
      </div>

      <div class="sep"></div>
      <div class="kpi">
        <div class="box"><h4>Depart (UTC)</h4><p class="clock"><span id="departUTC">—</span></p></div>
        <div class="box"><h4>Arrive (UTC)</h4><p class="clock"><span id="arriveUTC">—</span></p></div>
      </div>
    </section>
  </div>

  <!-- Explanation -->
  <section class="card" style="margin-top:16px">
    <h2>How this method keeps dilation tiny</h2>
    <ol>
      <li><strong>Stay slow, bend the path:</strong> SR dilation scales with (v/c)<sup>2</sup>. We keep v modest and shorten the distance with a warp tunnel (distance ÷ warp).</li>
      <li><strong>Near-rest local frame:</strong> Inside the tunnel the craft is nearly at rest relative to its local spacetime; we groom fields to keep gravity gradients gentle → tiny gravitational dilation.</li>
      <li><strong>CST time-lock:</strong> Atomic clocks + two-way laser links + pulsar timing keep Earth/CST/Ship clocks aligned. Time-lock doesn’t change proper time; it keeps operations synchronized.</li>
    </ol>
    <p class="inline-note"><strong>Disclaimer:</strong> “Warp tunnel” and “metric grooming” are <em>proposed</em> experimental ideas. This tool shows the exact SR math for your chosen speed and visualizes the concept of path-shortening and time-locking.</p>
  </section>

  <footer>© <span id="yr"></span> CST Warp Geometry Demo. All math runs locally in your browser.</footer>
</div>

<script>
  // ---------- Physical constants ----------
  const C = 299_792_458;           // m/s
  const MS_IN_S = 1000;
  const DRIFT_RATE_OFF = 3e-8;     // ~30 ns per second of illustrative unsynchronized drift (display only)

  // ---------- DOM helpers ----------
  const el = id => document.getElementById(id);
  const fmtKm = n => n.toLocaleString(undefined,{maximumFractionDigits:0});
  const fmtSec = s => s.toLocaleString(undefined,{maximumFractionDigits:3});
  const fmtYears = y => y.toLocaleString(undefined,{maximumFractionDigits:6});
  function fmtHMS(seconds){
    const s = Math.floor(seconds % 60);
    const m = Math.floor((seconds/60) % 60);
    const h = Math.floor((seconds/3600) % 24);
    const d = Math.floor(seconds/86400);
    const parts = [];
    if (d>0) parts.push(`${d}d`);
    if (h>0 || d>0) parts.push(`${h}h`);
    if (m>0 || h>0 || d>0) parts.push(`${m}m`);
    parts.push(`${s}s`);
    return parts.join(" ");
  }

  // ---------- State ----------
  let last = null;            // last mission computation
  let timer = null;           // sim interval
  let simStartReal = null;    // real-time base
  const SIM_SCALE = 12*3600;  // 1 real second = 12 mission hours
  let departUTCms = null;

  // ---------- UI sync ----------
  function updateSpeedLabel(v){ el('speedLabel').textContent = v; }
  function updateWarpLabel(v){ el('warpLabel').textContent = v; }
  function getDistanceKm(){
    const custom = parseFloat(el('customKm').value);
    if (!isNaN(custom) && custom>0) return custom;
    return parseFloat(el('dest').value);
  }

  // ---------- Core compute ----------
  function compute(){
    const kmps = parseFloat(el('speed').value);
    const warp = parseInt(el('warp').value,10);
    const stabilize = el('stabilize').checked;
    const coordKm = getDistanceKm();
    const shortKm = coordKm / warp;

    // Earth-frame time (seconds)
    const t_earth_s = (shortKm / kmps);

    // Lorentz gamma at chosen speed
    const v_ms = kmps*1000;
    const gamma = 1/Math.sqrt(1 - Math.pow(v_ms/C,2));

    // Proper (ship) time
    const t_ship_s = t_earth_s / gamma;
    const deltaSR_s = t_earth_s - t_ship_s;

    // Gravity (conceptual): minimized when stabilized
    el('deltaGR').textContent = stabilize ? "minimized (gentle)" : "not stabilized (illustrative)";
    el('deltaGR').className = stabilize ? "num ok" : "num warn";

    // Arrival times
    const now = Date.now();
    departUTCms = now;
    const arriveUTCms = now + t_earth_s*MS_IN_S;

    // Age outputs (optional)
    const age0 = parseFloat(el('age').value);
    const yrs_earth = t_earth_s / (365.25*24*3600);
    const yrs_ship  = t_ship_s  / (365.25*24*3600);
    if (!isNaN(age0)){
      el('ageEarth').textContent = `${fmtYears(age0 + yrs_earth)} years`;
      el('ageShip').textContent  = `${fmtYears(age0 + yrs_ship)} years`;
    } else {
      el('ageEarth').textContent = `${fmtYears(yrs_earth)} years added`;
      el('ageShip').textContent  = `${fmtYears(yrs_ship)} years added`;
    }

    // Update Results
    el('coordKm').textContent = fmtKm(coordKm);
    el('shortKm').textContent = fmtKm(shortKm);
    el('earthTime').textContent = `${fmtHMS(t_earth_s)}  (${fmtSec(t_earth_s)} s)`;
    el('shipTime').textContent  = `${fmtHMS(t_ship_s)}  (${fmtSec(t_ship_s)} s)`;
    el('deltaSR').textContent   = `${fmtSec(deltaSR_s)} s`;
    el('departUTC').textContent = new Date(departUTCms).toLocaleString();
    el('arriveUTC').textContent = new Date(arriveUTCms).toLocaleString();

    // Save state + resync hero clocks
    last = {kmps, warp, stabilize, coordKm, shortKm, t_earth_s, t_ship_s, deltaSR_s, gamma};
    syncClocks();
  }

  // ---------- Clocks simulation ----------
  function startSim(){
    stopSim();
    if (!last) compute();
    simStartReal = Date.now();
    timer = setInterval(()=>{
      const nowReal = Date.now();
      const realElapsed_s = (nowReal - simStartReal)/MS_IN_S;
      const missionElapsed_s = realElapsed_s * SIM_SCALE;

      // Outside clocks (UTC & CST) advance identically
      const utc_ms = (departUTCms ?? nowReal) + missionElapsed_s*MS_IN_S;
      const cst_ms = utc_ms;

      // Inside (Ship): proper time elapses at dt/gamma
      const stabilize = el('stabilize').checked;
      const gamma = last?.gamma ?? 1;
      let ship_ms = (departUTCms ?? nowReal) + (missionElapsed_s/gamma)*MS_IN_S;

      // If NOT stabilized, add an illustrative unsynchronized drift (display only)
      if (!stabilize){
        const drift_ms = missionElapsed_s * DRIFT_RATE_OFF * MS_IN_S;
        ship_ms -= drift_ms;
      }

      // Update small clocks
      el('clkUTC').textContent  = new Date(utc_ms).toLocaleString();
      el('clkCST').textContent  = new Date(cst_ms).toLocaleString();
      el('clkShip').textContent = new Date(ship_ms).toLocaleString();
      el('clkOffset').textContent = fmtSec((utc_ms - ship_ms)/MS_IN_S) + " s";

      // Update hero clocks
      el('heroUTC').textContent  = new Date(utc_ms).toLocaleString();
      el('heroCST').textContent  = new Date(cst_ms).toLocaleString();
      el('heroShip').textContent = new Date(ship_ms).toLocaleString();
      el('heroOffset').textContent = fmtSec((utc_ms - ship_ms)/MS_IN_S) + " s";

      // Auto-stop at mission end (Earth frame)
      const end_s = last?.t_earth_s ?? 0;
      if (end_s>0 && missionElapsed_s >= end_s){ stopSim(); }
    }, 1000);
  }
  function stopSim(){ if (timer){ clearInterval(timer); timer=null; } }
  function syncClocks(){
    const now = Date.now();
    ["clkUTC","clkCST","clkShip","heroUTC","heroCST","heroShip"].forEach(id=>{
      el(id).textContent = new Date(now).toLocaleString();
    });
    ["clkOffset","heroOffset"].forEach(id=>{ el(id).textContent = "0.000 s"; });
  }

  // ---------- Presets & reset ----------
  function demoPreset(){
    el('dest').value = "5.46e7"; // Mars
    el('customKm').value = "";
    el('speed').value = 192; updateSpeedLabel(192);
    el('warp').value = 8; updateWarpLabel(8);
    el('stabilize').checked = true;
    compute();
    startSim();
  }
  function resetAll(){
    el('dest').value = "5.46e7"; // Mars default
    el('customKm').value = "";
    el('age').value = "";
    el('speed').value = 192; updateSpeedLabel(192);
    el('warp').value = 8; updateWarpLabel(8);
    el('stabilize').checked = true;
    ["coordKm","shortKm","earthTime","shipTime","deltaSR","ageEarth","ageShip","departUTC","arriveUTC"].forEach(id=>el(id).textContent="—");
    el('deltaGR').textContent="minimized (gentle)"; el('deltaGR').className="num ok";
    stopSim(); syncClocks();
  }

  // ---------- Init ----------
  document.getElementById('yr').textContent = new Date().getFullYear();
  updateSpeedLabel(192); updateWarpLabel(8);
  compute(); syncClocks();
</script>
</body>
</html>
