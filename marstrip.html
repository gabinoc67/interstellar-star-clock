<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🌌 Warp Drive Simulation – MarsTrip</title>
  <style>
    body {
      margin: 0;
      background-color: black;
      color: #00ffff;
      font-family: 'Courier New', monospace;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
    .info-box {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border: 2px solid #00ffff;
      border-radius: 12px;
      z-index: 5;
      font-size: 18px;
    }
    .info-box select, .info-box button {
      font-family: 'Courier New', monospace;
      font-size: 16px;
      margin: 6px 0;
      width: 100%;
      padding: 6px;
    }
  </style>
</head>
<body>
  <canvas id="solarCanvas"></canvas>
  <div class="info-box">
    <label>Destination Planet:</label>
    <select id="destinationSelect">
      <option value="Mercury">Mercury</option>
      <option value="Venus">Venus</option>
      <option value="Mars" selected>Mars</option>
      <option value="Jupiter">Jupiter</option>
      <option value="Saturn">Saturn</option>
      <option value="Uranus">Uranus</option>
      <option value="Neptune">Neptune</option>
      <option value="Pluto">Pluto</option>
    </select>
    <label>Warp Level (1–10):</label>
    <select id="warpSelect">
      <option value="1">Warp 1</option>
      <option value="2">Warp 2</option>
      <option value="3">Warp 3</option>
      <option value="4">Warp 4</option>
      <option value="5">Warp 5</option>
      <option value="6">Warp 6</option>
      <option value="7">Warp 7</option>
      <option value="8">Warp 8</option>
      <option value="9">Warp 9</option>
      <option value="10">Warp 10</option>
    </select>
    <button id="engageBtn">🚀 Engage Warp</button>
    <button id="resetBtn">🔁 Reset</button>
    <button id="screenshotBtn">📸 Screenshot</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    const canvas = document.getElementById("solarCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const centerX = canvas.width * 0.7;
    const centerY = canvas.height / 2;
    const orbitRadii = [60, 90, 120, 150, 200, 250, 300, 350, 400];
    const planetNames = ["Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune", "Pluto"];
    const AU_values = [0.39, 0.72, 1, 1.52, 5.2, 9.58, 19.18, 30.07, 39.48];

    const planetAngles = {
      Mercury: 118, Venus: 340, Earth: 124, Mars: 166,
      Jupiter: 283, Saturn: 312, Uranus: 28, Neptune: 347, Pluto: 210
    };

    const planetPositions = {};
    const planetColors = {
      Mercury: "white", Venus: "white", Earth: "cyan", Mars: "white",
      Jupiter: "white", Saturn: "white", Uranus: "white", Neptune: "white", Pluto: "white"
    };

    let selectedPlanet = "Mars";
    let warpLevel = 1;
    let animating = false;
    let showDottedLine = false;

    function toRadians(deg) {
      return deg * Math.PI / 180;
    }

    function drawOrbits() {
      ctx.strokeStyle = "white";
      ctx.lineWidth = 1;
      orbitRadii.forEach((r, i) => {
        ctx.beginPath();
        ctx.arc(centerX, centerY, r, 0, 2 * Math.PI);
        ctx.stroke();
        ctx.fillStyle = "white";
        ctx.font = "bold 16px monospace";
        ctx.fillText(`${AU_values[i]} AU`, centerX + r + 8, centerY);
      });

      const angles = [0, 90, 180, 270];
      angles.forEach(deg => {
        const rad = toRadians(deg);
        const x = centerX + orbitRadii[orbitRadii.length - 1] * Math.cos(rad);
        const y = centerY + orbitRadii[orbitRadii.length - 1] * Math.sin(rad);
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(x, y);
        ctx.stroke();

        ctx.fillText(`${deg}°`, x + (deg === 180 ? -25 : 8), y + (deg === 90 ? -10 : 15));
      });
    }

    function drawPlanets() {
      planetNames.forEach((planet, index) => {
        const angle = toRadians(planetAngles[planet]);
        const radius = orbitRadii[index];
        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);
        planetPositions[planet] = { x, y };

        ctx.beginPath();
        ctx.arc(x, y, planet === "Earth" ? 8 : 6, 0, 2 * Math.PI);
        ctx.fillStyle = planetColors[planet];
        ctx.fill();

        ctx.fillStyle = "white";
        ctx.font = "bold 18px monospace";
        ctx.fillText(planet, x + 10, y);
      });

      ctx.beginPath();
      ctx.arc(centerX, centerY, 14, 0, 2 * Math.PI);
      ctx.fillStyle = "yellow";
      ctx.fill();
    }

    function drawWarpPath(start, end, level) {
      const cpX = (start.x + end.x) / 2;
      const cpY = ((start.y + end.y) / 2) - 50 * (11 - level);

      ctx.setLineDash([5, 5]);
      ctx.strokeStyle = "lime";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(start.x, start.y);
      ctx.quadraticCurveTo(cpX, cpY, end.x, end.y);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    function drawScene() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawOrbits();
      drawPlanets();
      if (showDottedLine && planetPositions[selectedPlanet]) {
        drawWarpPath(planetPositions["Earth"], planetPositions[selectedPlanet], warpLevel);
      }
    }

    function engageWarp() {
      if (!planetPositions[selectedPlanet] || animating) return;
      showDottedLine = true;
      drawScene();
      animating = true;
      setTimeout(() => animating = false, 2000);
    }

    function resetScene() {
      showDottedLine = false;
      drawScene();
    }

    function captureScreen() {
      const elements = document.querySelectorAll('.info-box');
      elements.forEach(el => el.style.visibility = 'hidden');
      html2canvas(document.body).then(canvas => {
        const link = document.createElement('a');
        link.download = 'warp_simulator.png';
        link.href = canvas.toDataURL();
        link.click();
        elements.forEach(el => el.style.visibility = 'visible');
      });
    }

    window.onload = () => {
      document.getElementById("destinationSelect").addEventListener("change", e => selectedPlanet = e.target.value);
      document.getElementById("warpSelect").addEventListener("change", e => warpLevel = parseInt(e.target.value));
      document.getElementById("engageBtn").addEventListener("click", engageWarp);
      document.getElementById("resetBtn").addEventListener("click", resetScene);
      document.getElementById("screenshotBtn").addEventListener("click", captureScreen);
      drawScene();
    };
  </script>
</body>
</html>
