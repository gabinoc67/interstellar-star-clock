<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸŒŒ Warp Drive Simulator</title>
  <style>
    body {
      margin: 0;
      background: black;
      font-family: monospace;
      color: #00ffff;
    }
    #controls {
      position: absolute;
      left: 10px;
      top: 10px;
      background: rgba(0,0,0,0.8);
      padding: 10px;
      border: 1px solid #00ffff;
      border-radius: 8px;
      width: 180px;
      font-size: 16px;
    }
    #solarCanvas {
      display: block;
      margin: auto;
      margin-top: 100px;
      background: black;
    }
    select, button {
      width: 100%;
      margin: 5px 0;
      font-size: 16px;
      background: #000;
      color: #00ffff;
      border: 1px solid #00ffff;
      border-radius: 4px;
      padding: 4px;
    }
    button:hover {
      background: #003344;
    }
  </style>
</head>
<body>
  <div id="controls">
    <div>ðŸŸ¢ CST Time: <span id="cstTime">--:--:--</span></div>
    <div>ðŸ“¡ Distance: <span id="distance">-- AU</span></div>
    <div>ðŸ§­ Angle: <span id="angle">--Â°</span></div>
    <div>ðŸ•“ Departure: <span id="departure">--</span></div>
    <div>ðŸ›¬ Arrival: <span id="arrival">--</span></div>
    <select id="planetSelect">
      <option>Mercury</option>
      <option>Venus</option>
      <option>Earth</option>
      <option>Mars</option>
      <option>Jupiter</option>
      <option>Saturn</option>
      <option>Uranus</option>
      <option>Neptune</option>
      <option>Pluto</option>
    </select>
    <select id="warpSelect">
      <option>Warp 1</option>
      <option>Warp 2</option>
      <option>Warp 3</option>
      <option>Warp 4</option>
      <option>Warp 5</option>
      <option>Warp 6</option>
      <option>Warp 7</option>
      <option>Warp 8</option>
      <option>Warp 9</option>
      <option>Warp 10</option>
    </select>
    <button onclick="engageWarp()">Engage Warp</button>
    <button onclick="resetScene()">Reset</button>
    <button onclick="screenshot()">ðŸ“¸ Screenshot</button>
  </div>

  <canvas id="solarCanvas" width="1000" height="700"></canvas>

  <script>
    const canvas = document.getElementById("solarCanvas");
    const ctx = canvas.getContext("2d");

    const planets = [
      { name: "Mercury", color: "gray", radius: 30 },
      { name: "Venus", color: "orange", radius: 60 },
      { name: "Earth", color: "blue", radius: 90 },
      { name: "Mars", color: "red", radius: 120 },
      { name: "Jupiter", color: "green", radius: 180 },
      { name: "Saturn", color: "white", radius: 220 },
      { name: "Uranus", color: "lightblue", radius: 260 },
      { name: "Neptune", color: "lightgreen", radius: 300 },
      { name: "Pluto", color: "white", radius: 340 }
    ];

    function updateCSTTime() {
      const now = new Date();
      const options = { timeZone: 'America/Chicago', hour: '2-digit', minute: '2-digit', second: '2-digit' };
      document.getElementById("cstTime").innerText = now.toLocaleTimeString("en-US", options);
    }

    function drawSystem() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const cx = canvas.width / 2;
      const cy = canvas.height / 2 + 50;
      
      ctx.strokeStyle = "#666";
      ctx.lineWidth = 1.2;
      for (let planet of planets) {
        ctx.beginPath();
        ctx.arc(cx, cy, planet.radius, 0, 2 * Math.PI);
        ctx.stroke();
      }
      
      for (let planet of planets) {
        const angle = CSTVectorAngle(planet.name);
        const x = cx + planet.radius * Math.cos(angle);
        const y = cy + planet.radius * Math.sin(angle);
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, 2 * Math.PI);
        ctx.fillStyle = planet.color;
        ctx.fill();
      }

      // Sun
      ctx.beginPath();
      ctx.arc(cx, cy, 10, 0, 2 * Math.PI);
      ctx.fillStyle = "yellow";
      ctx.fill();
    }

    function CSTVectorAngle(planet) {
      const now = new Date();
      const sec = now.getSeconds();
      const index = planets.findIndex(p => p.name === planet);
      const angle = ((sec + index * 10) % 60) * (2 * Math.PI / 60);
      return angle;
    }

    function engageWarp() {
      const target = document.getElementById("planetSelect").value;
      const warp = document.getElementById("warpSelect").value.split(" ")[1];
      const now = new Date().toLocaleTimeString();
      const planet = planets.find(p => p.name === target);
      const distance = (planet.radius / 90).toFixed(1);
      const angleDeg = (CSTVectorAngle(planet.name) * (180 / Math.PI)).toFixed(1);
      const duration = (10 - warp + 1) * 1000;

      document.getElementById("distance").innerText = `${distance} AU`;
      document.getElementById("angle").innerText = `${angleDeg}Â°`;
      document.getElementById("departure").innerText = now;

      const arrivalTime = new Date(Date.now() + duration).toLocaleTimeString();
      document.getElementById("arrival").innerText = arrivalTime;

      const cx = canvas.width / 2;
      const cy = canvas.height / 2 + 50;
      const angle = CSTVectorAngle(planet.name);
      const x = cx + planet.radius * Math.cos(angle);
      const y = cy + planet.radius * Math.sin(angle);

      const ship = { x: cx, y: cy, tx: x, ty: y, step: 0, steps: 50 };
      animateShip(ship);
    }

    function animateShip(ship) {
      const interval = setInterval(() => {
        ship.step++;
        const t = ship.step / ship.steps;
        const cx = canvas.width / 2;
        const cy = canvas.height / 2 + 50;
        drawSystem();
        ctx.beginPath();
        ctx.arc(
          cx + (ship.tx - cx) * t,
          cy + (ship.ty - cy) * t - Math.sin((1 - t) * Math.PI) * 100,
          6,
          0,
          2 * Math.PI
        );
        ctx.fillStyle = "white";
        ctx.shadowBlur = 10;
        ctx.shadowColor = "aqua";
        ctx.fill();
        ctx.shadowBlur = 0;
        if (ship.step >= ship.steps) clearInterval(interval);
      }, 20);
    }

    function resetScene() {
      document.getElementById("distance").innerText = "-- AU";
      document.getElementById("angle").innerText = "--Â°";
      document.getElementById("departure").innerText = "--";
      document.getElementById("arrival").innerText = "--";
      drawSystem();
    }

    function screenshot() {
      const dataUrl = canvas.toDataURL("image/png");
      const a = document.createElement("a");
      a.href = dataUrl;
      a.download = "warp_simulation.png";
      a.click();
    }

    setInterval(updateCSTTime, 1000);
    updateCSTTime();
    drawSystem();
  </script>
</body>
</html>
