<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Warp Drive Simulator</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      color: white;
      font-family: monospace;
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 10px;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid #00ffff;
    }
    #canvas {
      display: block;
    }
    label, select, button {
      display: block;
      margin: 5px 0;
    }
    .dot {
      stroke-dasharray: 5, 5;
    }
  </style>
</head>
<body>
<div id="ui">
  <div id="info">
    <div id="time"></div>
    <div id="distance"></div>
    <div id="angle"></div>
    <div id="departure"></div>
    <div id="arrival"></div>
    <div id="duration"></div>
  </div>
  <label for="planet">Destination</label>
  <select id="planet"></select>
  <label for="warp">Warp Level</label>
  <select id="warp">
    <option>Warp 1</option>
    <option>Warp 2</option>
    <option>Warp 3</option>
    <option>Warp 4</option>
    <option>Warp 5</option>
    <option>Warp 6</option>
    <option>Warp 7</option>
    <option>Warp 8</option>
    <option>Warp 9</option>
    <option>Warp 10</option>
  </select>
  <button onclick="engageWarp()">üöÄ Engage Warp</button>
  <button onclick="resetScene()">üîÅ Reset</button>
  <button onclick="screenshot()">üì∑ Screenshot</button>
</div>
<canvas id="canvas"></canvas>
<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const sun = { x: canvas.width / 2, y: canvas.height / 2, r: 20 };
  const planets = [
    { name: 'Mercury', r: 4, orbit: 40, angle: 110 },
    { name: 'Venus', r: 5, orbit: 60, angle: 140 },
    { name: 'Earth', r: 6, orbit: 80, angle: 170 },
    { name: 'Mars', r: 5, orbit: 100, angle: 210 },
    { name: 'Jupiter', r: 8, orbit: 130, angle: 240 },
    { name: 'Saturn', r: 7, orbit: 160, angle: 270 },
    { name: 'Uranus', r: 6, orbit: 190, angle: 300 },
    { name: 'Neptune', r: 6, orbit: 220, angle: 330 },
    { name: 'Pluto', r: 4, orbit: 250, angle: 0 }
  ];
  let selectedPlanet = 'Pluto';
  let warpLevel = 1;
  let ship = null;
  let showCurve = false;

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // Sun
    ctx.beginPath();
    ctx.arc(sun.x, sun.y, sun.r, 0, 2 * Math.PI);
    ctx.fillStyle = 'orange';
    ctx.fill();

    // Orbits
    planets.forEach(p => {
      ctx.beginPath();
      ctx.arc(sun.x, sun.y, p.orbit, 0, 2 * Math.PI);
      ctx.strokeStyle = 'white';
      ctx.stroke();
    });

    // Planets
    planets.forEach(p => {
      const rad = p.angle * Math.PI / 180;
      p.x = sun.x + p.orbit * Math.cos(rad);
      p.y = sun.y + p.orbit * Math.sin(rad);
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, 2 * Math.PI);
      ctx.fillStyle = p.name === 'Earth' ? 'cyan' : 'white';
      ctx.fill();
      ctx.fillStyle = 'white';
      ctx.font = '10px monospace';
      ctx.fillText(p.name, p.x + 6, p.y);
    });

    // Ship trajectory line (dotted and curved)
    if (ship && showCurve) {
      const start = planets.find(p => p.name === 'Earth');
      const end = planets.find(p => p.name === selectedPlanet);
      const midX = (start.x + end.x) / 2;
      const midY = (start.y + end.y) / 2 - (100 / warpLevel);

      ctx.beginPath();
      ctx.moveTo(start.x, start.y);
      ctx.quadraticCurveTo(midX, midY, end.x, end.y);
      ctx.strokeStyle = 'lime';
      ctx.setLineDash([5, 5]);
      ctx.stroke();
      ctx.setLineDash([]);
    }
  }

  function engageWarp() {
    selectedPlanet = document.getElementById('planet').value;
    warpLevel = parseInt(document.getElementById('warp').value.replace('Warp ', ''));
    ship = { from: 'Earth', to: selectedPlanet };
    showCurve = true;
    draw();
  }

  function resetScene() {
    if (!ship) return;
    ship = null;
    showCurve = false;
    draw();
  }

  function screenshot() {
    const link = document.createElement('a');
    link.download = 'screenshot.png';
    link.href = canvas.toDataURL();
    link.click();
  }

  function populateDropdowns() {
    const planetSelect = document.getElementById('planet');
    planets.forEach(p => {
      const opt = document.createElement('option');
      opt.value = p.name;
      opt.innerText = p.name;
      planetSelect.appendChild(opt);
    });
    planetSelect.value = selectedPlanet;
  }

  populateDropdowns();
  draw();
</script>
</body>
</html>
