<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ðŸŒŒ CST Warp Simulator</title>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Courier New', monospace;
      margin: 0;
      padding: 0;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: #111;
    }
    .info-box, .control-box {
      background-color: #111;
      border: 1px solid #333;
      padding: 10px;
      border-radius: 6px;
    }
    .info-box span {
      display: block;
      margin: 4px 0;
    }
    select, button {
      background-color: #000;
      color: #fff;
      border: 1px solid #555;
      padding: 6px 10px;
      margin: 5px;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #000;
      border: 1px solid #333;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div class="info-box">
      <span id="cstTime">ðŸŒŽ CST Time: --:--:--</span>
      <span>ðŸ“¡ Distance: <span id="vector">-- AU</span></span>
      <span>ðŸ§­ Angle: <span id="angle">--Â°</span></span>
      <span>ðŸ•“ Departure: <span id="departure">--</span></span>
      <span>ðŸ›¬ Arrival: <span id="arrival">--</span></span>
    </div>
    <div class="control-box">
      <select id="targetPlanet">
        <option value="Mercury">Mercury</option>
        <option value="Venus">Venus</option>
        <option value="Mars">Mars</option>
        <option value="Jupiter">Jupiter</option>
        <option value="Saturn">Saturn</option>
        <option value="Uranus">Uranus</option>
        <option value="Neptune">Neptune</option>
        <option value="Pluto">Pluto</option>
      </select>
      <select id="warpSpeed">
        <option value="1">Warp 1</option>
        <option value="2">Warp 2</option>
        <option value="3">Warp 3</option>
        <option value="4">Warp 4</option>
        <option value="5" selected>Warp 5</option>
        <option value="6">Warp 6</option>
        <option value="7">Warp 7</option>
        <option value="8">Warp 8</option>
        <option value="9">Warp 9</option>
        <option value="10">Warp 10</option>
      </select>
      <br>
      <button onclick="engageWarp()">Engage Warp</button>
      <button onclick="resetMap()">Reset</button>
      <button onclick="screenshotMap()">ðŸ“¸ Screenshot</button>
    </div>
  </div>
  <canvas id="canvas" width="800" height="800"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const planetOrbitAU = {
      Mercury: 0.39,
      Venus: 0.72,
      Earth: 1.00,
      Mars: 1.52,
      Jupiter: 5.20,
      Saturn: 9.58,
      Uranus: 19.2,
      Neptune: 30.1,
      Pluto: 39.5
    };
    const scale = 10; // pixels per AU
    const cx = canvas.width / 2;
    const cy = canvas.height / 2;

    function getCSTAngle(name) {
      const now = new Date();
      const cst = new Date(now.toLocaleString("en-US", { timeZone: "America/Chicago" }));
      const secondsToday = cst.getHours() * 3600 + cst.getMinutes() * 60 + cst.getSeconds();
      const dayFraction = secondsToday / 86400; // full rotation in 24 hrs
      const angle = (dayFraction * 360 + planetOrbitAU[name] * 10) % 360;
      return angle;
    }

    function drawSystem(selectedPlanet = null) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Draw sun
      ctx.beginPath();
      ctx.arc(cx, cy, 10, 0, 2 * Math.PI);
      ctx.fillStyle = "yellow";
      ctx.fill();

      for (let [planet, au] of Object.entries(planetOrbitAU)) {
        const angle = getCSTAngle(planet) * (Math.PI / 180);
        const r = au * scale;
        const px = cx + r * Math.cos(angle);
        const py = cy + r * Math.sin(angle);

        // Orbit
        ctx.beginPath();
        ctx.arc(cx, cy, r, 0, 2 * Math.PI);
        ctx.strokeStyle = "#222";
        ctx.stroke();

        // Planet
        ctx.beginPath();
        ctx.arc(px, py, 5, 0, 2 * Math.PI);
        ctx.fillStyle = (planet === selectedPlanet) ? "#0ff" : "#fff";
        ctx.fill();
      }
    }

    function updateTime() {
      const now = new Date().toLocaleTimeString("en-US", { timeZone: "America/Chicago" });
      document.getElementById("cstTime").textContent = "ðŸŒŽ CST Time: " + now;
    }

    function engageWarp() {
      const target = document.getElementById("targetPlanet").value;
      const warp = parseInt(document.getElementById("warpSpeed").value);
      const dist = planetOrbitAU[target];
      const angle = getCSTAngle(target).toFixed(1);

      document.getElementById("vector").textContent = dist + " AU";
      document.getElementById("angle").textContent = angle + "Â°";
      const now = new Date();
      document.getElementById("departure").textContent = now.toLocaleTimeString("en-US", { timeZone: "America/Chicago" });
      const seconds = (dist / warp) * 600;
      const arrival = new Date(now.getTime() + seconds * 1000);
      document.getElementById("arrival").textContent = arrival.toLocaleTimeString("en-US", { timeZone: "America/Chicago" });

      drawSystem(target);
    }

    function resetMap() {
      document.getElementById("vector").textContent = "-- AU";
      document.getElementById("angle").textContent = "--Â°";
      document.getElementById("departure").textContent = "--";
      document.getElementById("arrival").textContent = "--";
      drawSystem();
    }

    function screenshotMap() {
      const link = document.createElement("a");
      link.download = "warp_map.png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    }

    updateTime();
    setInterval(updateTime, 1000);
    drawSystem();
  </script>
</body>
</html>
