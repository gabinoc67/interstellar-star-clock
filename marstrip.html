<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ðŸŒŒ Warp Simulation â€“ CST Time Based</title>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Courier New', monospace;
      margin: 0;
      padding: 0;
    }
    .info-panel {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: #111;
      border-bottom: 1px solid #333;
    }
    .left-box, .right-box {
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 10px;
      margin: 5px;
    }
    .left-box {
      display: flex;
      flex-direction: column;
    }
    .container {
      display: flex;
      justify-content: space-between;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #000;
      border: 1px solid #333;
    }
    select, button {
      margin: 5px;
      padding: 6px 12px;
      background: #000;
      color: #fff;
      border: 1px solid #555;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="info-panel">
    <div class="left-box">
      <div>ðŸŸ¢ CST Time: <span id="cstTime">--:--:--</span></div>
      <div>ðŸ“¡ Distance: <span id="vector">--</span> AU</div>
      <div>ðŸ§­ Angle: <span id="angle">--</span>Â°</div>
      <div>ðŸ•“ Departure: <span id="departure">--</span></div>
      <div>ðŸ›¬ Arrival: <span id="arrival">--</span></div>
    </div>
    <div class="right-box">
      <select id="targetPlanet">
        <option value="199">Mercury</option>
        <option value="299">Venus</option>
        <option value="399">Earth</option>
        <option value="499">Mars</option>
        <option value="599">Jupiter</option>
        <option value="699">Saturn</option>
        <option value="799">Uranus</option>
        <option value="899">Neptune</option>
        <option value="999">Pluto</option>
      </select>
      <select id="warpSpeed">
        <option value="1">Warp 1</option>
        <option value="2">Warp 2</option>
        <option value="3">Warp 3</option>
        <option value="4">Warp 4</option>
        <option value="5" selected>Warp 5</option>
        <option value="6">Warp 6</option>
        <option value="7">Warp 7</option>
        <option value="8">Warp 8</option>
        <option value="9">Warp 9</option>
        <option value="10">Warp 10</option>
      </select><br>
      <button onclick="engageWarp()">Engage Warp</button>
      <button onclick="resetMap()">Reset</button>
      <button onclick="screenshotMap()">ðŸ“¸ Screenshot</button>
    </div>
  </div>
  <canvas id="solarCanvas" width="1200" height="600"></canvas>

  <script>
    const canvas = document.getElementById("solarCanvas");
    const ctx = canvas.getContext("2d");

    const ORBIT_RADIUS = {
      "199": 80,   // Mercury
      "299": 120,  // Venus
      "399": 160,  // Earth
      "499": 200,  // Mars
      "599": 260,  // Jupiter
      "699": 320,  // Saturn
      "799": 380,  // Uranus
      "899": 440,  // Neptune
      "999": 500   // Pluto
    };

    const planetColors = ["#aaa", "#ccc", "#0ff", "#f00", "#ffb", "#f8f8f8", "#9cf", "#aaf", "#0ff"];

    function updateCSTTime() {
      const now = new Date();
      document.getElementById("cstTime").textContent = now.toLocaleTimeString("en-US", { timeZone: "America/Chicago" });
    }
    setInterval(updateCSTTime, 1000); updateCSTTime();

    function calculateAngleFromTime(time, orbitRadius) {
      const seconds = time.getHours() * 3600 + time.getMinutes() * 60 + time.getSeconds();
      const fullOrbitSeconds = 86400; // 1 rotation per day
      return ((seconds % fullOrbitSeconds) / fullOrbitSeconds) * 360;
    }

    function drawSolarSystem(targetId = null, drawShip = false) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const cx = canvas.width / 2, cy = canvas.height / 2;

      // Sun
      ctx.beginPath(); ctx.arc(cx, cy, 10, 0, 2 * Math.PI);
      ctx.fillStyle = "yellow"; ctx.fill();

      const now = new Date();

      Object.entries(ORBIT_RADIUS).forEach(([pid, radius], index) => {
        const angle = calculateAngleFromTime(now, radius);
        const rad = angle * (Math.PI / 180);
        const px = cx + radius * Math.cos(rad);
        const py = cy + radius * Math.sin(rad);

        // Orbit
        ctx.beginPath(); ctx.arc(cx, cy, radius, 0, 2 * Math.PI);
        ctx.strokeStyle = "#333"; ctx.stroke();

        // Planet
        ctx.beginPath(); ctx.arc(px, py, 5, 0, 2 * Math.PI);
        ctx.fillStyle = planetColors[index]; ctx.fill();

        if (pid === targetId && drawShip) {
          ctx.beginPath(); ctx.moveTo(cx + ORBIT_RADIUS["399"], cy); // Earth static east
          const ctrlX = (cx + px) / 2;
          const ctrlY = cy - 100 + Math.random() * 30;
          ctx.quadraticCurveTo(ctrlX, ctrlY, px, py);
          ctx.strokeStyle = "#0f0"; ctx.setLineDash([5, 3]); ctx.stroke(); ctx.setLineDash([]);
          ctx.fillStyle = "white";
          ctx.fillText("ðŸ›¸", ctrlX, ctrlY);
        }
      });
    }

    function engageWarp() {
      const id = document.getElementById("targetPlanet").value;
      const warp = parseInt(document.getElementById("warpSpeed").value);
      const distanceAU = {
        "199": 0.39, "299": 0.72, "399": 1, "499": 1.52,
        "599": 5.2, "699": 9.5, "799": 19.2, "899": 30.1, "999": 39.5
      }[id];

      const now = new Date();
      const baseSeconds = 600;
      const travelSec = distanceAU * baseSeconds / warp;
      const arrival = new Date(now.getTime() + travelSec * 1000);

      document.getElementById("vector").textContent = distanceAU.toFixed(2);
      document.getElementById("angle").textContent = calculateAngleFromTime(now).toFixed(1);
      document.getElementById("departure").textContent = now.toLocaleTimeString("en-US", { timeZone: "America/Chicago" });
      document.getElementById("arrival").textContent = arrival.toLocaleTimeString("en-US", { timeZone: "America/Chicago" });

      drawSolarSystem(id, true);
    }

    function resetMap() {
      document.getElementById("vector").textContent = "--";
      document.getElementById("angle").textContent = "--";
      document.getElementById("departure").textContent = "--";
      document.getElementById("arrival").textContent = "--";
      drawSolarSystem();
    }

    function screenshotMap() {
      const link = document.createElement("a");
      link.download = "warp_screenshot.png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    }

    drawSolarSystem();
  </script>
</body>
</html>
