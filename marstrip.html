<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Warp Drive Simulator</title>
  <style>
    body {
      background-color: black;
      color: cyan;
      font-family: monospace;
      display: flex;
      height: 100vh;
      margin: 0;
    }
    #controls {
      width: 360px;
      padding: 20px;
      border-right: 2px solid cyan;
      font-size: 16px;
    }
    .panel {
      margin-bottom: 15px;
    }
    label, select, button {
      display: block;
      width: 100%;
      margin-top: 5px;
      font-size: 16px;
    }
    #info {
      font-size: 16px;
      margin-top: 10px;
      line-height: 1.7;
    }
    canvas {
      flex-grow: 1;
    }
  </style>
</head>
<body>
  <div id="controls">
    <div class="panel">
      <label>CST Time: <span id="cstTime"></span></label>
      <label>Distance: <span id="distance"></span> AU</label>
      <label>Angle: <span id="angle"></span>¬∞</label>
      <label>Departure: <span id="departure"></span></label>
      <label>Arrival: <span id="arrival"></span></label>
      <label>Duration: <span id="duration"></span></label>
    </div>
    <div class="panel">
      <label for="planet">Destination</label>
      <select id="planet">
        <option>Mars</option>
        <option>Jupiter</option>
        <option>Saturn</option>
        <option>Uranus</option>
        <option>Neptune</option>
        <option>Pluto</option>
      </select>
    </div>
    <div class="panel">
      <label for="warp">Warp Level</label>
      <select id="warp">
        <option>Warp 1</option>
        <option>Warp 2</option>
        <option>Warp 3</option>
        <option>Warp 4</option>
        <option>Warp 5</option>
        <option>Warp 6</option>
        <option>Warp 7</option>
        <option>Warp 8</option>
        <option>Warp 9</option>
        <option>Warp 10</option>
      </select>
    </div>
    <button id="engage">üöÄ Engage Warp</button>
    <button id="reset" disabled>üîÅ Reset</button>
    <button id="screenshot">üì∑ Screenshot</button>
  </div>

  <canvas id="spaceCanvas" width="1200" height="768"></canvas>

  <script>
    const canvas = document.getElementById('spaceCanvas');
    const ctx = canvas.getContext('2d');

    const planets = {
      Earth: { x: 600, y: 384 },
      Mars: { x: 750, y: 384 },
      Jupiter: { x: 900, y: 384 },
      Saturn: { x: 1050, y: 384 },
      Uranus: { x: 1200, y: 384 },
      Neptune: { x: 1350, y: 384 },
      Pluto: { x: 1500, y: 384 }
    };

    const distanceDisplay = document.getElementById('distance');
    const angleDisplay = document.getElementById('angle');
    const departureDisplay = document.getElementById('departure');
    const arrivalDisplay = document.getElementById('arrival');
    const durationDisplay = document.getElementById('duration');

    const drawScene = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 1;

      for (let r = 50; r <= 500; r += 50) {
        ctx.beginPath();
        ctx.arc(planets.Earth.x, planets.Earth.y, r, 0, 2 * Math.PI);
        ctx.stroke();
      }

      for (const [name, { x, y }] of Object.entries(planets)) {
        ctx.beginPath();
        ctx.arc(x, y, 10, 0, 2 * Math.PI);
        ctx.fillStyle = name === 'Earth' ? 'cyan' : 'white';
        ctx.fill();

        ctx.fillStyle = 'white';
        ctx.font = '18px monospace';
        ctx.fillText(name, x + 12, y);
      }
    };

    drawScene();

    function animateWarp(planetName, warpLevel) {
      const earth = planets.Earth;
      const dest = planets[planetName];
      const dx = dest.x - earth.x;
      const dy = dest.y - earth.y;

      const distance = Math.sqrt(dx * dx + dy * dy);
      const angleDeg = Math.atan2(dy, dx) * 180 / Math.PI;

      const now = new Date();
      const departure = now.toLocaleTimeString();
      const travelSeconds = Math.round((distance / 100) / warpLevel * 5);
      const arrival = new Date(now.getTime() + travelSeconds * 1000);

      distanceDisplay.textContent = (distance / 100).toFixed(2);
      angleDisplay.textContent = angleDeg.toFixed(2);
      departureDisplay.textContent = departure;
      arrivalDisplay.textContent = arrival.toLocaleTimeString();
      durationDisplay.textContent = `${Math.floor(travelSeconds / 60)}:${String(travelSeconds % 60).padStart(2, '0')}`;

      const steps = 300;
      let step = 0;
      const resetBtn = document.getElementById('reset');
      resetBtn.disabled = true;

      const interval = setInterval(() => {
        drawScene();
        const progress = step / steps;
        const arcHeight = (1 - warpLevel / 10) * 100; // Curve higher at low warp
        const curveX = earth.x + dx * progress;
        const curveY = earth.y + dy * progress - arcHeight * Math.sin(Math.PI * progress);

        ctx.beginPath();
        ctx.arc(curveX, curveY, 6, 0, 2 * Math.PI);
        ctx.fillStyle = 'lime';
        ctx.fill();
        ctx.strokeStyle = 'white';
        ctx.stroke();

        step++;
        if (step > steps) {
          clearInterval(interval);
          resetBtn.disabled = false;
        }
      }, 50);
    }

    document.getElementById('engage').onclick = () => {
      const planet = document.getElementById('planet').value;
      const warpText = document.getElementById('warp').value;
      const warpLevel = parseInt(warpText.split(' ')[1]);
      animateWarp(planet, warpLevel);
    };

    document.getElementById('reset').onclick = () => {
      drawScene();
      distanceDisplay.textContent = '--';
      angleDisplay.textContent = '--';
      departureDisplay.textContent = '--';
      arrivalDisplay.textContent = '--';
      durationDisplay.textContent = '--';
    };

    document.getElementById('screenshot').onclick = () => {
      const link = document.createElement('a');
      link.download = 'warp_simulator.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    };

    setInterval(() => {
      document.getElementById('cstTime').textContent = new Date().toLocaleTimeString();
    }, 1000);
  </script>
</body>
</html>
