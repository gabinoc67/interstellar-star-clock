<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Warp Drive Simulator</title>
  <style>
    body {
      background-color: black;
      color: cyan;
      font-family: monospace;
      display: flex;
      height: 100vh;
      margin: 0;
    }
    #controls {
      width: 360px;
      padding: 20px;
      border-right: 2px solid cyan;
      font-size: 16px;
    }
    .panel {
      margin-bottom: 15px;
    }
    label, select, button {
      display: block;
      width: 100%;
      margin-top: 5px;
      font-size: 16px;
    }
    #info {
      font-size: 16px;
      margin-top: 10px;
      line-height: 1.7;
    }
    canvas {
      flex-grow: 1;
    }
  </style>
</head>
<body>
  <div id="controls">
    <div class="panel">
      <label>CST Time: <span id="cstTime"></span></label>
      <label>Distance: <span id="distance"></span> AU</label>
      <label>Angle: <span id="angle"></span>¬∞</label>
      <label>Departure: <span id="departure"></span></label>
      <label>Arrival: <span id="arrival"></span></label>
      <label>Duration: <span id="duration"></span></label>
    </div>
    <div class="panel">
      <label for="planet">Destination</label>
      <select id="planet">
        <option>Mars</option>
        <option>Jupiter</option>
        <option>Saturn</option>
        <option>Uranus</option>
        <option>Neptune</option>
        <option>Pluto</option>
      </select>
    </div>
    <div class="panel">
      <label for="warp">Warp Level</label>
      <select id="warp">
        <option>Warp 1</option>
        <option>Warp 2</option>
        <option>Warp 3</option>
        <option>Warp 4</option>
        <option>Warp 5</option>
        <option>Warp 6</option>
        <option>Warp 7</option>
        <option>Warp 8</option>
        <option>Warp 9</option>
        <option>Warp 10</option>
      </select>
    </div>
    <button id="engage">üöÄ Engage Warp</button>
    <button id="reset" disabled>üîÅ Reset</button>
    <button id="screenshot">üì∑ Screenshot</button>
  </div>

  <canvas id="spaceCanvas" width="1200" height="768"></canvas>

  <script>
    const canvas = document.getElementById('spaceCanvas');
    const ctx = canvas.getContext('2d');
    const AU = 30;

    const planetNames = ["Sun", "Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune", "Pluto"];
    const planetRadii = planetNames.map((_, i) => AU * i);

    let trajectory = [];

    function getPlanetPositions() {
      const now = new Date();
      const secondsInDay = 86400;
      const seconds = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
      const angleBase = (seconds / secondsInDay) * 2 * Math.PI;

      const positions = {};
      planetNames.forEach((name, i) => {
        const radius = planetRadii[i];
        const angle = angleBase + i * (Math.PI / 12);
        const x = 600 + radius * Math.cos(angle);
        const y = 384 + radius * Math.sin(angle);
        positions[name] = { x, y };
      });
      return positions;
    }

    const drawScene = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const planets = getPlanetPositions();

      // Draw orbit rings
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 1.5;
      planetRadii.forEach(r => {
        ctx.beginPath();
        ctx.arc(600, 384, r, 0, 2 * Math.PI);
        ctx.stroke();
      });

      // Draw trajectory dotted line
      if (trajectory.length > 1) {
        ctx.beginPath();
        ctx.setLineDash([5, 5]);
        ctx.moveTo(trajectory[0].x, trajectory[0].y);
        trajectory.forEach(point => ctx.lineTo(point.x, point.y));
        ctx.strokeStyle = 'cyan';
        ctx.lineWidth = 1.2;
        ctx.stroke();
        ctx.setLineDash([]);
      }

      // Draw planets
      for (const [name, { x, y }] of Object.entries(planets)) {
        ctx.beginPath();
        ctx.arc(x, y, 8, 0, 2 * Math.PI);
        ctx.fillStyle = name === 'Earth' ? 'cyan' : (name === 'Sun' ? 'orange' : 'white');
        ctx.fill();
        ctx.fillStyle = 'white';
        ctx.font = '14px monospace';
        ctx.fillText(name, x + 10, y);
      }
    };

    drawScene();

    document.getElementById('engage').onclick = () => {
      const planet = document.getElementById('planet').value;
      const warpText = document.getElementById('warp').value;
      const warpLevel = parseInt(warpText.split(' ')[1]);

      const planets = getPlanetPositions();
      const earth = planets.Earth;
      const dest = planets[planet];

      const dx = dest.x - earth.x;
      const dy = dest.y - earth.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      const angleDeg = Math.atan2(dy, dx) * 180 / Math.PI;

      const now = new Date();
      const departure = now.toLocaleTimeString();
      const travelSeconds = Math.round((distance / 100) / warpLevel * 5);
      const arrival = new Date(now.getTime() + travelSeconds * 1000);

      document.getElementById('distance').textContent = (distance / 100).toFixed(2);
      document.getElementById('angle').textContent = angleDeg.toFixed(2);
      document.getElementById('departure').textContent = departure;
      document.getElementById('arrival').textContent = arrival.toLocaleTimeString();
      document.getElementById('duration').textContent = `${Math.floor(travelSeconds / 60)}:${String(travelSeconds % 60).padStart(2, '0')}`;

      const steps = 300;
      let step = 0;
      const resetBtn = document.getElementById('reset');
      resetBtn.disabled = true;
      trajectory = [];

      const interval = setInterval(() => {
        const progress = step / steps;
        const arcHeight = (1 - warpLevel / 10) * 80;
        const curveX = earth.x + dx * progress;
        const curveY = earth.y + dy * progress - arcHeight * Math.sin(Math.PI * progress);
        trajectory.push({ x: curveX, y: curveY });

        drawScene();

        ctx.beginPath();
        ctx.arc(curveX, curveY, 6, 0, 2 * Math.PI);
        ctx.fillStyle = 'lime';
        ctx.fill();
        ctx.strokeStyle = 'white';
        ctx.stroke();

        step++;
        if (step > steps) {
          clearInterval(interval);
          resetBtn.disabled = false;
        }
      }, 50);
    };

    document.getElementById('reset').onclick = () => {
      drawScene();
      document.getElementById('distance').textContent = '--';
      document.getElementById('angle').textContent = '--';
      document.getElementById('departure').textContent = '--';
      document.getElementById('arrival').textContent = '--';
      document.getElementById('duration').textContent = '--';
      trajectory = [];
    };

    document.getElementById('screenshot').onclick = () => {
      const link = document.createElement('a');
      link.download = 'warp_simulator.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    };

    setInterval(() => {
      document.getElementById('cstTime').textContent = new Date().toLocaleTimeString();
    }, 1000);
  </script>
</body>
</html>
