<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Warp Navigation — 4-D Holographic Solar Simulator</title>
<style>
  html, body { margin:0; height:100%; background:#020613; overflow:hidden; }
  #info {
    position:absolute; top:15px; left:15px; color:#8fd3ff;
    font-family:Arial; font-size:18px; letter-spacing:1px;
  }
  #controls {
    position:absolute; bottom:20px; left:50%; transform:translateX(-50%);
    display:flex; gap:12px; flex-wrap:wrap;
  }
  .btn {
    padding:10px 18px; font-size:16px; font-family:Arial;
    background:#071d36; color:#9ee5ff; border:1px solid #268fff;
    border-radius:6px; cursor:pointer;
  }
  .btn:hover { background:#0c2d52; }
  #hud {
    position:absolute; right:20px; top:20px;
    padding:14px 20px;
    background:rgba(4,16,35,0.78);
    border:1px solid #2fb6ff;
    border-radius:8px;
    color:#9cdcff;
    font-family:Arial; font-size:14px;
    width:270px; line-height:20px;
  }
</style>
</head>
<body>
<div id="info">Warp Navigation — Select destination planet</div>
<div id="controls"></div>
<div id="hud">Warp Engineering HUD<br>Awaiting destination…</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/js/controls/OrbitControls.js"></script>

<script>
/* ---------------------------------------
   SCENE + CAMERA
--------------------------------------- */
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);
camera.position.set(10, 9, 15);
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
const controls = new THREE.OrbitControls(camera, renderer.domElement);

/* ---------------------------------------
   VISUAL BOX
--------------------------------------- */
scene.add(new THREE.LineSegments(
  new THREE.EdgesGeometry(new THREE.BoxGeometry(18,18,18)),
  new THREE.LineBasicMaterial({ color:0x27d7ff, opacity:0.32, transparent:true })
));

/* ---------------------------------------
   PLANETS + LABELS
--------------------------------------- */
const planets = {};
function addPlanet(name, x,y,z, size, color){
  const m = new THREE.Mesh(
    new THREE.SphereGeometry(size,32,32),
    new THREE.MeshBasicMaterial({ color })
  );
  m.position.set(x,y,z);
  scene.add(m);

  const label = document.createElement("div");
  label.style.position="absolute";
  label.style.color="#8fd3ff";
  label.style.fontFamily="Arial";
  label.style.fontSize="14px";
  label.innerHTML = name;
  document.body.appendChild(label);

  m.userData.label = label;
  planets[name] = m;
}

/* Planet placement — stylized scale */
addPlanet("Sun",    -5.0, 0.3,  0.2, 0.55, 0xffd66b);
addPlanet("Mercury",-3.3,-0.2,  0.2, 0.17, 0xbf9f80);
addPlanet("Venus",  -2.2, 0.4,  0.8, 0.21, 0xd9c38a);
addPlanet("Earth",  -1.2, 0.1, -0.1, 0.23, 0x4fa7ff);
addPlanet("Mars",   -0.3,-0.1,  0.7, 0.21, 0xff6f4a);
addPlanet("Jupiter", 2.0, 0.3, -0.4, 0.45, 0xe6b282);
addPlanet("Saturn",  3.7,-0.4,  0.2, 0.40, 0xe3cb97);
addPlanet("Uranus",  5.0, 0.3, -0.3, 0.32, 0x9cd6e8);
addPlanet("Neptune", 6.2,-0.2,  0.9, 0.32, 0x6bb5ff);

/* ---------------------------------------
   HOLOGRAPHIC 4-D SHEET
--------------------------------------- */
const sheetGeo = new THREE.PlaneGeometry(13, 10, 42, 42);
const sheetMat = new THREE.MeshBasicMaterial({
  color:0x27d7ff, wireframe:true, opacity:0.37, transparent:true
});
const sheet = new THREE.Mesh(sheetGeo, sheetMat);
sheet.rotation.x = -Math.PI/2.2;
sheet.position.y = -5.2;
scene.add(sheet);

function wave(t){
  const v = sheet.geometry.vertices; let i=0;
  for (let y=0;y<43;y++){
    for (let x=0;x<43;x++){
      v[i].z = Math.sin(x*0.22 + t*2.0)*0.22 + Math.cos(y*0.18 + t*1.3)*0.18;
      i++;
    }
  }
  sheet.geometry.verticesNeedUpdate = true;
}

/* ---------------------------------------
   HOLOGRAPHIC STRINGS
--------------------------------------- */
for(let i=0;i<40;i++){
  let y = -8 + (i * 0.4);
  scene.add(new THREE.Line(
    new THREE.BufferGeometry().setFromPoints([
      new THREE.Vector3(-9,y,-9), new THREE.Vector3(9,y,9)
    ]),
    new THREE.LineBasicMaterial({ color:0x27d7ff, opacity:0.22, transparent:true })
  ));
}

/* ---------------------------------------
   WARP ENGINE & ENERGY CALC
--------------------------------------- */
let warpLine = null;
const hud = document.getElementById("hud");

function energyCalc(curvatureFactor, distance){
  const base = 3.2e16;   // Joules per warp unit
  const E = base * distance * (1 + curvatureFactor*2.5);
  const c = 299792458;
  const m = E / (c*c);
  return {E, m};
}

function drawWarpPath(target){
  if (warpLine) scene.remove(warpLine);

  const start = planets["Earth"].position;
  const end = planets[target].position;
  const points = [];
  let curvatureSum = 0;

  for (let i=0;i<=20;i++){
    let s = i/20;
    let x = THREE.Math.lerp(start.x,end.x,s);
    let y = THREE.Math.lerp(start.y,end.y,s);
    let z = THREE.Math.lerp(start.z,end.z,s);
    let curv = Math.sin(s*3.2) * Math.cos(s*1.8) * 0.9;
    points.push(new THREE.Vector3(x, y + curv*0.35, z));
    curvatureSum += Math.abs(curv);
  }

  warpLine = new THREE.Line(
    new THREE.BufferGeometry().setFromPoints(points),
    new THREE.LineBasicMaterial({ color:0x83f3ff })
  );
  scene.add(warpLine);

  const distance = start.distanceTo(end);
  const {E,m} = energyCalc(curvatureSum/20, distance);

  hud.innerHTML = `
    <b>Warp Engineering HUD</b><br><br>
    Destination: ${target}<br>
    Warp Distance: ${distance.toFixed(2)} units<br>
    Curvature Difficulty: ${(curvatureSum/20).toFixed(2)}<br><br>
    <b>Energy Required:</b> ${E.toExponential(3)} J<br>
    <b>Mass Generated (m = E / c²):</b><br>${m.toExponential(3)} kg
  `;
}

/* ---------------------------------------
   UI BUTTONS
--------------------------------------- */
const planetList = ["Mercury","Venus","Mars","Jupiter","Saturn","Uranus","Neptune"];
const ctrl = document.getElementById("controls");
planetList.forEach(p=>{
  const b = document.createElement("button");
  b.innerText = "Warp to " + p;
  b.className = "btn";
  b.onclick = ()=> drawWarpPath(p);
  ctrl.appendChild(b);
});

/* ---------------------------------------
   RENDER
--------------------------------------- */
function animate(){
  requestAnimationFrame(animate);
  wave(performance.now()*0.0005);
  controls.update();
  renderer.render(scene,camera);

  scene.traverse(o=>{
    if(o.userData.label){
      const v = o.position.clone().project(camera);
      o.userData.label.style.left=((v.x+1)/2*window.innerWidth)+"px";
      o.userData.label.style.top =(-(v.y-1)/2*window.innerHeight)+"px";
    }
  });
}
animate();

addEventListener("resize", ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
