<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Warp Control â€” Even Grid + Compact Panels (v3.6 Zoom)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg:#070b12; --panel:#0c1424; --glass:#0d1a31cc; --edge:#27406b;
      --text:#eaf2ff; --muted:#a7b9df; --good:#22c55e; --warn:#facc15; --bad:#ef4444;
      --ui-scale:1; --fs:14px; --pad:8px; --gap:8px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background:
        radial-gradient(1200px 800px at 10% -10%, #112240 0%, transparent 60%),
        radial-gradient(900px 900px at 120% -20%, #0b1b33 0%, transparent 50%),
        var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial;
      font-size: var(--fs);
    }
    .viewportScale {
      transform: scale(var(--ui-scale));
      transform-origin: top left;
      width: calc(100% / var(--ui-scale));
    }
    .wrap { max-width: 1400px; margin: 0 auto; padding: var(--pad); }
    .glass {
      background: linear-gradient(180deg, #0b1528aa, #0b152880),
                  radial-gradient(600px 200px at 20% -30%, #15305f55, transparent 60%);
      backdrop-filter: blur(6px);
    }
    .panel {
      border: 1px solid var(--edge);
      border-radius: 12px;
      padding: calc(var(--pad) - 1px);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.42);
    }
    h1, h2, h3 { margin: .35rem 0; }
    .grid { display: grid; gap: var(--gap); }
    .evenGrid {
      display: grid;
      grid-template-columns: repeat(2, minmax(260px, 1fr));
      gap: var(--gap);
      align-items: start;
    }
    @media (max-width:1250px) { .evenGrid { grid-template-columns: repeat(2, minmax(260px, 1fr)); } }
    @media (max-width:980px) { .evenGrid { grid-template-columns: repeat(2, minmax(260px, 1fr)); } }
    @media (max-width:640px) { .evenGrid { grid-template-columns: 1fr; } }
    .span-all { grid-column: 1 / -1; }
    .controls label {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 6px 0;
      color: var(--muted);
      font-size: .95rem;
    }
    select, input[type="number"], input[type="range"] {
      background: #0b1220;
      color: #eaf2ff;
      border: 1px solid #34425f;
      border-radius: 8px;
      padding: 6px 8px;
      font-size: .95rem;
    }
    input[type="range"] { width: 160px; }
    button {
      background: #1b2a44;
      border: 1px solid #304166;
      color: #e6eefc;
      padding: 7px 9px;
      margin: 3px;
      border-radius: 8px;
      cursor: pointer;
    }
    #startBtn { background: #00ccff; color: #00131a; border: none; }
    #stopBtn { background: #64748b; }
    #resetBtn { background: #fb923c; border: none; }
    #exportBtn { background: #7c3aed; border: none; }
    .lights {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .light {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid #334155;
      background: #0b1220;
      font-size: .85rem;
    }
    .dot { width: 9px; height: 9px; border-radius: 50%; }
    .good .dot { background: var(--good); }
    .warn .dot { background: var(--warn); }
    .bad .dot { background: var(--bad); }
    .meter {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 4px 0;
    }
    .bar {
      height: 9px;
      background: #0b1220;
      border: 1px solid #334155;
      border-radius: 6px;
      overflow: hidden;
      flex: 1;
    }
    .fill {
      height: 100%;
      background: linear-gradient(90deg, #60a5fa, #22d3ee);
    }
    .stat {
      font-variant-numeric: tabular-nums;
      font-size: .86rem;
      color: var(--muted);
    }
    canvas {
      background: linear-gradient(180deg, #091323, #0a1322);
      border: 1px solid #2b3a5a;
      border-radius: 10px;
      max-width: 100%;
      display: block;
    }
    .pill {
      display: inline-block;
      padding: .1rem .4rem;
      border: 1px solid #36507d;
      border-radius: 999px;
      font-size: .8rem;
      color: #a5f3fc;
    }
    .legend {
      color: var(--muted);
      font-size: .84rem;
      margin-top: 6px;
    }
    .hdrline {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    .toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #a7b9df;
      font-size: .9rem;
    }
    .badge {
      border: 1px solid #3b4f77;
      border-radius: 999px;
      padding: 2px 8px;
      color: #93c5fd;
      background: #0b1220;
    }

    /* Clock Cards (Compact Layout) */
    .clockSection { margin-top: 6px; }
    .clockHeader {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 2px 0 6px;
    }
    .clockGrid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: var(--gap);
    }
    @media (max-width: 1200px) { .clockGrid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 820px) { .clockGrid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 520px) { .clockGrid { grid-template-columns: 1fr; } }
    .clockCard {
      background: #0b1220;
      border: 1px solid #304166;
      border-radius: 12px;
      padding: 8px;
      display: grid;
      gap: 4px;
      align-content: start;
    }
    .clockHdr {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .clockTitle { font-weight: 600; }
    .status {
      font-size: .78rem;
      border: 1px solid #36507d;
      border-radius: 999px;
      padding: 2px 6px;
    }
    .status.good { color: #0f0; border-color: #256f2a; }
    .status.warn { color: #222; background: #facc15; }
    .status.bad { color: #fff; background: #ef4444; }
    .kv {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 4px 8px;
      font-size: .84rem;
      color: #cfe2ff;
    }
    /* Zoom Animation Canvas */
    #zoomCanvas {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 240px;
      height: 240px;
      pointer-events: none;
      z-index: 50;
    }
  </style>
</head>
<body>
<div class="viewportScale">
  <div class="wrap grid">
    <div class="hdrline">
      <h1>ðŸš€ Warp Control Center</h1>
      <div class="toggle">
        <label>UI Scale <input id="uiScale" type="range" min="70" max="120" value="90"> <span id="uiScaleVal" class="badge">90%</span></label>
        <label>Sound <input id="soundOn" type="checkbox" checked></label>
        <span class="badge">Even Grid Build v3.6</span>
      </div>
    </div>
    <!-- Zoom Canvas -->
    <canvas id="zoomCanvas" width="240" height="240"></canvas>
    <!-- Panel Grid Layout -->
    <div class="evenGrid">
      <!-- LEFT COLUMN -->
      <div class="panel glass">
        <h2>Flight Plan</h2>
        <div class="controls">
          <label>Destination
            <select id="planetSelect">
              <option value="mercury">Mercury</option>
              <option value="venus">Venus</option>
              <option value="mars">Mars</option>
              <option value="jupiter">Jupiter</option>
              <option value="saturn">Saturn</option>
              <option value="uranus">Uranus</option>
              <option value="neptune">Neptune</option>
              <option value="pluto">Pluto</option>
            </select>
          </label>
          <label>Warp Drive
            <input id="warpDrive" type="range" min="1" max="10" value="1" />
            <span id="warpLevelDisplay" class="pill">Warp 1</span>
          </label>
        </div>
        <div class="lights">
          <div class="light good"><div class="dot"></div>Sync OK</div>
          <div class="light warn"><div class="dot"></div>Drift Risk</div>
          <div class="light bad"><div class="dot"></div>Unsafe</div>
        </div>
        <div class="controls">
          <button id="engageBtn">Engage</button>
          <button id="resetBtn">Reset</button>
        </div>
      </div>

      <div class="panel glass">
        <h2>Gravity Vectoring Engine</h2>
        <canvas id="gravityCanvas" width="280" height="220"></canvas>
        <div class="legend">Live Gravity Field Rendering</div>
      </div>

      <div class="panel glass">
        <h2>Debris Defense Field</h2>
        <canvas id="debrisCanvas" width="280" height="180"></canvas>
        <div class="legend">Micrometeorite Deflection Simulation</div>
      </div>

      <div class="panel glass">
        <h2>Warp Starfield Window</h2>
        <canvas id="starsCanvas" width="280" height="200"></canvas>
        <div class="legend">Speed Visualizer</div>
      </div>

      <!-- RIGHT COLUMN -->
      <div class="panel glass">
        <h2>Trajectory & Field Vectors</h2>
        <canvas id="trajectoryCanvas" width="280" height="200"></canvas>
        <div class="legend">Current Flight Path</div>
      </div>

      <div class="panel glass">
        <h2>Heliocentric Polar Map</h2>
        <canvas id="polarCanvas" width="280" height="220"></canvas>
        <div class="legend">Solar System Positioning</div>
      </div>

      <div class="panel glass">
        <h2>Shield Bubble Box</h2>
        <canvas id="shieldCanvas" width="280" height="160"></canvas>
        <div class="legend">Radiation & Impact Barrier</div>
      </div>

      <div class="panel glass">
        <h2>Einstein Tensor Mini</h2>
        <canvas id="tensorCanvas" width="280" height="180"></canvas>
        <div class="legend">Space Curvature Model</div>
      </div>
    </div>

    <!-- Clock Cards -->
    <div class="clockSection span-all">
      <div class="clockHeader">
        <h2>Clock Sync (C1â€“C5)</h2>
        <span class="pill">CST Base Time Lock</span>
      </div>
      <div class="clockGrid" id="clockGrid">
        <!-- Clock cards inserted by JavaScript -->
      </div>
    </div>
    <!-- IST Orbital Tracker -->
    <div class="panel glass span-all">
      <h2>IST Orbital Tracker (Live)</h2>
      <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px;" id="istStats">
        <div class="clockCard">
          <div class="clockHdr"><span class="clockTitle">Sun</span></div>
          <div class="kv">
            <div>Age</div><div id="sunAge">0</div>
            <div>Mass</div><div>1.00 Mâ˜‰</div>
            <div>Luminosity</div><div>1.00 Lâ˜‰</div>
            <div>Core Temp</div><div>15.7 MK</div>
          </div>
        </div>
        <div class="clockCard">
          <div class="clockHdr"><span class="clockTitle">Earth</span></div>
          <div class="kv">
            <div>Orbit #</div><div id="earthOrbit">0</div>
            <div>Day</div><div id="earthDay">0</div>
            <div>Year</div><div id="earthYear">0</div>
            <div>Distance</div><div id="earthDist">0 AU</div>
          </div>
        </div>
        <div class="clockCard">
          <div class="clockHdr"><span class="clockTitle">Target</span></div>
          <div class="kv">
            <div>Planet</div><div id="targetPlanet">â€”</div>
            <div>Distance</div><div id="targetDist">â€”</div>
            <div>Speed</div><div id="targetSpeed">â€”</div>
            <div>ETA</div><div id="targetETA">â€”</div>
          </div>
        </div>
        <div class="clockCard">
          <div class="clockHdr"><span class="clockTitle">Vector</span></div>
          <div class="kv">
            <div>Status</div><div id="vectorStatus">â€”</div>
            <div>Curvature</div><div id="vectorCurve">â€”</div>
            <div>Stability</div><div id="vectorStability">â€”</div>
            <div>Alignment</div><div id="vectorAlign">â€”</div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- /wrap -->
</div><!-- /viewportScale -->

<script>
  const zoomCanvas = document.getElementById("zoomCanvas");
  const zoomCtx = zoomCanvas.getContext("2d");
  const zoomImgEarth = new Image();
  const zoomImgPlanet = new Image();
  let zoomState = {
    earthScale: 1,
    planetScale: 0,
    animating: false,
    targetPlanet: "mars"
  };
  zoomImgEarth.src = "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/earth.png";

  const planetImages = {
    mercury: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/mercury2.png",
    venus: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/venus2.png",
    mars: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/mars.png",
    jupiter: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/jupiter.png",
    saturn: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/saturn.png",
    uranus: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/uranus.png",
    neptune: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/neptune2.png",
    pluto: "https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/pluto2.png"
  };

  zoomImgPlanet.src = planetImages["mars"];
  function drawZoomAnimation() {
    zoomCtx.clearRect(0, 0, zoomCanvas.width, zoomCanvas.height);

    // Earth Zoom Out
    if (zoomState.earthScale > 0) {
      const earthSize = 120 * zoomState.earthScale;
      zoomCtx.globalAlpha = 1;
      zoomCtx.drawImage(zoomImgEarth, zoomCanvas.width / 2 - earthSize / 2, zoomCanvas.height / 2 - earthSize / 2, earthSize, earthSize);
    }

    // Planet Zoom In
    if (zoomState.planetScale > 0) {
      const planetSize = 40 + 160 * zoomState.planetScale;
      zoomCtx.globalAlpha = zoomState.planetScale;
      zoomCtx.drawImage(zoomImgPlanet, zoomCanvas.width / 2 - planetSize / 2, zoomCanvas.height / 2 - planetSize / 2, planetSize, planetSize);
    }

    if (zoomState.animating) {
      // Progress both animations
      zoomState.earthScale -= 0.01;
      zoomState.planetScale += 0.008;

      if (zoomState.earthScale <= 0 && zoomState.planetScale >= 1) {
        zoomState.animating = false;
      } else {
        requestAnimationFrame(drawZoomAnimation);
      }
    }
  }

  document.getElementById("engageBtn").addEventListener("click", () => {
    zoomState.animating = true;
    zoomState.earthScale = 1;
    zoomState.planetScale = 0;
    zoomState.targetPlanet = document.getElementById("planetSelect").value;
    zoomImgPlanet.src = planetImages[zoomState.targetPlanet];
    requestAnimationFrame(drawZoomAnimation);
  });

  document.getElementById("resetBtn").addEventListener("click", () => {
    zoomState.animating = false;
    zoomCtx.clearRect(0, 0, zoomCanvas.width, zoomCanvas.height);
  });

  document.getElementById("planetSelect").addEventListener("change", () => {
    zoomState.targetPlanet = document.getElementById("planetSelect").value;
    zoomImgPlanet.src = planetImages[zoomState.targetPlanet];
  });

  document.getElementById("warpDrive").addEventListener("input", e => {
    const val = parseInt(e.target.value);
    document.getElementById("warpLevelDisplay").textContent = `Warp ${val}`;
  });

  document.getElementById("uiScale").addEventListener("input", (e) => {
    const scale = parseInt(e.target.value);
    document.documentElement.style.setProperty("--ui-scale", scale / 100);
    document.getElementById("uiScaleVal").textContent = `${scale}%`;
  });

  // Insert clock cards dynamically (C1â€“C5)
  const clocks = ["C1", "C2", "C3", "C4", "C5"];
  const clockGrid = document.getElementById("clockGrid");

  clocks.forEach(c => {
    const div = document.createElement("div");
    div.className = "clockCard";
    div.innerHTML = `
      <div class="clockHdr"><span class="clockTitle">${c}</span><span class="status good">SYS</span></div>
      <div class="kv">
        <div>Time</div><div id="${c}-time">00:00:00</div>
        <div>Drift</div><div id="${c}-drift">+0.00s</div>
        <div>Vector</div><div id="${c}-vector">0Â°</div>
        <div>Status</div><div id="${c}-status">OK</div>
      </div>
    `;
    clockGrid.appendChild(div);
  });
  function updateClocks() {
    const now = new Date();
    clocks.forEach(c => {
      const timeStr = now.toLocaleTimeString();
      const drift = (Math.random() * 0.1 - 0.05).toFixed(2);
      const vector = Math.floor(Math.random() * 360);
      document.getElementById(`${c}-time`).textContent = timeStr;
      document.getElementById(`${c}-drift`).textContent = `${drift > 0 ? "+" : ""}${drift}s`;
      document.getElementById(`${c}-vector`).textContent = `${vector}Â°`;
    });
  }

  setInterval(updateClocks, 1000);
  updateClocks();

  // Dummy IST stats (you can hook this up to real math later)
  document.getElementById("sunAge").textContent = "4.6B yrs";
  document.getElementById("earthOrbit").textContent = "1";
  document.getElementById("earthDay").textContent = "245";
  document.getElementById("earthYear").textContent = "2025";
  document.getElementById("earthDist").textContent = "1.00 AU";
  document.getElementById("targetPlanet").textContent = "Mars";
  document.getElementById("targetDist").textContent = "0.52 AU";
  document.getElementById("targetSpeed").textContent = "0.5c";
  document.getElementById("targetETA").textContent = "3.5h";
  document.getElementById("vectorStatus").textContent = "Stable";
  document.getElementById("vectorCurve").textContent = "5Â°";
  document.getElementById("vectorStability").textContent = "High";
  document.getElementById("vectorAlign").textContent = "OK";

  // Debris field animation
  const debrisCtx = document.getElementById("debrisCanvas").getContext("2d");
  let debris = Array.from({length: 40}, () => ({
    x: Math.random() * 280,
    y: Math.random() * 180,
    r: Math.random() * 2 + 1,
    dx: Math.random() * 0.5 - 0.25,
    dy: Math.random() * 0.5 - 0.25
  }));

  function drawDebris() {
    debrisCtx.clearRect(0, 0, 280, 180);
    debris.forEach(p => {
      debrisCtx.beginPath();
      debrisCtx.arc(p.x, p.y, p.r, 0, 2 * Math.PI);
      debrisCtx.fillStyle = "#a3e635";
      debrisCtx.fill();
      p.x += p.dx;
      p.y += p.dy;
      if (p.x < 0 || p.x > 280) p.dx *= -1;
      if (p.y < 0 || p.y > 180) p.dy *= -1;
    });
    requestAnimationFrame(drawDebris);
  }

  drawDebris();

  // Starfield animation
  const starsCtx = document.getElementById("starsCanvas").getContext("2d");
  let stars = Array.from({length: 70}, () => ({
    x: Math.random() * 280,
    y: Math.random() * 200,
    s: Math.random() * 2 + 1
  }));

  function drawStars() {
    starsCtx.clearRect(0, 0, 280, 200);
    stars.forEach(star => {
      starsCtx.fillStyle = "#7dd3fc";
      starsCtx.beginPath();
      starsCtx.arc(star.x, star.y, star.s, 0, Math.PI * 2);
      starsCtx.fill();
      star.x += star.s * 0.5;
      if (star.x > 280) star.x = 0;
    });
    requestAnimationFrame(drawStars);
  }

  drawStars();
</script>
<script>
  // Gravity Vectoring Engine bars (animated)
  const gravityCtx = document.getElementById("gravityCanvas").getContext("2d");

  function drawGravityBars() {
    gravityCtx.clearRect(0, 0, 280, 220);
    for (let i = 0; i < 5; i++) {
      const x = 40 + i * 40;
      const height = Math.random() * 100 + 60;
      gravityCtx.fillStyle = "#60a5fa";
      gravityCtx.fillRect(x, 220 - height, 20, height);
      gravityCtx.strokeStyle = "#1e40af";
      gravityCtx.strokeRect(x, 220 - height, 20, height);
    }
    requestAnimationFrame(drawGravityBars);
  }

  drawGravityBars();

  // Shield bubble animation
  const shieldCtx = document.getElementById("shieldCanvas").getContext("2d");
  let radius = 50, growing = true;

  function drawShieldBubble() {
    shieldCtx.clearRect(0, 0, 280, 160);
    shieldCtx.beginPath();
    shieldCtx.arc(140, 80, radius, 0, Math.PI * 2);
    shieldCtx.strokeStyle = "#38bdf8";
    shieldCtx.lineWidth = 3;
    shieldCtx.stroke();
    radius += growing ? 0.5 : -0.5;
    if (radius > 60 || radius < 50) growing = !growing;
    requestAnimationFrame(drawShieldBubble);
  }

  drawShieldBubble();

  // Einstein Tensor mini simulation
  const tensorCtx = document.getElementById("tensorCanvas").getContext("2d");

  function drawTensorGrid() {
    tensorCtx.clearRect(0, 0, 280, 180);
    tensorCtx.strokeStyle = "#e0e7ff";
    tensorCtx.lineWidth = 1;

    for (let y = 0; y < 180; y += 20) {
      for (let x = 0; x < 280; x += 20) {
        tensorCtx.beginPath();
        tensorCtx.arc(x, y, 3 + Math.sin(Date.now() / 300 + x * 0.05 + y * 0.1) * 2, 0, 2 * Math.PI);
        tensorCtx.stroke();
      }
    }

    requestAnimationFrame(drawTensorGrid);
  }

  drawTensorGrid();
</script>
</body>
</html>
