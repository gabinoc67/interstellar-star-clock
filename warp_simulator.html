<!DOCTYPE html>
<html>
<head>
  <title>Warp Simulator</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
      font-family: sans-serif;
      color: white;
    }

    #container {
      position: relative;
      width: 100%;
      height: 100vh;
      background-color: black;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .planet {
      position: absolute;
      transition: transform 5s ease, opacity 5s ease;
    }

    #earth {
      width: 300px;
      height: auto;
      z-index: 1;
      transform: scale(1);
      opacity: 1;
    }

    #destination {
      width: 50px;
      height: auto;
      z-index: 2;
      transform: scale(0.1);
      opacity: 0;
    }

    #status {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 20px;
      z-index: 10;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="status">Awaiting Command...</div>
    <img id="earth" class="planet" src="earth.png" />
    <img id="destination" class="planet" />
  </div>

  <script>
    const planetMap = {
      Mercury: "mercury2.png",
      Venus: "venus2.png",
      Earth: "earth.png",
      Mars: "mars.png",
      Jupiter: "jupiter.png",
      Saturn: "saturn.png",
      Uranus: "uranus.png",
      Neptune: "neptune2.png",
      Pluto: "pluto2.png"
    };

    const statusEl = document.getElementById("status");
    const earthEl = document.getElementById("earth");
    const destEl = document.getElementById("destination");

    window.addEventListener("message", (event) => {
      const data = event.data;
      if (!data || !data.type) return;

      if (data.type === "engage") {
        const { planet, warpLevel } = data;
        const imgSrc = planetMap[planet];

        if (!imgSrc) return;

        // Set destination image and reset its style
        destEl.src = imgSrc;
        destEl.style.transform = "scale(0.1)";
        destEl.style.opacity = "0";

        // Reset Earth to full size
        earthEl.style.transform = "scale(1)";
        earthEl.style.opacity = "1";

        // Update status
        statusEl.textContent = `Engaging Warp ${warpLevel} to ${planet}`;

        // Trigger animation after short delay
        setTimeout(() => {
          earthEl.style.transform = "scale(0.1)";
          earthEl.style.opacity = "0";

          destEl.style.transform = "scale(1.0)";
          destEl.style.opacity = "1";
        }, 500);
      }

      if (data.type === "reset") {
        statusEl.textContent = "Awaiting Command...";
        earthEl.style.transform = "scale(1)";
        earthEl.style.opacity = "1";

        destEl.style.transform = "scale(0.1)";
        destEl.style.opacity = "0";
        destEl.src = "";
      }
    });
  </script>
</body>
</html>
