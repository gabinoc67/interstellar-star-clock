<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Warp Drive Simulator with Clock Sync + IST Tracker</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #directionSpeedDisplay {
      display: flex;
      align-items: center;
      gap: 20px;
      font-size: 20px;
      margin: 16px;
      color: #00ffff;
    }
    #warpLoadBar {
      width: 120px;
      height: 12px;
      border: 1px solid #ccc;
      background: #222;
    }
    #warpLoadFill {
      height: 100%;
      width: 0%;
      background: green;
      transition: width .3s, background .3s;
    }
    #vectorStatus {
      font-size: 16px;
      margin-bottom: 10px;
    }
    #shipViews {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 10px;
    }
    .viewBoxContainer {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .label {
      margin-bottom: 6px;
      font-size: 16px;
      color: #00ffff;
    }
    .viewBox {
      background: url('https://upload.wikimedia.org/wikipedia/commons/4/47/StarfieldSimulation.jpg') center/cover no-repeat;
      border: 2px solid #00ffff;
      width: 400px;
      height: 300px;
      position: relative;
      overflow: hidden;
    }
    .planetImage {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.01);
      max-width: 60%;
      max-height: 60%;
      transition: transform 3s ease;
    }
    #rearEarth {
      max-width: 110%;
      max-height: 110%;
      transform: translate(-50%, -50%) scale(1);
      transition: transform 3s ease;
    }
    #controls {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    .control-row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
    }
    select, button {
      padding: 9px 18px;
      font-size: 14.4px;
      border-radius: 5px;
      border: none;
    }
    button {
      background: #00ffff;
      color: black;
      cursor: pointer;
    }
    button:hover {
      background: #00cccc;
    }
    #emergencyAbort {
      background: red;
      color: white;
      display: none;
    }
    table {
      margin-top: 20px;
      border-collapse: collapse;
      width: 90%;
      max-width: 820px;
      color: #fff;
    }
    th, td {
      border: 1px solid #444;
      padding: 6px 8px;
      text-align: center;
      font-size: 14px;
    }
    th {
      background: #222;
      color: #00ffff;
    }
    .panel {
      background: #111;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 10px;
      margin-top: 20px;
      width: 90%;
      max-width: 820px;
    }
    .panel h2 {
      color: #00ffff;
      margin-top: 0;
    }
    .panel .grid {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      font-size: 14px;
      line-height: 1.4;
    }
    .panel .grid > div {
      flex: 1;
      min-width: 180px;
      margin: 5px;
      border: 1px solid #444;
      padding: 8px;
      background: #000;
    }
  </style>
</head>
<body>

  <div id="directionSpeedDisplay">
    🚀 Speed: <span id="speedDisplay">0.00c</span> | Vector: <span id="vectorDisplay">0°</span>
    <div id="warpLoadBar"><div id="warpLoadFill"></div></div>
  </div>
  <div id="vectorStatus">🟢 Vector Status: <span id="vectorSafety">Safe</span></div>

  <div id="shipViews">
    <div class="viewBoxContainer">
      <div class="label">🔙 Rear View – Earth</div>
      <div class="viewBox">
        <img class="planetImage" id="rearEarth" src="https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/earth.png" />
      </div>
    </div>
    <div class="viewBoxContainer">
      <div class="label" id="frontLabel">🔭 Front View – Destination: Mercury</div>
      <div class="viewBox">
        <img class="planetImage" id="frontPlanet" src="https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/mercury2.png" />
      </div>
    </div>
  </div>

  <div id="controls">
    <div class="control-row">
      <label>🪐 Planet:
        <select id="planetSelect" onchange="updatePlanet()">
          <option value="mercury" selected>Mercury</option>
          <option value="venus">Venus</option>
          <option value="mars">Mars</option>
          <option value="jupiter">Jupiter</option>
          <option value="saturn">Saturn</option>
          <option value="uranus">Uranus</option>
          <option value="neptune">Neptune</option>
          <option value="pluto">Pluto</option>
        </select>
      </label>
      <label>⚡ Warp:
        <select id="warpLevelSelect">
          <option value="1" selected>Warp 1</option>
          <option value="2">Warp 2</option>
          <option value="3">Warp 3</option>
          <option value="4">Warp 4</option>
          <option value="5">Warp 5</option>
          <option value="6">Warp 6</option>
          <option value="7">Warp 7</option>
          <option value="8">Warp 8</option>
          <option value="9">Warp 9</option>
          <option value="10">Warp 10</option>
        </select>
      </label>
      <button onclick="startWarp()">🚀 Engage</button>
      <button onclick="resetWarp()">🔄 Reset</button>
      <button id="emergencyAbort" onclick="abortWarp()">🛑 Abort</button>
    </div>
  </div>

  <table>
    <thead>
      <tr><th>Clock</th><th>Status</th><th>Purpose</th><th>CST</th><th>Local</th><th>Δ (ms)</th><th>Arrival CST</th><th>Arrival IST</th></tr>
    </thead>
    <tbody id="clockBody"></tbody>
  </table>

  <div class="panel glass">
    <h2>IST Orbital Tracker (Live)</h2>
    <div class="grid" id="istGrid"></div>
  </div>

  <script>
    const planetData = {
      mercury: { age: "45.500000 Ga", orbits: "188,295,132,652", day: "88", year: "88", au: 0.39 },
      venus:   { age: "45.500000 Ga", orbits: "72,981,481,481", day: "225", year: "225", au: 0.72 },
      earth:   { age: "45.500000 Ga", orbits: "45,472,253,022", day: "196", year: "365", au: 1.0 },
      mars:    { age: "45.490000 Ga", orbits: "24,185,889,691", day: "76",  year: "686", au: 1.52 },
      jupiter: { age: "45.499000 Ga", orbits: "3,835,698,681",  day: "1686", year: "4332", au: 5.2 },
      saturn:  { age: "45.498000 Ga", orbits: "1,570,255,102",  day: "10450", year: "10759", au: 9.58 },
      uranus:  { age: "45.497000 Ga", orbits: "555,881,188",   day: "30500", year: "30685", au: 19.22 },
      neptune: { age: "45.496000 Ga", orbits: "270,408,694",   day: "60100", year: "60190", au: 30.05 },
      pluto:   { age: "45.495000 Ga", orbits: "180,734,820",   day: "76000", year: "90560", au: 39.48 }
    };

    const imageMap = {
      mercury: 'mercury2.png',
      venus: 'venus2.png',
      mars: 'mars.png',
      jupiter: 'jupiter.png',
      saturn: 'saturn.png',
      uranus: 'uranus.png',
      neptune: 'neptune2.png',
      pluto: 'pluto2.png'
    };

    const clocks = [
      { id: 'C1', label: 'Biometric', purpose: 'Crew/Local' },
      { id: 'C2', label: 'Warp Edge', purpose: 'Phase Monitor' },
      { id: 'C3', label: 'NavCore', purpose: 'Navigation' },
      { id: 'C4', label: 'CST Earth', purpose: 'Master Anchor' },
      { id: 'C5', label: 'DriftEye', purpose: 'Diagnostics' }
    ];

    let warpInterval, clockInterval;
    let warpActive = false;
    let clockStartTime = null;
    let warpLevel = 1;

    function updateISTPanel() {
      const planet = document.getElementById("planetSelect").value;
      const warpLevel = parseInt(document.getElementById("warpLevelSelect").value);
      const data = planetData[planet];
      const c = 299792;
      const au_km = 149597870.7;
      const distance = data.au * au_km;
      const warpSpeed = (warpLevel / 10) * c;
      const etaSeconds = distance / warpSpeed;
      const etaHours = (etaSeconds / 3600).toFixed(2);
      document.getElementById("istGrid").innerHTML = `
        <div><strong>Sun</strong><br>45.500000 Ga<br>45,500,000,000 y<br>16,618,875,000,000 d</div>
        <div><strong>Earth</strong><br>Orbits: 45,472,253,022<br>Progress: 53.8%<br>Day 196 / 365</div>
        <div><strong>${planet.charAt(0).toUpperCase() + planet.slice(1)}</strong><br>Age: ${data.age}<br>Orbits: ${data.orbits}<br>Day ${data.day} / ${data.year}</div>
        <div><strong>Trip</strong><br>Dist: ${data.au.toFixed(3)} AU<br>v: ${(warpSpeed / c).toFixed(2)} c<br>ETA: ${etaHours} h</div>
      `;
    }

    function updatePlanet() {
      const planet = document.getElementById("planetSelect").value;
      const label = planet.charAt(0).toUpperCase() + planet.slice(1);
      const frontPlanet = document.getElementById("frontPlanet");
      document.getElementById("frontLabel").innerText = `🔭 Front View – Destination: ${label}`;
      frontPlanet.src = `https://raw.githubusercontent.com/gabinoc67/interstellar-star-clock/main/${imageMap[planet]}`;
      frontPlanet.style.transform = "translate(-50%,-50%) scale(0.01)";
      updateISTPanel();
    }

    function formatTime(ms) {
      const d = new Date(ms);
      return `${String(d.getUTCHours()).padStart(2,'0')}:${String(d.getUTCMinutes()).padStart(2,'0')}:${String(d.getUTCSeconds()).padStart(2,'0')}.${String(d.getUTCMilliseconds()).padStart(3,'0')}`;
    }

    function updateClocks() {
      const now = new Date();
      const table = document.getElementById("clockBody");
      table.innerHTML = "";
      clocks.forEach(clock => {
        const offset = Math.random() * 10 - 5;
        const delta = offset.toFixed(2);
        const localTime = new Date(now.getTime() + offset);
        const arrival = new Date(clockStartTime + 4700000);
        let status = "✅ SYS";
        if (Math.abs(offset) > 3 && warpLevel < 8) status = "⚠️ DRIFT";
        if (warpLevel >= 8) status = "🔴 UNSAFE";
        table.innerHTML += `
          <tr>
            <td>${clock.id} • ${clock.label}</td>
            <td>${status}</td>
            <td>${clock.purpose}</td>
            <td>${formatTime(now)}</td>
            <td>${formatTime(localTime)}</td>
            <td>${delta}</td>
            <td>${formatTime(arrival)}</td>
            <td>45,500,000,000 y</td>
          </tr>`;
      });
    }

    function startWarp() {
      if (warpActive) return;
      warpActive = true;
      document.getElementById('emergencyAbort').style.display = 'inline-block';
      warpLevel = parseInt(document.getElementById("warpLevelSelect").value);
      const earth = document.getElementById("rearEarth");
      const frontPlanet = document.getElementById("frontPlanet");
      const fill = document.getElementById("warpLoadFill");
      const speedDisplay = document.getElementById("speedDisplay");
      const vectorDisplay = document.getElementById("vectorDisplay");
      earth.style.transform = "translate(-50%,-50%) scale(0)";
      frontPlanet.style.transform = "translate(-50%,-50%) scale(0.01)";
      clockStartTime = Date.now();
      updateClocks();
      clockInterval = setInterval(updateClocks, 1000);
      updateISTPanel();
      let t = 0;
      warpInterval = setInterval(() => {
        const speedFactor = Math.pow(warpLevel / 10, 3);
        const tIncrement = 5 + speedFactor * 25;
        t += tIncrement;
        const progress = Math.min(t, 100);
        const speed = (warpLevel * progress / 100).toFixed(2);
        speedDisplay.innerText = `${speed}c`;
        vectorDisplay.innerText = `${warpLevel * 10 + progress}°`;
        fill.style.width = `${progress}%`;
        fill.style.background = warpLevel >= 8 ? "orange" : "lime";
        document.getElementById("vectorSafety").innerText = warpLevel >= 8 ? "⚠️ Risk" : "Safe";
        const scale = 0.01 + 1.49 * (progress / 100);
        frontPlanet.style.transform = `translate(-50%,-50%) scale(${scale})`;
        if (progress >= 100) {
          clearInterval(warpInterval);
          clearInterval(clockInterval);
        }
      }, 100);
    }

    function resetWarp() {
      clearInterval(warpInterval);
      clearInterval(clockInterval);
      warpActive = false;
      document.getElementById("planetSelect").value = "mercury";
      document.getElementById("warpLevelSelect").value = "1";
      updatePlanet();
      document.getElementById("speedDisplay").innerText = "0.00c";
      document.getElementById("vectorDisplay").innerText = "0°";
      document.getElementById("warpLoadFill").style.width = "0%";
      document.getElementById("warpLoadFill").style.background = "green";
      document.getElementById("vectorSafety").innerText = "Safe";
      document.getElementById("rearEarth").style.transform = "translate(-50%,-50%) scale(1)";
      document.getElementById("frontPlanet").style.transform = "translate(-50%,-50%) scale(0.01)";
      document.getElementById("emergencyAbort").style.display = "none";
      document.getElementById("clockBody").innerHTML = clocks.map(c => `
        <tr>
          <td>${c.id} • ${c.label}</td><td>❌</td><td>${c.purpose}</td>
          <td>00:00:00.000</td><td>00:00:00.000</td><td>0.00</td><td>00:00:00.000</td><td>0</td>
        </tr>`).join('');
      updateISTPanel();
    }

    function abortWarp() {
      alert("⚠️ Warp aborted!");
      resetWarp();
    }

    updatePlanet();
    resetWarp();
  </script>
</body>
</html>
