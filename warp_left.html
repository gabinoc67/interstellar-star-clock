<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Warp Left Console</title>
  <style>
    body {
      margin: 0;
      background: #000;
      font-family: Arial, sans-serif;
      color: #00ffff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .data-panels {
      display: flex;
      flex-direction: column;
      gap: 14px;
      width: 95%;
      margin-top: 14px;
    }

    .panel-box {
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 10px 14px;
      color: #00ffff;
      font-size: 13.5px;
      line-height: 1.5;
      box-shadow: 0 0 4px #00ffff33;
    }

    .panel-box h3 {
      margin-top: 0;
      font-size: 16px;
      color: #00ffff;
    }

    .sub-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px 10px;
    }

    #tensorBar {
      height: 40px;
      width: 100%;
      background: linear-gradient(to right, blue, black, red);
      margin-bottom: 10px;
    }

    #trajectoryCanvas {
      width: 100%;
      height: 120px;
      background: #000;
    }

    canvas {
      border: 1px solid #333;
      background: #000;
      display: block;
      width: 100%;
      height: 120px;
    }

    .status-line {
      margin-top: 6px;
      font-size: 13px;
      color: #ccc;
      text-align: center;
    }
  </style>
</head>
<body>

<div class="data-panels">

  <!-- üîπ Einstein Tensor Mini -->
  <div class="panel-box" id="einsteinPanel">
    <h3>Einstein Tensor Mini</h3>
    <div id="tensorBar"></div>
    <div>
      GŒºŒΩ ‚âà (curvature proxies) ‚Ä¢ EM energy density used for TŒºŒΩ<br>
      (NEC/WEC/SEC OK unless gtt ‚â§ 0)
    </div>
    <hr />
    <div class="sub-grid">
      <span><strong>gtt min:</strong> <span id="gttVal">1.000000</span></span>
      <span><strong>Horizons:</strong> <span id="horizonVal">None</span></span>
      <span><strong>œÅem min:</strong> <span id="rhoMin">6.827e-17</span></span>
      <span><strong>œÅem max:</strong> <span id="rhoMax">8.825e-9</span></span>
      <span><strong>EC:</strong> ‚úÖ NEC</span>
      <span>‚úÖ WEC ‚Ä¢ <span id="secStatus">‚úÖ SEC</span></span>
    </div>
  </div>

  <!-- üîπ Gravity Vectoring Engine -->
  <div class="panel-box" id="gvePanel">
    <h3>Gravity Vectoring Engine</h3>
    <div class="sub-grid">
      <span><strong>Reactor Output:</strong> <span id="reactorMW">5000</span> MW</span>
      <span><strong>Intake Mode:</strong> Balanced (¬±)</span>
      <span><strong>Front Contraction:</strong> <span id="frontContraction">35</span>%</span>
      <span><strong>Rear Expansion:</strong> <span id="rearExpansion">65</span>%</span>
      <span><strong>Left / Right Bias:</strong> 0%</span>
      <span><strong>Up / Down Bias:</strong> 0%</span>
    </div>
    <hr />
    <div class="sub-grid">
      <span><strong>Field Coils:</strong> <span id="fieldCoils">2025</span> MW</span>
      <span><strong>Vectoring Vanes:</strong> <span id="vectorVanes">1750</span> MW</span>
      <span><strong>Containment:</strong> <span id="containment">1100</span> MW</span>
    </div>
  </div>

  <!-- üîπ Trajectory & Field Vectors -->
  <div class="panel-box">
    <h3>Trajectory & Field Vectors</h3>
    <canvas id="trajectoryCanvas" width="300" height="120"></canvas>
    <div class="status-line" id="trajectoryStatus">Rear 89% ‚Ä¢ Front 58% ‚Ä¢ LR 0% ‚Ä¢ UD 0%</div>
  </div>

</div>

<script>
  const planetAU = {
    mercury: 0.39, venus: 0.72, mars: 1.52, jupiter: 5.2,
    saturn: 9.58, uranus: 19.22, neptune: 30.05, pluto: 39.48
  };

  let warpInterval = null;

  function updatePanels(warp, au, progress) {
    // Einstein Tensor Mini
    const gtt = (1 - (warp * 0.0003) - (au * 0.0001)).toFixed(6);
    const rhoMin = (6.8e-17 + warp * 1e-17).toExponential(3);
    const rhoMax = (8.8e-9 + warp * 1e-9 + au * 2e-10).toExponential(3);
    const secFail = warp >= 9 || au >= 30;

    document.getElementById("gttVal").innerText = gtt;
    document.getElementById("rhoMin").innerText = rhoMin;
    document.getElementById("rhoMax").innerText = rhoMax;
    document.getElementById("horizonVal").innerText = gtt < 0.95 ? "Curved Field" : "None";
    document.getElementById("secStatus").innerText = secFail ? "‚ùå SEC" : "‚úÖ SEC";

    // Gravity Vectoring Engine
    const reactor = 5000 + warp * 400;
    const front = 30 + warp;
    const rear = 70 - warp;
    const coils = Math.floor(reactor * 0.405);
    const vanes = Math.floor(reactor * 0.35);
    const containment = reactor - coils - vanes;

    document.getElementById("reactorMW").innerText = reactor;
    document.getElementById("frontContraction").innerText = front;
    document.getElementById("rearExpansion").innerText = rear;
    document.getElementById("fieldCoils").innerText = coils;
    document.getElementById("vectorVanes").innerText = vanes;
    document.getElementById("containment").innerText = containment;

    // Trajectory & Field Vectors
    const canvas = document.getElementById("trajectoryCanvas");
    const ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const x1 = 40, x2 = canvas.width - 40;
    const y = canvas.height - 20;
    const cp1x = (x1 + x2) / 2;
    const cp1y = 10 + 20 * (10 - warp);

    ctx.beginPath();
    ctx.moveTo(x1, y);
    ctx.quadraticCurveTo(cp1x, cp1y, x2, y);
    ctx.strokeStyle = "red";
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = "cyan";
    ctx.beginPath();
    ctx.arc(x1, y, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText("Earth", x1 - 12, y + 14);

    ctx.fillStyle = "orange";
    ctx.beginPath();
    ctx.arc(x2, y, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText("Mars", x2 - 10, y + 14);

    document.getElementById("trajectoryStatus").innerText =
      `Rear ${rear.toFixed(0)}% ‚Ä¢ Front ${front.toFixed(0)}% ‚Ä¢ LR 0% ‚Ä¢ UD 0%`;
  }

  function resetPanels() {
    if (warpInterval) {
      clearInterval(warpInterval);
      warpInterval = null;
    }

    document.getElementById("gttVal").innerText = "1.000000";
    document.getElementById("horizonVal").innerText = "None";
    document.getElementById("rhoMin").innerText = "6.827e-17";
    document.getElementById("rhoMax").innerText = "8.825e-9";
    document.getElementById("secStatus").innerText = "‚úÖ SEC";

    document.getElementById("reactorMW").innerText = "5000";
    document.getElementById("frontContraction").innerText = "35";
    document.getElementById("rearExpansion").innerText = "65";
    document.getElementById("fieldCoils").innerText = "2025";
    document.getElementById("vectorVanes").innerText = "1750";
    document.getElementById("containment").innerText = "1100";

    const ctx = document.getElementById("trajectoryCanvas").getContext("2d");
    ctx.clearRect(0, 0, 300, 120);
    document.getElementById("trajectoryStatus").innerText =
      "Rear 89% ‚Ä¢ Front 58% ‚Ä¢ LR 0% ‚Ä¢ UD 0%";
  }

  window.addEventListener("message", (event) => {
    const { action, warp, planet } = event.data;
    if (action === "engage" && warp && planet) {
      const au = planetAU[planet.toLowerCase()] || 1.5;
      let t = 0;
      if (warpInterval) clearInterval(warpInterval);
      warpInterval = setInterval(() => {
        t += 5 + Math.pow(warp / 10, 3) * 20;
        if (t >= 100) {
          t = 100;
          clearInterval(warpInterval);
          warpInterval = null;
        }
        updatePanels(warp, au, t);
      }, 100);
    }
    if (action === "reset") {
      resetPanels();
    }
  });

  resetPanels();
</script>
</body>
</html>
