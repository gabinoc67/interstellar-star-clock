<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Warp Left Console</title>
  <style>
    body {
      margin: 0;
      background: #000;
      font-family: Arial, sans-serif;
      color: #00ffff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .data-panels {
      display: flex;
      flex-direction: column;
      gap: 14px;
      width: 95%;
      margin-top: 14px;
    }

    .panel-box {
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 10px 14px;
      color: #00ffff;
      font-size: 13.5px;
      line-height: 1.5;
      box-shadow: 0 0 4px #00ffff33;
    }

    .panel-box h3 {
      margin-top: 0;
      font-size: 16px;
      color: #00ffff;
    }

    .sub-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px 10px;
    }

    .sub-grid span {
      display: block;
    }

    hr {
      border: none;
      border-top: 1px solid #333;
      margin: 10px 0;
    }
  </style>
</head>
<body>

  <!-- Dynamic Panels -->
  <div class="data-panels">

    <!-- üîπ Einstein Tensor Mini -->
    <div class="panel-box" id="einsteinPanel">
      <h3>Einstein Tensor Mini</h3>
      <div>
        GŒºŒΩ ‚âà (curvature proxies) ‚Ä¢ EM energy density used for TŒºŒΩ<br>
        (NEC/WEC/SEC OK unless gtt ‚â§ 0)
      </div>
      <hr />
      <div class="sub-grid">
        <span><strong>gtt min:</strong> <span id="gttVal">1.000000</span></span>
        <span><strong>Horizons:</strong> <span id="horizonVal">None</span></span>
        <span><strong>œÅem min:</strong> <span id="rhoMin">6.827e-17</span></span>
        <span><strong>œÅem max:</strong> <span id="rhoMax">8.825e-9</span></span>
        <span><strong>EC:</strong> ‚úÖ NEC</span>
        <span>‚úÖ WEC ‚Ä¢ <span id="secStatus">‚úÖ SEC</span></span>
      </div>
    </div>

    <!-- üîπ Gravity Vectoring Engine -->
    <div class="panel-box" id="gvePanel">
      <h3>Gravity Vectoring Engine</h3>
      <div class="sub-grid">
        <span><strong>Reactor Output:</strong> <span id="reactorMW">5000</span> MW</span>
        <span><strong>Intake Mode:</strong> Balanced (¬±)</span>
        <span><strong>Front Contraction:</strong> <span id="frontContraction">35</span>%</span>
        <span><strong>Rear Expansion:</strong> <span id="rearExpansion">65</span>%</span>
        <span><strong>Left / Right Bias:</strong> 0%</span>
        <span><strong>Up / Down Bias:</strong> 0%</span>
      </div>
      <hr />
      <div class="sub-grid">
        <span><strong>Field Coils:</strong> <span id="fieldCoils">2025</span> MW</span>
        <span><strong>Vectoring Vanes:</strong> <span id="vectorVanes">1750</span> MW</span>
        <span><strong>Containment:</strong> <span id="containment">1100</span> MW</span>
      </div>
    </div>

  </div>

  <script>
    const planetAU = {
      mercury: 0.39,
      venus: 0.72,
      mars: 1.52,
      jupiter: 5.2,
      saturn: 9.58,
      uranus: 19.22,
      neptune: 30.05,
      pluto: 39.48
    };

    let warpInterval = null;

    function updatePanels(warp, au, progress) {
      // Einstein Tensor Mini logic
      let gtt = (1 - (warp * 0.0003) - (au * 0.0001)).toFixed(6);
      if (gtt < 0.95) gtt = "0.942000";

      const rhoMin = (6.8e-17 + warp * 1e-17).toExponential(3);
      const rhoMax = (8.8e-9 + warp * 1e-9 + au * 2e-10).toExponential(3);
      const secFail = warp >= 9 || au >= 30;

      document.getElementById("gttVal").innerText = gtt;
      document.getElementById("rhoMin").innerText = rhoMin;
      document.getElementById("rhoMax").innerText = rhoMax;
      document.getElementById("horizonVal").innerText = gtt < 0.95 ? "Curved Field" : "None";
      document.getElementById("secStatus").innerText = secFail ? "‚ùå SEC" : "‚úÖ SEC";

      // Gravity Vectoring Engine
      const reactor = 5000 + warp * 400;
      const front = 30 + warp;
      const rear = 70 - warp;
      const coils = Math.floor(reactor * 0.405);
      const vanes = Math.floor(reactor * 0.35);
      const containment = reactor - coils - vanes;

      document.getElementById("reactorMW").innerText = reactor;
      document.getElementById("frontContraction").innerText = front;
      document.getElementById("rearExpansion").innerText = rear;
      document.getElementById("fieldCoils").innerText = coils;
      document.getElementById("vectorVanes").innerText = vanes;
      document.getElementById("containment").innerText = containment;
    }

    function resetPanels() {
      if (warpInterval) {
        clearInterval(warpInterval);
        warpInterval = null;
      }

      document.getElementById("gttVal").innerText = "1.000000";
      document.getElementById("horizonVal").innerText = "None";
      document.getElementById("rhoMin").innerText = "6.827e-17";
      document.getElementById("rhoMax").innerText = "8.825e-9";
      document.getElementById("secStatus").innerText = "‚úÖ SEC";

      document.getElementById("reactorMW").innerText = "5000";
      document.getElementById("frontContraction").innerText = "35";
      document.getElementById("rearExpansion").innerText = "65";
      document.getElementById("fieldCoils").innerText = "2025";
      document.getElementById("vectorVanes").innerText = "1750";
      document.getElementById("containment").innerText = "1100";
    }

    // Receive warp events from warp_simulator.html
    window.addEventListener("message", (event) => {
      const { action, warp, planet } = event.data;

      if (action === "engage" && warp && planet) {
        const au = planetAU[planet];
        let t = 0;
        if (warpInterval) clearInterval(warpInterval);

        warpInterval = setInterval(() => {
          t += 5 + Math.pow(warp / 10, 3) * 20;
          if (t >= 100) {
            t = 100;
            clearInterval(warpInterval);
            warpInterval = null;
          }
          updatePanels(warp, au, t);
        }, 100);
      }

      if (action === "reset") {
        resetPanels();
      }
    });

    // Initialize
    resetPanels();
  </script>

</body>
</html>
