<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>ü™ê Interstellar Star Clock ‚Äî Solar System + Planet Clocks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{ --fg:#00ffcc; --gap: clamp(10px, 2vmin, 22px); --pad: clamp(10px, 2vmin, 18px); }
    *{ box-sizing: border-box; }
    body{
      background:#000; color:var(--fg); font-family:'Courier New', monospace;
      margin:0; min-height:100vh; display:flex; justify-content:center; padding: var(--pad);
    }
    .wrap{
      display:grid;
      grid-template-columns: minmax(360px, 1.25fr) minmax(360px, 1fr) minmax(240px, .85fr);
      gap: var(--gap);
      max-width: min(1400px, 98vw);
      width:100%;
      align-items:start;
    }
    header{
      grid-column: 1 / -1; display:flex; justify-content:space-between; align-items:center; gap: var(--gap);
    }
    h1{ margin:0; font-size: clamp(0.75rem, 1.8vw, 1.2rem); line-height:1.12; letter-spacing:.4px; }
    .controls{ display:flex; align-items:center; gap:.5rem; font-size: clamp(.8rem, 1.4vw, .95rem); }
    select{
      background:#001a16; color:var(--fg); border:1px solid #064e3b; padding:.25rem .45rem; border-radius:6px;
    }

    .solar { display:flex; justify-content:center; align-items:center; }
    canvas{ width:100%; max-width:680px; aspect-ratio:1 / 1; background:#000; border:1px solid #064e3b; border-radius:10px; }

    .content{ text-align:center; padding: var(--pad); }
    h2{ margin:.2rem 0 .35rem; font-size: clamp(.9rem, 1.7vw, 1.2rem); }
    .clock-box{ margin-top: .7rem; font-size: clamp(.8rem, 1.3vw, 1.05rem); }
    .muted{ opacity:.85; font-size:.95em; }

    .planet-image{ display:flex; justify-content:center; align-items:center; }
    .planet-image img{ width:min(26vw, 42vh, 340px); height:auto; display:block; }

    @media (max-width: 1100px){
      .wrap{
        grid-template-columns: 1fr;
      }
      .planet-image img{ width:min(60vw, 48vh, 340px); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ü™ê Interstellar Star Clock ‚Äî Solar System (live) + <span id="titlePlanet">Earth</span> Clocks</h1>
      <div class="controls">
        <label for="planet">Planet:</label>
        <select id="planet">
          <option>Mercury</option><option>Venus</option><option selected>Earth</option>
          <option>Mars</option><option>Jupiter</option><option>Saturn</option>
          <option>Uranus</option><option>Neptune</option><option>Pluto</option>
        </select>
      </div>
    </header>

    <div class="solar">
      <canvas id="solarCanvas"></canvas>
    </div>

    <div class="content">
      <div class="clock-box">
        <h2>üåç Local Time (America/Chicago)</h2>
        <div id="localClock"></div>
      </div>

      <div class="clock-box">
        <h2>üåå Interstellar Time</h2>
        <div id="interstellarClock" class="muted"></div>
      </div>

      <div class="clock-box">
        <h2>üöÄ Stardate</h2>
        <div id="starDate" class="muted"></div>
      </div>

      <div class="clock-box">
        <h2>üìè Distance from Sun</h2>
        <div id="distanceFromSun"></div>
        <div id="distanceAU" class="muted"></div>
      </div>

      <div class="clock-box">
        <h2>üìê Distance from Earth</h2>
        <div id="distanceFromEarth"></div>
        <div id="distanceEarthAU" class="muted"></div>
      </div>

      <div class="clock-box">
        <h2>üî≠ Orbital Position</h2>
        <div id="trueAnomaly"></div>
      </div>

      <div class="clock-box">
        <h2>üïõ Orbit Clock (since perihelion)</h2>
        <div id="orbitSince"></div>
        <div id="orbitRemaining"></div>
        <div id="orbitPercent"></div>
        <div id="orbitDetails" class="muted"></div>
      </div>
    </div>

    <div class="planet-image">
      <img id="planetImg" alt="Planet image">
    </div>
  </div>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const DEG2RAD = Math.PI / 180;

    // === Planet orbital elements (simplified, J2000) ===
    const PLANETS = {
      Mercury:{aAU:0.39, e:0.205, i:7, L:252.25, wbar:77.46, Omega:48.33, color:"#aaa"},
      Venus:  {aAU:0.72, e:0.0067, i:3.39, L:181.98, wbar:131.53, Omega:76.68, color:"#f5e050"},
      Earth:  {aAU:1.00, e:0.0167, i:0, L:100.46, wbar:102.93, Omega:0, color:"#4fc3f7"},
      Mars:   {aAU:1.52, e:0.0934, i:1.85, L:355.43, wbar:336.04, Omega:49.56, color:"#f08080"},
      Jupiter:{aAU:5.20, e:0.0489, i:1.3, L:34.4, wbar:14.33, Omega:100.56, color:"#ffcc80"},
      Saturn: {aAU:9.54, e:0.0565, i:2.49, L:49.9, wbar:92.43, Omega:113.7, color:"#f5deb3"},
      Uranus: {aAU:19.2, e:0.0472, i:0.77, L:313.2, wbar:170.95, Omega:74.0, color:"#80deea"},
      Neptune:{aAU:30.1, e:0.0086, i:1.77, L:304.9, wbar:44.97, Omega:131.8, color:"#7ec8e3"},
      Pluto:  {aAU:39.5, e:0.249, i:17.1, L:238.9, wbar:224.1, Omega:110.3, color:"#ddd"}
    };

    // Julian Date
    function toJulianDate(date){
      return date.getTime() / 86400000 + 2440587.5;
    }

    // Solve Kepler's equation
    function kepler(M, e){
      let E = M;
      for(let i=0;i<5;i++) E = M + e*Math.sin(E);
      return E;
    }

    // Orbit state vectors (heliocentric x,y in AU)
    function orbitState(name, date){
      const el = PLANETS[name];
      const jd = toJulianDate(date);
      const T = (jd - 2451545.0)/36525;
      const a = el.aAU, e = el.e;
      const L = (el.L + 36000*T)%360 * DEG2RAD;
      const wbar = el.wbar * DEG2RAD;
      const M = (L - wbar + 2*Math.PI)%(2*Math.PI);
      const E = kepler(M,e);
      const nu = 2*Math.atan2(Math.sqrt(1+e)*Math.sin(E/2), Math.sqrt(1-e)*Math.cos(E/2));
      const r = a*(1 - e*Math.cos(E));
      const x = r*Math.cos(nu);
      const y = r*Math.sin(nu);
      return {x,y,rAU:r,nuDeg:nu/DEG2RAD,aAU:a};
    }

    // === Solar System Canvas ===
    const solarCanvas = document.getElementById("solarCanvas");
    const sctx = solarCanvas.getContext("2d");
    function resizeSolar(){ solarCanvas.width=solarCanvas.clientWidth; solarCanvas.height=solarCanvas.clientHeight; }

    function drawSolar(){
      const now = new Date();
      resizeSolar();
      const w = solarCanvas.clientWidth, h = solarCanvas.clientHeight;
      const cx = w/2, cy = h/2;

      const names = Object.keys(PLANETS);
      const states = names.map(n => ({ name:n, st: orbitState(n, now) }));
      const maxR_AU = Math.max(...states.map(o => Math.hypot(o.st.x,o.st.y)));
      const Rpx = Math.min(cx, cy) * 0.88;

      const R_BREAK_AU = 6;
      const R_INNER_PCT = 0.70;
      const R_INNER_PX = Rpx * R_INNER_PCT;
      const R_OUTER_PX = Rpx - R_INNER_PX;
      const OUTER_SPAN_AU = Math.max(0.0001, maxR_AU - R_BREAK_AU);

      function radiusPx(rAU){
        if(rAU <= 2) return Math.min(R_INNER_PX,(rAU/2)*(R_INNER_PX*1.5));
        if(rAU <= R_BREAK_AU) return (rAU/R_BREAK_AU)*R_INNER_PX;
        return R_INNER_PX+((rAU-R_BREAK_AU)/OUTER_SPAN_AU)*R_OUTER_PX;
      }

      sctx.clearRect(0,0,w,h);

      // Sun
      sctx.beginPath();
      sctx.arc(cx, cy, 6, 0, Math.PI*2);
      sctx.fillStyle = "#ffd27f";
      sctx.fill();

      // Planets
      for(const {name, st} of states){
        const color = PLANETS[name].color;
        const r = radiusPx(Math.hypot(st.x,st.y));
        const ang = Math.atan2(st.y,st.x);
        const x = cx + r*Math.cos(ang);
        const y = cy + r*Math.sin(ang);

        const dotR = (st.aAU<2?4.2:(st.aAU<6?3.8:3.2));
        sctx.beginPath();
        sctx.arc(x,y,dotR,0,Math.PI*2);
        sctx.fillStyle=color;
        sctx.fill();
        sctx.fillStyle=color;
        sctx.fillText(name,x+10,y);
      }
    }

    // === Clocks & Info ===
    const planetSel=document.getElementById("planet"), titlePlanet=document.getElementById("titlePlanet"), planetImg=document.getElementById("planetImg");

    function updateClocks(){
      const now=new Date();
      document.getElementById("localClock").textContent=now.toLocaleString("en-US",{timeZone:"America/Chicago"});
      document.getElementById("interstellarClock").textContent="JD "+toJulianDate(now).toFixed(5);
      document.getElementById("starDate").textContent=(40000+ (now.getTime()/86400000)).toFixed(2);

      const pname=planetSel.value, st=orbitState(pname,now);
      document.getElementById("distanceFromSun").textContent=(st.rAU*149597870).toFixed(0)+" km";
      document.getElementById("distanceAU").textContent=st.rAU.toFixed(6)+" AU";
      document.getElementById("trueAnomaly").textContent=st.nuDeg.toFixed(3)+"¬∞";

      document.getElementById("orbitSince").textContent="Since perihelion: "+(st.nuDeg/360*100).toFixed(1)+"%";
      document.getElementById("orbitRemaining").textContent="Remaining: "+(100-st.nuDeg/360*100).toFixed(1)+"%";
      document.getElementById("orbitPercent").textContent="Completed "+(st.nuDeg/360*100).toFixed(1)+"%";

      planetImg.src="https://planetarynames.wr.usgs.gov/images/"+pname.toLowerCase()+".jpg";
      titlePlanet.textContent=pname;
    }

    planetSel.addEventListener("change",updateClocks);
    setInterval(drawSolar,1000);
    setInterval(updateClocks,1000);
  });
  </script>
</body>
</html>
