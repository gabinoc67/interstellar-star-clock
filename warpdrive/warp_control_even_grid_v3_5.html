<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>ü™ê Solar System ‚Äî Live Orbital Positions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      background: #000;
      color: #00ffcc;
      font-family: "Courier New", monospace;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 20px;
      padding: 20px;
      min-height: 100vh;
    }
    /* Main layout: Solar system (big) + side info */
    .wrap {
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 20px;
      width: 100%;
      max-width: 1600px;
      align-items: start;
    }
    canvas {
      width: 100%;
      max-width: 950px;
      aspect-ratio: 1/1;
      background: #000;
      border: 1px solid #064e3b;
      border-radius: 12px;
    }
    .info {
      background: #001a16;
      border: 1px solid #064e3b;
      padding: 14px;
      border-radius: 10px;
      font-size: 0.95rem;
      line-height: 1.45;
    }
    .info h2 {
      font-size: 1.05rem;
      margin: 0 0 10px;
      color: #0ff;
    }
    .planet-line {
      margin: 4px 0;
      display: flex;
      justify-content: space-between;
      border-bottom: 1px dotted #033;
      padding-bottom: 2px;
    }
    .planet-name {
      font-weight: bold;
      color: #0ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="solarCanvas"></canvas>
    <div class="info">
      <h2>üåå Current Orbital Positions</h2>
      <div id="planetData"></div>
    </div>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", function(){
    const DEG2RAD = Math.PI / 180, RAD2DEG = 180 / Math.PI;
    const AU_TO_MILES = 92955807.3;

    function norm360(x){ x = x % 360; return x < 0 ? x + 360 : x; }
    function norm2pi(x){ x = x % (2*Math.PI); return x < 0 ? x + 2*Math.PI : x; }

    function toJulianDate(dateUTC) {
      const a = Math.floor((14 - (dateUTC.getUTCMonth()+1)) / 12);
      const y = dateUTC.getUTCFullYear() + 4800 - a;
      const m = (dateUTC.getUTCMonth()+1) + 12*a - 3;
      const JDN = dateUTC.getUTCDate()
        + Math.floor((153*m + 2)/5)
        + 365*y + Math.floor(y/4) - Math.floor(y/100) + Math.floor(y/400) - 32045;
      const dayFrac = (dateUTC.getUTCHours() - 12)/24
        + dateUTC.getUTCMinutes()/1440 + dateUTC.getUTCSeconds()/86400;
      return JDN + dayFrac;
    }

    // Orbital elements
    const PLANETS = {
      Mercury:{ a:0.38709893, da:0.00000066, e:0.20563069, de:0.00002527,
        L:252.25084, dL:149472.67411175, varpi:77.45645, dvarpi:0.16047689,
        Omega:48.33167, dOmega:0.159400, i:7.00487, di:-0.005951,
        P:87.9691, color:"#9ad"},
      Venus:{ a:0.72333199, da:0.00000092, e:0.00677323, de:-0.00004938,
        L:181.97973, dL:58517.81538729, varpi:131.56370, dvarpi:0.0020708,
        Omega:76.68069, dOmega:-0.272741, i:3.39471, di:-0.000789,
        P:224.701, color:"#f7c"},
      Earth:{ a:1.00000011, da:-0.00000005, e:0.01671022, de:-0.00003804,
        L:100.46435, dL:35999.37285429, varpi:102.93735, dvarpi:0.32327364,
        Omega:-11.26064, dOmega:-0.003417, i:0.00005, di:-0.013371,
        P:365.256363004, color:"#0fc"},
      Mars:{ a:1.52366231, da:-0.00007221, e:0.09341233, de:0.00011902,
        L:-4.553432, dL:19140.30268499, varpi:-23.943629, dvarpi:0.44441088,
        Omega:49.57854, dOmega:0.772092, i:1.85061, di:-0.008473,
        P:686.971, color:"#f66"},
      Jupiter:{ a:5.20336301, da:0.00060737, e:0.04839266, de:-0.00012880,
        L:34.351484, dL:3034.90567464, varpi:14.331309, dvarpi:0.2155525,
        Omega:100.55615, dOmega:0.204691, i:1.30530, di:-0.001837,
        P:4332.59, color:"#ffb"},
      Saturn:{ a:9.53707032, da:-0.00301530, e:0.05415060, de:-0.00036762,
        L:50.077471, dL:1222.11379404, varpi:93.057237, dvarpi:0.5665415,
        Omega:113.71504, dOmega:-0.208741, i:2.48446, di:0.002043,
        P:10759.22, color:"#fb9"},
      Uranus:{ a:19.19126393, da:0.00152025, e:0.04716771, de:-0.00019150,
        L:314.055005, dL:428.46699831, varpi:173.005159, dvarpi:0.1686465,
        Omega:74.22988, dOmega:-0.204, i:0.76986, di:-0.000,
        P:30688.5, color:"#9ff"},
      Neptune:{ a:30.06896348, da:-0.00125196, e:0.00858587, de:0.00002510,
        L:304.348665, dL:218.48620020, varpi:48.123691, dvarpi:0.0259423,
        Omega:131.72169, dOmega:1.180, i:1.76917, di:-0.000,
        P:60182, color:"#9bf"},
      Pluto:{ a:39.48168677, da:-0.00076912, e:0.24880766, de:0.00006465,
        L:238.92881, dL:145.20780515, varpi:224.06676, dvarpi:-0.04062942,
        Omega:110.30347, dOmega:-0.011, i:17.14175, di:0.000,
        P:90560, color:"#ddd"}
    };

    // Kepler solver
    function solveKeplerElliptic(M, e) {
      let E = (e < 0.8) ? M : Math.PI;
      for (let i=0;i<20;i++){
        const f = E - e*Math.sin(E) - M;
        const f1 = 1 - e*Math.cos(E);
        const dE = -f/f1;
        E += dE;
        if (Math.abs(dE) < 1e-12) break;
      }
      return E;
    }

    function orbitState(name, dateUTC){
      const p = PLANETS[name];
      const JD = toJulianDate(dateUTC);
      const T = (JD - 2451545.0) / 36525.0;

      const a = p.a + p.da*T;
      const e = p.e + p.de*T;
      const L = p.L + p.dL*T;
      const varpi = p.varpi + p.dvarpi*T;
      const Omega = p.Omega + p.dOmega*T;
      const i = (p.i + (p.di||0)*T) * DEG2RAD;

      const Mdeg = norm360(L - varpi);
      const M = Mdeg * DEG2RAD;
      const E = solveKeplerElliptic(M,e);
      const rAU = a * (1 - e*Math.cos(E));
      const nu = 2*Math.atan2(Math.sqrt(1+e)*Math.sin(E/2), Math.sqrt(1-e)*Math.cos(E/2));
      const nudeg = norm2pi(nu)*RAD2DEG;

      const Œ© = Omega*DEG2RAD, œâ = norm360(varpi-Omega)*DEG2RAD;
      const u = œâ+nu;
      const cosŒ©=Math.cos(Œ©), sinŒ©=Math.sin(Œ©), cosi=Math.cos(i);
      const x = rAU*(cosŒ©*Math.cos(u)-sinŒ©*Math.sin(u)*cosi);
      const y = rAU*(sinŒ©*Math.cos(u)+cosŒ©*Math.sin(u)*cosi);

      return {x,y,rAU,nudeg,color:p.color};
    }

    // Canvas
    const canvas=document.getElementById("solarCanvas"), ctx=canvas.getContext("2d");

    function resize(){ const rect=canvas.getBoundingClientRect();
      const ratio=window.devicePixelRatio||1;
      canvas.width=rect.width*ratio; canvas.height=rect.height*ratio;
      ctx.setTransform(ratio,0,0,ratio,0,0);
    }

    function draw(){
      resize();
      const w=canvas.clientWidth,h=canvas.clientHeight;
      const cx=w/2,cy=h/2;
      const now=new Date();

      const states={};
      for(const name in PLANETS){ states[name]=orbitState(name,now); }

      const maxR=Math.max(...Object.values(states).map(s=>Math.hypot(s.x,s.y)));
      const Rpx=Math.min(cx,cy)*0.9;
      function radiusPx(rAU){ return (rAU/maxR)*Rpx; }

      ctx.clearRect(0,0,w,h);

      // Degree circle
      ctx.strokeStyle="rgba(255,255,255,0.3)";
      for(let deg=0;deg<360;deg+=10){
        const rad=deg*DEG2RAD;
        const x1=cx+(Rpx-10)*Math.cos(rad),y1=cy+(Rpx-10)*Math.sin(rad);
        const x2=cx+Rpx*Math.cos(rad),y2=cy+Rpx*Math.sin(rad);
        ctx.beginPath(); ctx.moveTo(x1,y1); ctx.lineTo(x2,y2); ctx.stroke();
        if(deg%30===0){
          ctx.fillStyle="#ccc"; ctx.font="10px Courier New";
          ctx.fillText(`${deg}¬∞`,cx+(Rpx-20)*Math.cos(rad)-8,cy+(Rpx-20)*Math.sin(rad)+4);
        }
      }

      // AU rings
      ctx.strokeStyle="rgba(255,255,255,0.15)";
      for(let au=1;au<maxR;au*=2){
        const r=radiusPx(au);
        ctx.beginPath(); ctx.arc(cx,cy,r,0,2*Math.PI); ctx.stroke();
        ctx.fillStyle="#aaa"; ctx.font="11px Courier New";
        ctx.fillText(`${au.toFixed(1)} AU`,cx+r+6,cy+3);
      }

      // Sun
      ctx.beginPath(); ctx.arc(cx,cy,6,0,2*Math.PI);
      ctx.fillStyle="#ffd27f"; ctx.fill();

      // Planets
      ctx.font="11px Courier New";
      for(const name in states){
        const st=states[name];
        const ang=Math.atan2(st.y,st.x);
        const r=radiusPx(Math.hypot(st.x,st.y));
        const x=cx+r*Math.cos(ang), y=cy+r*Math.sin(ang);

        ctx.beginPath(); ctx.arc(x,y,4,0,2*Math.PI);
        ctx.fillStyle=st.color; ctx.fill();

        ctx.fillStyle=st.color;
        ctx.fillText(name,x+8,y);
      }

      // Update side panel
      const panel=document.getElementById("planetData");
      panel.innerHTML="";
      for(const name of Object.keys(PLANETS)){
        const st=states[name];
        const line=document.createElement("div");
        line.className="planet-line";
        line.innerHTML=`<span class="planet-name">${name}</span>
                        <span>${st.nudeg.toFixed(4)}¬∞</span>`;
        panel.appendChild(line);
      }
    }

    setInterval(draw,1000);
    window.addEventListener("resize",draw);
    draw();
  });
  </script>
</body>
</html>
