<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>ü™ê Solar System ‚Äî Live Orbital Positions (Log Scale)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      background: #000;
      color: #00ffcc;
      font-family: "Courier New", monospace;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 20px;
      padding: 20px;
      min-height: 100vh;
    }
    .wrap {
      display: grid;
      grid-template-columns: 1fr 280px;
      gap: 20px;
      width: 100%;
      max-width: 1600px;
      align-items: start;
    }
    canvas {
      width: 100%;
      max-width: 950px;
      aspect-ratio: 1/1;
      background: #000;
      border: 1px solid #064e3b;
      border-radius: 12px;
    }
    .info {
      background: #001a16;
      border: 1px solid #064e3b;
      padding: 14px;
      border-radius: 10px;
      font-size: 0.95rem;
      line-height: 1.45;
    }
    .info h2 {
      font-size: 1.05rem;
      margin: 0 0 10px;
      color: #0ff;
    }
    .planet-line {
      margin: 4px 0;
      display: flex;
      justify-content: space-between;
      border-bottom: 1px dotted #033;
      padding-bottom: 2px;
    }
    .planet-name {
      font-weight: bold;
      color: #0ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="solarCanvas"></canvas>
    <div class="info">
      <h2>üåå Current Orbital Positions</h2>
      <div id="planetData"></div>
    </div>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", function(){
    const DEG2RAD = Math.PI / 180, RAD2DEG = 180 / Math.PI;

    function norm360(x){ x = x % 360; return x < 0 ? x + 360 : x; }
    function norm2pi(x){ x = x % (2*Math.PI); return x < 0 ? x + 2*Math.PI : x; }

    function toJulianDate(dateUTC) {
      const a = Math.floor((14 - (dateUTC.getUTCMonth()+1)) / 12);
      const y = dateUTC.getUTCFullYear() + 4800 - a;
      const m = (dateUTC.getUTCMonth()+1) + 12*a - 3;
      const JDN = dateUTC.getUTCDate()
        + Math.floor((153*m + 2)/5)
        + 365*y + Math.floor(y/4) - Math.floor(y/100) + Math.floor(y/400) - 32045;
      const dayFrac = (dateUTC.getUTCHours() - 12)/24
        + dateUTC.getUTCMinutes()/1440 + dateUTC.getUTCSeconds()/86400;
      return JDN + dayFrac;
    }

    // Orbital elements (shortened for brevity, same as before)
    const PLANETS = {
      Mercury:{a:0.387,e:0.206,P:88,color:"#9ad"},
      Venus:{a:0.723,e:0.007,P:225,color:"#f7c"},
      Earth:{a:1.000,e:0.017,P:365,color:"#0fc"},
      Mars:{a:1.524,e:0.093,P:687,color:"#f66"},
      Jupiter:{a:5.203,e:0.049,P:4332,color:"#ffb"},
      Saturn:{a:9.537,e:0.054,P:10759,color:"#fb9"},
      Uranus:{a:19.191,e:0.047,P:30688,color:"#9ff"},
      Neptune:{a:30.07,e:0.009,P:60182,color:"#9bf"},
      Pluto:{a:39.482,e:0.249,P:90560,color:"#ddd"}
    };

    // Solve Kepler's Equation
    function solveKepler(M,e){let E=M;for(let i=0;i<10;i++)E=M+e*Math.sin(E);return E;}

    function orbitState(name,dateUTC){
      const p=PLANETS[name],JD=toJulianDate(dateUTC),n=2*Math.PI/p.P;
      const M=n*(JD%p.P),E=solveKepler(M,p.e);
      const nu=2*Math.atan2(Math.sqrt(1+p.e)*Math.sin(E/2),Math.sqrt(1-p.e)*Math.cos(E/2));
      const r=p.a*(1-p.e*Math.cos(E));
      const x=r*Math.cos(nu),y=r*Math.sin(nu);
      return {x,y,rAU:r,nudeg:norm2pi(nu)*RAD2DEG,color:p.color};
    }

    const canvas=document.getElementById("solarCanvas"),ctx=canvas.getContext("2d");

    function resize(){const rect=canvas.getBoundingClientRect();
      const ratio=window.devicePixelRatio||1;
      canvas.width=rect.width*ratio; canvas.height=rect.height*ratio;
      ctx.setTransform(ratio,0,0,ratio,0,0);
    }

    // Log scale so inner planets expand and outer compress
    function logScale(rAU,maxAU,Rpx){ return Math.log(1+rAU)/Math.log(1+maxAU)*Rpx; }

    function draw(){
      resize();
      const w=canvas.clientWidth,h=canvas.clientHeight;
      const cx=w/2,cy=h/2;
      const now=new Date();

      const states={};
      for(const name in PLANETS){ states[name]=orbitState(name,now); }

      const maxR=Math.max(...Object.values(states).map(s=>Math.hypot(s.x,s.y)));
      const Rpx=Math.min(cx,cy)*0.9;

      ctx.clearRect(0,0,w,h);

      // Degree grid every 20¬∞
      ctx.strokeStyle="rgba(255,255,255,0.3)";
      for(let deg=0;deg<360;deg+=20){
        const rad=deg*DEG2RAD;
        const x2=cx+Rpx*Math.cos(rad),y2=cy+Rpx*Math.sin(rad);
        ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(x2,y2); ctx.stroke();
        ctx.fillStyle="#ccc"; ctx.font="11px Courier New";
        ctx.fillText(`${deg}¬∞`,cx+(Rpx+12)*Math.cos(rad)-10,cy+(Rpx+12)*Math.sin(rad)+4);
      }

      // Sun
      ctx.beginPath(); ctx.arc(cx,cy,6,0,2*Math.PI);
      ctx.fillStyle="#ffd27f"; ctx.fill();

      // Planets
      ctx.font="11px Courier New";
      for(const name in states){
        const st=states[name];
        const r=logScale(Math.hypot(st.x,st.y),maxR,Rpx);
        const ang=Math.atan2(st.y,st.x);
        const x=cx+r*Math.cos(ang), y=cy+r*Math.sin(ang);

        ctx.beginPath(); ctx.arc(x,y,4,0,2*Math.PI);
        ctx.fillStyle=st.color; ctx.fill();

        ctx.fillStyle=st.color;
        ctx.fillText(name,x+8,y);
      }

      // Update side panel
      const panel=document.getElementById("planetData");
      panel.innerHTML="";
      for(const name of Object.keys(PLANETS)){
        const st=states[name];
        const line=document.createElement("div");
        line.className="planet-line";
        line.innerHTML=`<span class="planet-name">${name}</span>
                        <span>${st.nudeg.toFixed(4)}¬∞</span>`;
        panel.appendChild(line);
      }
    }

    setInterval(draw,1000);
    window.addEventListener("resize",draw);
    draw();
  });
  </script>
</body>
</html>
