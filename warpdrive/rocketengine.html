<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Warp Drive Engine Animation â€” Blueprint Overlay</title>
<style>
  :root{
    --bg:#05070d; --line:#07afff; --fusion:#ff3b30; --nuclear:#ffd400;
    --packet:#00e5ff; --exhaust:#ff8a00;
  }
  body{margin:0;background:#000;display:flex;justify-content:center;align-items:center;height:100vh;}
  #stage{position:relative;width:95%;max-width:1100px;aspect-ratio:8/1;
         border:1px solid #172743;border-radius:18px;overflow:hidden;
         background:url("ScreenHunter 80.png") no-repeat center/contain #000;}
  svg{position:absolute;top:0;left:0;width:100%;height:100%;}
  .shell{stroke:var(--line);stroke-width:3;fill:none}
  .nuclear{fill:var(--nuclear)}
  .fusion-glow{fill:var(--fusion);opacity:0}
  .loop{stroke:#17d4ff;stroke-width:4;fill:none;opacity:.6}
  .packet{fill:var(--packet)}
  .wave{stroke:#7ff;stroke-width:6;fill:none;opacity:0}
  .exhaustPulse{fill:var(--exhaust);opacity:0}
  #phaseLabel{position:absolute;right:10px;bottom:8px;background:#0e203ecc;
              color:#fff;font:12px monospace;padding:4px 8px;border-radius:8px}
</style>
</head>
<body>
<div id="stage">
  <svg viewBox="0 0 1100 140">
    <!-- Nuclear core -->
    <circle id="nuclear" class="nuclear" cx="120" cy="70" r="16"/>
    <!-- Fusion bars -->
    <g id="fusionBars" transform="translate(260,52)">
      <!-- bars generated with JS -->
    </g>
    <!-- Coolant loops -->
    <path id="loopTop" class="loop"
          d="M610,34 C720,8 860,10 1010,34 1065,42 1065,98 1010,106 860,130 720,132 610,106 560,96 560,44 610,34 Z"/>
    <path id="loopBottom" class="loop"
          d="M610,106 C500,132 360,130 210,106 155,98 155,42 210,34 360,10 500,8 610,34 660,44 660,96 610,106 Z"/>
    <!-- Wave -->
    <path id="wave" class="wave" d="M600,70 C760,60 860,70 980,70"/>
    <!-- Exhaust -->
    <g id="exhaustGroup" transform="translate(1068,70)">
      <circle id="ex1" class="exhaustPulse" r="4"/>
      <circle id="ex2" class="exhaustPulse" r="4"/>
      <circle id="ex3" class="exhaustPulse" r="4"/>
    </g>
    <g id="packets"></g>
  </svg>
  <div id="phaseLabel">Idle</div>
</div>

<script>
/* Build fusion bars */
const fGroup=document.getElementById("fusionBars");
for(let i=0;i<14;i++){
  let glow=document.createElementNS("http://www.w3.org/2000/svg","rect");
  glow.setAttribute("x",i*22); glow.setAttribute("y",0);
  glow.setAttribute("width",14); glow.setAttribute("height",36);
  glow.setAttribute("class","fusion-glow"); glow.setAttribute("id","f"+i);
  fGroup.appendChild(glow);
}
const nuclear=document.getElementById("nuclear");
const fusionGlows=[...Array(14)].map((_,i)=>document.getElementById("f"+i));
const wave=document.getElementById("wave");
const ex=[document.getElementById("ex1"),document.getElementById("ex2"),document.getElementById("ex3")];
const loopTop=document.getElementById("loopTop");
const loopBottom=document.getElementById("loopBottom");
const packetsG=document.getElementById("packets");

/* Coolant packets */
const packets=[];
const PACKET_COUNT=16;
for(let i=0;i<PACKET_COUNT;i++){
  let c=document.createElementNS("http://www.w3.org/2000/svg","circle");
  c.setAttribute("r",3.5); c.setAttribute("class","packet"); c.style.opacity=0;
  packetsG.appendChild(c);
  packets.push({el:c,path:(i%2?loopTop:loopBottom),offset:i/PACKET_COUNT});
}

let t=0;
function tick(){
  t+=0.03; if(t>1000) t=0;
  let phase=(t%12);
  document.getElementById("phaseLabel").textContent=
    phase<2?"Nuclear":phase<5?"Fusion":phase<8?"Coolant":phase<10?"Wave":"Exhaust";

  /* Nuclear pulsing */
  nuclear.setAttribute("r",16+Math.sin(t)*3);

  /* Fusion glow sweep */
  fusionGlows.forEach((g,i)=>{
    let q=(Math.sin(t*0.3+i*0.5)+1)/2;
    g.style.opacity=(phase>=2&&phase<5)?q:0;
    g.setAttribute("fill","rgba(255,59,48,"+g.style.opacity+")");
  });

  /* Packets */
  const pathLenTop=loopTop.getTotalLength();
  const pathLenBottom=loopBottom.getTotalLength();
  packets.forEach((pk,i)=>{
    let cycle=((t*0.05)+pk.offset)%1;
    let len=(pk.path===loopTop?pathLenTop:pathLenBottom);
    let pt=pk.path.getPointAtLength(cycle*len);
    pk.el.setAttribute("cx",pt.x);
    pk.el.setAttribute("cy",pt.y);
    pk.el.style.opacity=(phase>=5&&phase<8)?0.6:0;
  });

  /* Wave */
  wave.style.opacity=(phase>=8&&phase<10)?0.6:0;

  /* Exhaust */
  ex.forEach((c,i)=>{
    let cyc=((t*0.1)+i/3)%1;
    let r=4+cyc*25; let op=(phase>=10)?1-cyc:0;
    c.setAttribute("r",r); c.style.opacity=op;
  });

  requestAnimationFrame(tick);
}
tick();
</script>
</body>
</html>
