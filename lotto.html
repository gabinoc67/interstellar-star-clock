<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>lotto texas</title>
<style>
  :root { --bg:#0b1020; --fg:#eaf0ff; --muted:#a7b0c3; --panel:#121936; --accent:#60a5fa; --ok:#22c55e; --warn:#fb7185; --border:#243053; }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .container{max-width:1200px;margin:24px auto;padding:0 16px}
  h1{font-size:24px;margin:0 0 8px}
  p{color:var(--muted);margin:0 0 16px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;align-items:start}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:16px}
  .hdr{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
  .badge{background:#1e293b;color:var(--accent);border:1px solid var(--border);padding:4px 8px;border-radius:999px;font-size:12px}
  .btns{display:flex;flex-wrap:wrap;gap:8px}
  button{background:#1e293b;color:var(--fg);border:1px solid var(--border);border-radius:10px;padding:8px 12px;cursor:pointer}
  button.primary{background:var(--accent);color:#081427;border-color:#3b82f6}
  button.danger{background:#1f2937;color:#ffe4e6;border-color:#7f1d1d}
  button:hover{filter:brightness(1.08)}
  table{width:100%;border-collapse:collapse;font-size:14px}
  th,td{border-bottom:1px solid var(--border);padding:8px 6px;vertical-align:top}
  th{text-align:left;color:var(--muted);font-weight:600}
  tr:last-child td{border-bottom:none}
  .nowrap{white-space:nowrap}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  .ok{color:var(--ok);font-weight:600}
  .warn{color:var(--warn);font-weight:600}
  .muted{color:var(--muted)}
  .chips{display:flex;flex-wrap:wrap;gap:6px}
  .chip{background:#0f172a;border:1px solid var(--border);border-radius:999px;padding:4px 8px;font-size:12px}
  .flex{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  input[type="number"], input[type="text"]{background:#0f172a;border:1px solid var(--border);color:#eaf0ff;padding:8px 10px;border-radius:10px;width:72px}
  input[type="text"]{width:100%}
  .row{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
  .footer-note{font-size:12px;color:var(--muted);margin-top:4px}
  @media (max-width: 1000px){.grid{grid-template-columns:1fr}}
  @media print{
    body{background:#fff;color:#000}
    .card{border-color:#ddd}
    .btns, #addForm, h1, p, .footer-note { display:none !important }
    /* Print all three panels in order */
  }
</style>
</head>
<body>
  <div class="container">
    <h1>lotto texas</h1>
    <p>Start with an empty “Last 10 Drawings.” Paste or type 6 numbers to add drawings, generate 400 rows, see matches, and print everything.</p>

    <!-- Controls -->
    <div class="card" style="margin-bottom:16px">
      <div class="hdr">
        <strong>Controls</strong>
        <span id="targetBadge" class="badge">Target sums: —</span>
      </div>
      <div class="btns">
        <button id="btnGenerate" class="primary" type="button">Generate 400</button>
        <button id="btnReset" class="danger" type="button">Reset Generated & Matches</button>
        <button id="btnClearLast10" type="button">Clear Last-10</button>
        <button id="btnPrint" type="button">Print Preview</button>
      </div>
      <div class="footer-note">Reset clears generated rows & matches only. Clear Last-10 empties the drawings list.</div>
    </div>

    <!-- Add Next Drawing -->
    <div class="card" style="margin-bottom:16px">
      <div class="hdr">
        <strong>Add Next Drawing (keeps only last 10)</strong>
        <span class="badge" id="lastCount">0 rows</span>
      </div>
      <form id="addForm">
        <div class="row" style="margin-bottom:8px">
          <input type="number" min="1" max="54" required placeholder="#1" />
          <input type="number" min="1" max="54" required placeholder="#2" />
          <input type="number" min="1" max="54" required placeholder="#3" />
          <input type="number" min="1" max="54" required placeholder="#4" />
          <input type="number" min="1" max="54" required placeholder="#5" />
          <input type="number" min="1" max="54" required placeholder="#6" />
        </div>
        <div class="flex">
          <button class="primary" type="submit">Add Next Drawing</button>
          <span class="muted">or paste:</span>
          <input id="pasteLine" type="text" placeholder="e.g. 24, 17, 38, 43, 37, 5" />
          <button type="button" id="btnParse">Use Pasted</button>
          <span class="muted" id="addStatus"></span>
        </div>
      </form>
    </div>

    <div class="grid">
      <!-- LEFT: Matches on top, Generated under -->
      <div class="card" id="matchesCard">
        <div class="hdr"><strong>Matches (Ready to Print)</strong>
          <span class="badge"><span id="matchCount">0</span> matches</span>
        </div>
        <table>
          <thead><tr><th class="nowrap">Row #</th><th>Numbers</th><th class="nowrap">Sum</th></tr></thead>
          <tbody id="matchesBody"></tbody>
        </table>
      </div>

      <div class="card" id="generatedCard">
        <div class="hdr"><strong>Generated Rows (<span id="genCount">0</span>)</strong>
          <span class="badge">6 numbers, 1–54</span>
        </div>
        <table>
          <thead><tr><th class="nowrap">Row #</th><th>Numbers</th><th class="nowrap">Sum</th><th class="nowrap">Match?</th></tr></thead>
          <tbody id="generatedBody"></tbody>
        </table>
      </div>

      <!-- RIGHT: Last 10 -->
      <div class="card" id="last10Card">
        <div class="hdr"><strong>Last 10 Drawings</strong>
          <span class="badge">editable</span>
        </div>
        <div class="chips" id="sumChips"></div>
        <table>
          <thead><tr><th class="nowrap">#</th><th>Numbers</th><th class="nowrap">Sum</th></tr></thead>
          <tbody id="providedBody"></tbody>
        </table>
      </div>
    </div>
  </div>

<script>
(() => {
  const state = { provided: [], generated: [] }; // ← no defaults

  // helpers
  const sum  = a => a.reduce((x,y)=>x+y,0);
  const uniq = a => [...new Set(a)];
  const fmt  = a => a.join(", ");
  const targets = () => state.provided.map(sum);

  function updateProvided(){
    const body = document.getElementById('providedBody'); body.innerHTML = '';
    state.provided.forEach((row,i)=>{
      body.innerHTML += `<tr><td class="nowrap">${i+1}</td><td>${fmt(row)}</td><td class="nowrap">${sum(row)}</td></tr>`;
    });
    const chips = document.getElementById('sumChips'); chips.innerHTML = '';
    if(state.provided.length===0){
      chips.innerHTML = '<span class="muted">(no drawings yet)</span>';
      document.getElementById('targetBadge').textContent = 'Target sums: —';
    }else{
      const s = targets();
      s.forEach(v => chips.innerHTML += `<span class="chip mono">${v}</span>`);
      document.getElementById('targetBadge').textContent = 'Target sums: ' + s.join(', ');
    }
    document.getElementById('lastCount').textContent = state.provided.length + ' rows';
  }

  function renderGenerated(){
    const b = document.getElementById('generatedBody'); b.innerHTML='';
    state.generated.forEach((r,i)=>{
      b.innerHTML += `<tr><td class="nowrap">${i+1}</td><td>${fmt(r.nums)}</td><td class="nowrap">${r.sum}</td><td class="${r.match?'ok':''}">${r.match?'Yes':'No'}</td></tr>`;
    });
    document.getElementById('genCount').textContent = state.generated.length;
  }

  function renderMatches(){
    const b = document.getElementById('matchesBody'); b.innerHTML='';
    const m = state.generated.filter(r=>r.match);
    m.forEach(r => b.innerHTML += `<tr><td class="nowrap">${r.idx}</td><td>${fmt(r.nums)}</td><td class="nowrap">${r.sum}</td></tr>`);
    document.getElementById('matchCount').textContent = m.length;
  }

  function randRow(){
    const bag = Array.from({length:54},(_,i)=>i+1), pick=[];
    for(let i=0;i<6;i++){ const j=Math.floor(Math.random()*bag.length); pick.push(bag[j]); bag.splice(j,1); }
    return pick.sort((a,b)=>a-b);
  }

  function generate(n=400){
    const t = new Set(targets());
    state.generated = [];
    for(let i=0;i<n;i++){
      const nums = randRow(); const s = sum(nums);
      state.generated.push({nums, sum:s, match:t.has(s), idx:i+1});
    }
    renderGenerated(); renderMatches();
  }

  // controls
  document.getElementById('btnGenerate').onclick = ()=>generate();
  document.getElementById('btnReset').onclick    = ()=>{ state.generated=[]; renderGenerated(); renderMatches(); };
  document.getElementById('btnClearLast10').onclick = ()=>{ state.provided=[]; updateProvided(); renderGenerated(); renderMatches(); };
  document.getElementById('btnPrint').onclick    = ()=>{ requestAnimationFrame(()=>window.print()); };

  // paste helper
  document.getElementById('btnParse').onclick = ()=>{
    const line = document.getElementById('pasteLine').value.trim();
    const nums = line.split(/[^0-9]+/).filter(Boolean).map(Number);
    const st = document.getElementById('addStatus');
    if(nums.length!==6){ st.textContent='Need 6 numbers'; st.className='warn'; return; }
    const clean = uniq(nums).filter(x=>x>=1 && x<=54);
    if(clean.length!==6){ st.textContent='Unique, 1–54 only'; st.className='warn'; return; }
    const ins = document.querySelectorAll('#addForm input[type="number"]');
    clean.forEach((v,i)=> ins[i].value = v);
    st.textContent='Parsed ✓'; st.className='ok';
  };

  // add drawing
  document.getElementById('addForm').onsubmit = (e)=>{
    e.preventDefault();
    const ins = [...document.querySelectorAll('#addForm input[type="number"]')];
    const nums = ins.map(i=>Number(i.value)).filter(Number.isFinite);
    const st = document.getElementById('addStatus');
    if(nums.length!==6){ st.textContent='Enter all 6'; st.className='warn'; return; }
    const clean = uniq(nums).filter(x=>x>=1 && x<=54);
    if(clean.length!==6){ st.textContent='Unique, 1–54'; st.className='warn'; return; }
    clean.sort((a,b)=>a-b);
    state.provided.unshift(clean);
    if(state.provided.length>10) state.provided.pop();
    updateProvided();
    ins.forEach(i=>i.value=''); document.getElementById('pasteLine').value='';
    st.textContent = `Added ✓ (sum ${sum(clean)})`; st.className='ok';
    if(state.generated.length){ renderGenerated(); renderMatches(); }
  };

  // init
  updateProvided();
})();
</script>
</body>
</html>
